(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function En(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Pe={},ms=[],jt=()=>{},ii=()=>!1,Mo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),jn=e=>e.startsWith("onUpdate:"),We=Object.assign,Pn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Ka=Object.prototype.hasOwnProperty,Me=(e,t)=>Ka.call(e,t),pe=Array.isArray,gs=e=>Gs(e)==="[object Map]",ks=e=>Gs(e)==="[object Set]",Qn=e=>Gs(e)==="[object Date]",ye=e=>typeof e=="function",Be=e=>typeof e=="string",Pt=e=>typeof e=="symbol",Ne=e=>e!==null&&typeof e=="object",ai=e=>(Ne(e)||ye(e))&&ye(e.then)&&ye(e.catch),li=Object.prototype.toString,Gs=e=>li.call(e),Wa=e=>Gs(e).slice(8,-1),ci=e=>Gs(e)==="[object Object]",Nn=e=>Be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,js=En(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ao=e=>{const t=Object.create(null);return(s=>t[s]||(t[s]=e(s)))},Ga=/-(\w)/g,gt=Ao(e=>e.replace(Ga,(t,s)=>s?s.toUpperCase():"")),Ja=/\B([A-Z])/g,es=Ao(e=>e.replace(Ja,"-$1").toLowerCase()),Eo=Ao(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wo=Ao(e=>e?`on${Eo(e)}`:""),Gt=(e,t)=>!Object.is(e,t),lo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},ui=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},yo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Xa=e=>{const t=Be(e)?Number(e):NaN;return isNaN(t)?e:t};let er;const jo=()=>er||(er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function He(e){if(pe(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],r=Be(n)?el(n):He(n);if(r)for(const i in r)t[i]=r[i]}return t}else if(Be(e)||Ne(e))return e}const Ya=/;(?![^(]*\))/g,Za=/:([^]+)/,Qa=/\/\*[^]*?\*\//g;function el(e){const t={};return e.replace(Qa,"").split(Ya).forEach(s=>{if(s){const n=s.split(Za);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ne(e){let t="";if(Be(e))t=e;else if(pe(e))for(let s=0;s<e.length;s++){const n=ne(e[s]);n&&(t+=n+" ")}else if(Ne(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const tl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sl=En(tl);function di(e){return!!e||e===""}function ol(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=fs(e[n],t[n]);return s}function fs(e,t){if(e===t)return!0;let s=Qn(e),n=Qn(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Pt(e),n=Pt(t),s||n)return e===t;if(s=pe(e),n=pe(t),s||n)return s&&n?ol(e,t):!1;if(s=Ne(e),n=Ne(t),s||n){if(!s||!n)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!fs(e[a],t[a]))return!1}}return String(e)===String(t)}function Ln(e,t){return e.findIndex(s=>fs(s,t))}const fi=e=>!!(e&&e.__v_isRef===!0),y=e=>Be(e)?e:e==null?"":pe(e)||Ne(e)&&(e.toString===li||!ye(e.toString))?fi(e)?y(e.value):JSON.stringify(e,pi,2):String(e),pi=(e,t)=>fi(t)?pi(e,t.value):gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,r],i)=>(s[Go(n,i)+" =>"]=r,s),{})}:ks(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Go(s))}:Pt(t)?Go(t):Ne(t)&&!pe(t)&&!ci(t)?String(t):t,Go=(e,t="")=>{var s;return Pt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lt;class nl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=lt,!t&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=lt;try{return lt=this,t()}finally{lt=s}}}on(){++this._on===1&&(this.prevScope=lt,lt=this)}off(){this._on>0&&--this._on===0&&(lt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function rl(){return lt}let Le;const Jo=new WeakSet;class hi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,lt&&lt.active&&lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jo.has(this)&&(Jo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tr(this),gi(this);const t=Le,s=_t;Le=this,_t=!0;try{return this.fn()}finally{yi(this),Le=t,_t=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)On(t);this.deps=this.depsTail=void 0,tr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){un(this)&&this.run()}get dirty(){return un(this)}}let vi=0,Ps,Ns;function mi(e,t=!1){if(e.flags|=8,t){e.next=Ns,Ns=e;return}e.next=Ps,Ps=e}function In(){vi++}function Bn(){if(--vi>0)return;if(Ns){let t=Ns;for(Ns=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Ps;){let t=Ps;for(Ps=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function gi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function yi(e){let t,s=e.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),On(n),il(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=s}function un(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_i(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _i(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===zs)||(e.globalVersion=zs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!un(e))))return;e.flags|=2;const t=e.dep,s=Le,n=_t;Le=e,_t=!0;try{gi(e);const r=e.fn(e._value);(t.version===0||Gt(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Le=s,_t=n,yi(e),e.flags&=-3}}function On(e,t=!1){const{dep:s,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)On(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function il(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let _t=!0;const bi=[];function Ft(){bi.push(_t),_t=!1}function Vt(){const e=bi.pop();_t=e===void 0?!0:e}function tr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Le;Le=void 0;try{t()}finally{Le=s}}}let zs=0;class al{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Le||!_t||Le===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Le)s=this.activeLink=new al(Le,this),Le.deps?(s.prevDep=Le.depsTail,Le.depsTail.nextDep=s,Le.depsTail=s):Le.deps=Le.depsTail=s,wi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Le.depsTail,s.nextDep=void 0,Le.depsTail.nextDep=s,Le.depsTail=s,Le.deps===s&&(Le.deps=n)}return s}trigger(t){this.version++,zs++,this.notify(t)}notify(t){In();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Bn()}}}function wi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)wi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const dn=new WeakMap,cs=Symbol(""),fn=Symbol(""),Rs=Symbol("");function Ye(e,t,s){if(_t&&Le){let n=dn.get(e);n||dn.set(e,n=new Map);let r=n.get(s);r||(n.set(s,r=new Dn),r.map=n,r.key=s),r.track()}}function Ot(e,t,s,n,r,i){const a=dn.get(e);if(!a){zs++;return}const l=u=>{u&&u.trigger()};if(In(),t==="clear")a.forEach(l);else{const u=pe(e),d=u&&Nn(s);if(u&&s==="length"){const c=Number(n);a.forEach((f,C)=>{(C==="length"||C===Rs||!Pt(C)&&C>=c)&&l(f)})}else switch((s!==void 0||a.has(void 0))&&l(a.get(s)),d&&l(a.get(Rs)),t){case"add":u?d&&l(a.get("length")):(l(a.get(cs)),gs(e)&&l(a.get(fn)));break;case"delete":u||(l(a.get(cs)),gs(e)&&l(a.get(fn)));break;case"set":gs(e)&&l(a.get(cs));break}}Bn()}function hs(e){const t=Te(e);return t===e?t:(Ye(t,"iterate",Rs),vt(e)?t:t.map(Ge))}function Po(e){return Ye(e=Te(e),"iterate",Rs),e}const ll={__proto__:null,[Symbol.iterator](){return Xo(this,Symbol.iterator,Ge)},concat(...e){return hs(this).concat(...e.map(t=>pe(t)?hs(t):t))},entries(){return Xo(this,"entries",e=>(e[1]=Ge(e[1]),e))},every(e,t){return Nt(this,"every",e,t,void 0,arguments)},filter(e,t){return Nt(this,"filter",e,t,s=>s.map(Ge),arguments)},find(e,t){return Nt(this,"find",e,t,Ge,arguments)},findIndex(e,t){return Nt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Nt(this,"findLast",e,t,Ge,arguments)},findLastIndex(e,t){return Nt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Nt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Yo(this,"includes",e)},indexOf(...e){return Yo(this,"indexOf",e)},join(e){return hs(this).join(e)},lastIndexOf(...e){return Yo(this,"lastIndexOf",e)},map(e,t){return Nt(this,"map",e,t,void 0,arguments)},pop(){return Ts(this,"pop")},push(...e){return Ts(this,"push",e)},reduce(e,...t){return sr(this,"reduce",e,t)},reduceRight(e,...t){return sr(this,"reduceRight",e,t)},shift(){return Ts(this,"shift")},some(e,t){return Nt(this,"some",e,t,void 0,arguments)},splice(...e){return Ts(this,"splice",e)},toReversed(){return hs(this).toReversed()},toSorted(e){return hs(this).toSorted(e)},toSpliced(...e){return hs(this).toSpliced(...e)},unshift(...e){return Ts(this,"unshift",e)},values(){return Xo(this,"values",Ge)}};function Xo(e,t,s){const n=Po(e),r=n[t]();return n!==e&&!vt(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const cl=Array.prototype;function Nt(e,t,s,n,r,i){const a=Po(e),l=a!==e&&!vt(e),u=a[t];if(u!==cl[t]){const f=u.apply(e,i);return l?Ge(f):f}let d=s;a!==e&&(l?d=function(f,C){return s.call(this,Ge(f),C,e)}:s.length>2&&(d=function(f,C){return s.call(this,f,C,e)}));const c=u.call(a,d,n);return l&&r?r(c):c}function sr(e,t,s,n){const r=Po(e);let i=s;return r!==e&&(vt(e)?s.length>3&&(i=function(a,l,u){return s.call(this,a,l,u,e)}):i=function(a,l,u){return s.call(this,a,Ge(l),u,e)}),r[t](i,...n)}function Yo(e,t,s){const n=Te(e);Ye(n,"iterate",Rs);const r=n[t](...s);return(r===-1||r===!1)&&Fn(s[0])?(s[0]=Te(s[0]),n[t](...s)):r}function Ts(e,t,s=[]){Ft(),In();const n=Te(e)[t].apply(e,s);return Bn(),Vt(),n}const ul=En("__proto__,__v_isRef,__isVue"),ki=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pt));function dl(e){Pt(e)||(e=String(e));const t=Te(this);return Ye(t,"has",e),t.hasOwnProperty(e)}class xi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?wl:Ti:i?Si:$i).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=pe(t);if(!r){let u;if(a&&(u=ll[s]))return u;if(s==="hasOwnProperty")return dl}const l=Reflect.get(t,s,tt(t)?t:n);return(Pt(s)?ki.has(s):ul(s))||(r||Ye(t,"get",s),i)?l:tt(l)?a&&Nn(s)?l:l.value:Ne(l)?r?Mi(l):yt(l):l}}class Ci extends xi{constructor(t=!1){super(!1,t)}set(t,s,n,r){let i=t[s];if(!this._isShallow){const u=Xt(i);if(!vt(n)&&!Xt(n)&&(i=Te(i),n=Te(n)),!pe(t)&&tt(i)&&!tt(n))return u||(i.value=n),!0}const a=pe(t)&&Nn(s)?Number(s)<t.length:Me(t,s),l=Reflect.set(t,s,n,tt(t)?t:r);return t===Te(r)&&(a?Gt(n,i)&&Ot(t,"set",s,n):Ot(t,"add",s,n)),l}deleteProperty(t,s){const n=Me(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&n&&Ot(t,"delete",s,void 0),r}has(t,s){const n=Reflect.has(t,s);return(!Pt(s)||!ki.has(s))&&Ye(t,"has",s),n}ownKeys(t){return Ye(t,"iterate",pe(t)?"length":cs),Reflect.ownKeys(t)}}class fl extends xi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const pl=new Ci,hl=new fl,vl=new Ci(!0);const pn=e=>e,to=e=>Reflect.getPrototypeOf(e);function ml(e,t,s){return function(...n){const r=this.__v_raw,i=Te(r),a=gs(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,d=r[e](...n),c=s?pn:t?_o:Ge;return!t&&Ye(i,"iterate",u?fn:cs),{next(){const{value:f,done:C}=d.next();return C?{value:f,done:C}:{value:l?[c(f[0]),c(f[1])]:c(f),done:C}},[Symbol.iterator](){return this}}}}function so(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function gl(e,t){const s={get(r){const i=this.__v_raw,a=Te(i),l=Te(r);e||(Gt(r,l)&&Ye(a,"get",r),Ye(a,"get",l));const{has:u}=to(a),d=t?pn:e?_o:Ge;if(u.call(a,r))return d(i.get(r));if(u.call(a,l))return d(i.get(l));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!e&&Ye(Te(r),"iterate",cs),r.size},has(r){const i=this.__v_raw,a=Te(i),l=Te(r);return e||(Gt(r,l)&&Ye(a,"has",r),Ye(a,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const a=this,l=a.__v_raw,u=Te(l),d=t?pn:e?_o:Ge;return!e&&Ye(u,"iterate",cs),l.forEach((c,f)=>r.call(i,d(c),d(f),a))}};return We(s,e?{add:so("add"),set:so("set"),delete:so("delete"),clear:so("clear")}:{add(r){!t&&!vt(r)&&!Xt(r)&&(r=Te(r));const i=Te(this);return to(i).has.call(i,r)||(i.add(r),Ot(i,"add",r,r)),this},set(r,i){!t&&!vt(i)&&!Xt(i)&&(i=Te(i));const a=Te(this),{has:l,get:u}=to(a);let d=l.call(a,r);d||(r=Te(r),d=l.call(a,r));const c=u.call(a,r);return a.set(r,i),d?Gt(i,c)&&Ot(a,"set",r,i):Ot(a,"add",r,i),this},delete(r){const i=Te(this),{has:a,get:l}=to(i);let u=a.call(i,r);u||(r=Te(r),u=a.call(i,r)),l&&l.call(i,r);const d=i.delete(r);return u&&Ot(i,"delete",r,void 0),d},clear(){const r=Te(this),i=r.size!==0,a=r.clear();return i&&Ot(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=ml(r,e,t)}),s}function zn(e,t){const s=gl(e,t);return(n,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(Me(s,r)&&r in n?s:n,r,i)}const yl={get:zn(!1,!1)},_l={get:zn(!1,!0)},bl={get:zn(!0,!1)};const $i=new WeakMap,Si=new WeakMap,Ti=new WeakMap,wl=new WeakMap;function kl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xl(e){return e.__v_skip||!Object.isExtensible(e)?0:kl(Wa(e))}function yt(e){return Xt(e)?e:Rn(e,!1,pl,yl,$i)}function Cl(e){return Rn(e,!1,vl,_l,Si)}function Mi(e){return Rn(e,!0,hl,bl,Ti)}function Rn(e,t,s,n,r){if(!Ne(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=xl(e);if(i===0)return e;const a=r.get(e);if(a)return a;const l=new Proxy(e,i===2?n:s);return r.set(e,l),l}function ys(e){return Xt(e)?ys(e.__v_raw):!!(e&&e.__v_isReactive)}function Xt(e){return!!(e&&e.__v_isReadonly)}function vt(e){return!!(e&&e.__v_isShallow)}function Fn(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function $l(e){return!Me(e,"__v_skip")&&Object.isExtensible(e)&&ui(e,"__v_skip",!0),e}const Ge=e=>Ne(e)?yt(e):e,_o=e=>Ne(e)?Mi(e):e;function tt(e){return e?e.__v_isRef===!0:!1}function O(e){return Sl(e,!1)}function Sl(e,t){return tt(e)?e:new Tl(e,t)}class Tl{constructor(t,s){this.dep=new Dn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Te(t),this._value=s?t:Ge(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||vt(t)||Xt(t);t=n?t:Te(t),Gt(t,s)&&(this._rawValue=t,this._value=n?t:Ge(t),this.dep.trigger())}}function I(e){return tt(e)?e.value:e}const Ml={get:(e,t,s)=>t==="__v_raw"?e:I(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const r=e[t];return tt(r)&&!tt(s)?(r.value=s,!0):Reflect.set(e,t,s,n)}};function Ai(e){return ys(e)?e:new Proxy(e,Ml)}class Al{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Dn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return mi(this,!0),!0}get value(){const t=this.dep.track();return _i(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function El(e,t,s=!1){let n,r;return ye(e)?n=e:(n=e.get,r=e.set),new Al(n,r,s)}const oo={},bo=new WeakMap;let is;function jl(e,t=!1,s=is){if(s){let n=bo.get(s);n||bo.set(s,n=[]),n.push(e)}}function Pl(e,t,s=Pe){const{immediate:n,deep:r,once:i,scheduler:a,augmentJob:l,call:u}=s,d=P=>r?P:vt(P)||r===!1||r===0?Dt(P,1):Dt(P);let c,f,C,N,S=!1,$=!1;if(tt(e)?(f=()=>e.value,S=vt(e)):ys(e)?(f=()=>d(e),S=!0):pe(e)?($=!0,S=e.some(P=>ys(P)||vt(P)),f=()=>e.map(P=>{if(tt(P))return P.value;if(ys(P))return d(P);if(ye(P))return u?u(P,2):P()})):ye(e)?t?f=u?()=>u(e,2):e:f=()=>{if(C){Ft();try{C()}finally{Vt()}}const P=is;is=c;try{return u?u(e,3,[N]):e(N)}finally{is=P}}:f=jt,t&&r){const P=f,j=r===!0?1/0:r;f=()=>Dt(P(),j)}const _=rl(),m=()=>{c.stop(),_&&_.active&&Pn(_.effects,c)};if(i&&t){const P=t;t=(...j)=>{P(...j),m()}}let g=$?new Array(e.length).fill(oo):oo;const E=P=>{if(!(!(c.flags&1)||!c.dirty&&!P))if(t){const j=c.run();if(r||S||($?j.some((A,F)=>Gt(A,g[F])):Gt(j,g))){C&&C();const A=is;is=c;try{const F=[j,g===oo?void 0:$&&g[0]===oo?[]:g,N];g=j,u?u(t,3,F):t(...F)}finally{is=A}}}else c.run()};return l&&l(E),c=new hi(f),c.scheduler=a?()=>a(E,!1):E,N=P=>jl(P,!1,c),C=c.onStop=()=>{const P=bo.get(c);if(P){if(u)u(P,4);else for(const j of P)j();bo.delete(c)}},t?n?E(!0):g=c.run():a?a(E.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function Dt(e,t=1/0,s){if(t<=0||!Ne(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,tt(e))Dt(e.value,t,s);else if(pe(e))for(let n=0;n<e.length;n++)Dt(e[n],t,s);else if(ks(e)||gs(e))e.forEach(n=>{Dt(n,t,s)});else if(ci(e)){for(const n in e)Dt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Dt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Js(e,t,s,n){try{return n?e(...n):e()}catch(r){No(r,t,s)}}function bt(e,t,s,n){if(ye(e)){const r=Js(e,t,s,n);return r&&ai(r)&&r.catch(i=>{No(i,t,s)}),r}if(pe(e)){const r=[];for(let i=0;i<e.length;i++)r.push(bt(e[i],t,s,n));return r}}function No(e,t,s,n=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Pe;if(t){let l=t.parent;const u=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const c=l.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,u,d)===!1)return}l=l.parent}if(i){Ft(),Js(i,null,10,[e,u,d]),Vt();return}}Nl(e,s,r,n,a)}function Nl(e,t,s,n=!0,r=!1){if(r)throw e;console.error(e)}const nt=[];let Mt=-1;const _s=[];let Kt=null,vs=0;const Ei=Promise.resolve();let wo=null;function Et(e){const t=wo||Ei;return e?t.then(this?e.bind(this):e):t}function Ll(e){let t=Mt+1,s=nt.length;for(;t<s;){const n=t+s>>>1,r=nt[n],i=Fs(r);i<e||i===e&&r.flags&2?t=n+1:s=n}return t}function Vn(e){if(!(e.flags&1)){const t=Fs(e),s=nt[nt.length-1];!s||!(e.flags&2)&&t>=Fs(s)?nt.push(e):nt.splice(Ll(t),0,e),e.flags|=1,ji()}}function ji(){wo||(wo=Ei.then(Ni))}function Il(e){pe(e)?_s.push(...e):Kt&&e.id===-1?Kt.splice(vs+1,0,e):e.flags&1||(_s.push(e),e.flags|=1),ji()}function or(e,t,s=Mt+1){for(;s<nt.length;s++){const n=nt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;nt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Pi(e){if(_s.length){const t=[...new Set(_s)].sort((s,n)=>Fs(s)-Fs(n));if(_s.length=0,Kt){Kt.push(...t);return}for(Kt=t,vs=0;vs<Kt.length;vs++){const s=Kt[vs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Kt=null,vs=0}}const Fs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ni(e){try{for(Mt=0;Mt<nt.length;Mt++){const t=nt[Mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Js(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mt<nt.length;Mt++){const t=nt[Mt];t&&(t.flags&=-2)}Mt=-1,nt.length=0,Pi(),wo=null,(nt.length||_s.length)&&Ni()}}let ft=null,Li=null;function ko(e){const t=ft;return ft=e,Li=e&&e.type.__scopeId||null,t}function Jt(e,t=ft,s){if(!t||e._n)return e;const n=(...r)=>{n._d&&yr(-1);const i=ko(t);let a;try{a=e(...r)}finally{ko(i),n._d&&yr(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function he(e,t){if(ft===null)return e;const s=Do(ft),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,u=Pe]=t[r];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&Dt(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function ss(e,t,s,n){const r=e.dirs,i=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];i&&(l.oldValue=i[a].value);let u=l.dir[n];u&&(Ft(),bt(u,s,8,[e.el,l,e,t]),Vt())}}const Ii=Symbol("_vte"),Bi=e=>e.__isTeleport,Ls=e=>e&&(e.disabled||e.disabled===""),nr=e=>e&&(e.defer||e.defer===""),rr=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ir=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,hn=(e,t)=>{const s=e&&e.to;return Be(s)?t?t(s):null:s},Oi={name:"Teleport",__isTeleport:!0,process(e,t,s,n,r,i,a,l,u,d){const{mc:c,pc:f,pbc:C,o:{insert:N,querySelector:S,createText:$,createComment:_}}=d,m=Ls(t.props);let{shapeFlag:g,children:E,dynamicChildren:P}=t;if(e==null){const j=t.el=$(""),A=t.anchor=$("");N(j,s,n),N(A,s,n);const F=(L,J)=>{g&16&&(r&&r.isCE&&(r.ce._teleportTarget=L),c(E,L,J,r,i,a,l,u))},K=()=>{const L=t.target=hn(t.props,S),J=Di(L,t,$,N);L&&(a!=="svg"&&rr(L)?a="svg":a!=="mathml"&&ir(L)&&(a="mathml"),m||(F(L,J),co(t,!1)))};m&&(F(s,A),co(t,!0)),nr(t.props)?(t.el.__isMounted=!1,ot(()=>{K(),delete t.el.__isMounted},i)):K()}else{if(nr(t.props)&&e.el.__isMounted===!1){ot(()=>{Oi.process(e,t,s,n,r,i,a,l,u,d)},i);return}t.el=e.el,t.targetStart=e.targetStart;const j=t.anchor=e.anchor,A=t.target=e.target,F=t.targetAnchor=e.targetAnchor,K=Ls(e.props),L=K?s:A,J=K?j:F;if(a==="svg"||rr(A)?a="svg":(a==="mathml"||ir(A))&&(a="mathml"),P?(C(e.dynamicChildren,P,L,r,i,a,l),qn(e,t,!0)):u||f(e,t,L,J,r,i,a,l,!1),m)K?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):no(t,s,j,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ae=t.target=hn(t.props,S);ae&&no(t,ae,null,d,0)}else K&&no(t,A,F,d,1);co(t,m)}},remove(e,t,s,{um:n,o:{remove:r}},i){const{shapeFlag:a,children:l,anchor:u,targetStart:d,targetAnchor:c,target:f,props:C}=e;if(f&&(r(d),r(c)),i&&r(u),a&16){const N=i||!Ls(C);for(let S=0;S<l.length;S++){const $=l[S];n($,t,s,N,!!$.dynamicChildren)}}},move:no,hydrate:Bl};function no(e,t,s,{o:{insert:n},m:r},i=2){i===0&&n(e.targetAnchor,t,s);const{el:a,anchor:l,shapeFlag:u,children:d,props:c}=e,f=i===2;if(f&&n(a,t,s),(!f||Ls(c))&&u&16)for(let C=0;C<d.length;C++)r(d[C],t,s,2);f&&n(l,t,s)}function Bl(e,t,s,n,r,i,{o:{nextSibling:a,parentNode:l,querySelector:u,insert:d,createText:c}},f){const C=t.target=hn(t.props,u);if(C){const N=Ls(t.props),S=C._lpa||C.firstChild;if(t.shapeFlag&16)if(N)t.anchor=f(a(e),t,l(e),s,n,r,i),t.targetStart=S,t.targetAnchor=S&&a(S);else{t.anchor=a(e);let $=S;for(;$;){if($&&$.nodeType===8){if($.data==="teleport start anchor")t.targetStart=$;else if($.data==="teleport anchor"){t.targetAnchor=$,C._lpa=t.targetAnchor&&a(t.targetAnchor);break}}$=a($)}t.targetAnchor||Di(C,t,c,d),f(S&&a(S),t,C,s,n,r,i)}co(t,N)}return t.anchor&&a(t.anchor)}const xs=Oi;function co(e,t){const s=e.ctx;if(s&&s.ut){let n,r;for(t?(n=e.el,r=e.anchor):(n=e.targetStart,r=e.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function Di(e,t,s,n){const r=t.targetStart=s(""),i=t.targetAnchor=s("");return r[Ii]=i,e&&(n(r,e),n(i,e)),i}const Bt=Symbol("_leaveCb"),ro=Symbol("_enterCb");function Ol(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Je(()=>{e.isMounted=!0}),Ki(()=>{e.isUnmounting=!0}),e}const ht=[Function,Array],zi={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ht,onEnter:ht,onAfterEnter:ht,onEnterCancelled:ht,onBeforeLeave:ht,onLeave:ht,onAfterLeave:ht,onLeaveCancelled:ht,onBeforeAppear:ht,onAppear:ht,onAfterAppear:ht,onAppearCancelled:ht},Ri=e=>{const t=e.subTree;return t.component?Ri(t.component):t},Dl={name:"BaseTransition",props:zi,setup(e,{slots:t}){const s=ha(),n=Ol();return()=>{const r=t.default&&Hi(t.default(),!0);if(!r||!r.length)return;const i=Fi(r),a=Te(e),{mode:l}=a;if(n.isLeaving)return Zo(i);const u=ar(i);if(!u)return Zo(i);let d=vn(u,a,n,s,f=>d=f);u.type!==rt&&Vs(u,d);let c=s.subTree&&ar(s.subTree);if(c&&c.type!==rt&&!as(u,c)&&Ri(s).type!==rt){let f=vn(c,a,n,s);if(Vs(c,f),l==="out-in"&&u.type!==rt)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,c=void 0},Zo(i);l==="in-out"&&u.type!==rt?f.delayLeave=(C,N,S)=>{const $=Vi(n,c);$[String(c.key)]=c,C[Bt]=()=>{N(),C[Bt]=void 0,delete d.delayedLeave,c=void 0},d.delayedLeave=()=>{S(),delete d.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function Fi(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==rt){t=s;break}}return t}const zl=Dl;function Vi(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function vn(e,t,s,n,r){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:C,onLeave:N,onAfterLeave:S,onLeaveCancelled:$,onBeforeAppear:_,onAppear:m,onAfterAppear:g,onAppearCancelled:E}=t,P=String(e.key),j=Vi(s,e),A=(L,J)=>{L&&bt(L,n,9,J)},F=(L,J)=>{const ae=J[1];A(L,J),pe(L)?L.every(oe=>oe.length<=1)&&ae():L.length<=1&&ae()},K={mode:a,persisted:l,beforeEnter(L){let J=u;if(!s.isMounted)if(i)J=_||u;else return;L[Bt]&&L[Bt](!0);const ae=j[P];ae&&as(e,ae)&&ae.el[Bt]&&ae.el[Bt](),A(J,[L])},enter(L){let J=d,ae=c,oe=f;if(!s.isMounted)if(i)J=m||d,ae=g||c,oe=E||f;else return;let me=!1;const Ee=L[ro]=De=>{me||(me=!0,De?A(oe,[L]):A(ae,[L]),K.delayedLeave&&K.delayedLeave(),L[ro]=void 0)};J?F(J,[L,Ee]):Ee()},leave(L,J){const ae=String(e.key);if(L[ro]&&L[ro](!0),s.isUnmounting)return J();A(C,[L]);let oe=!1;const me=L[Bt]=Ee=>{oe||(oe=!0,J(),Ee?A($,[L]):A(S,[L]),L[Bt]=void 0,j[ae]===e&&delete j[ae])};j[ae]=e,N?F(N,[L,me]):me()},clone(L){const J=vn(L,t,s,n,r);return r&&r(J),J}};return K}function Zo(e){if(Lo(e))return e=Yt(e),e.children=null,e}function ar(e){if(!Lo(e))return Bi(e.type)&&e.children?Fi(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&ye(s.default))return s.default()}}function Vs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Vs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Hi(e,t=!1,s){let n=[],r=0;for(let i=0;i<e.length;i++){let a=e[i];const l=s==null?a.key:String(s)+String(a.key!=null?a.key:i);a.type===de?(a.patchFlag&128&&r++,n=n.concat(Hi(a.children,t,l))):(t||a.type!==rt)&&n.push(l!=null?Yt(a,{key:l}):a)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Fe(e,t){return ye(e)?We({name:e.name},t,{setup:e}):e}function Ui(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Is(e,t,s,n,r=!1){if(pe(e)){e.forEach((S,$)=>Is(S,t&&(pe(t)?t[$]:t),s,n,r));return}if(Bs(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Is(e,t,s,n.component.subTree);return}const i=n.shapeFlag&4?Do(n.component):n.el,a=r?null:i,{i:l,r:u}=e,d=t&&t.r,c=l.refs===Pe?l.refs={}:l.refs,f=l.setupState,C=Te(f),N=f===Pe?ii:S=>Me(C,S);if(d!=null&&d!==u){if(Be(d))c[d]=null,N(d)&&(f[d]=null);else if(tt(d)){d.value=null;const S=t;S.k&&(c[S.k]=null)}}if(ye(u))Js(u,l,12,[a,c]);else{const S=Be(u),$=tt(u);if(S||$){const _=()=>{if(e.f){const m=S?N(u)?f[u]:c[u]:u.value;if(r)pe(m)&&Pn(m,i);else if(pe(m))m.includes(i)||m.push(i);else if(S)c[u]=[i],N(u)&&(f[u]=c[u]);else{const g=[i];u.value=g,e.k&&(c[e.k]=g)}}else S?(c[u]=a,N(u)&&(f[u]=a)):$&&(u.value=a,e.k&&(c[e.k]=a))};a?(_.id=-1,ot(_,s)):_()}}}jo().requestIdleCallback;jo().cancelIdleCallback;const Bs=e=>!!e.type.__asyncLoader,Lo=e=>e.type.__isKeepAlive;function Rl(e,t){qi(e,"a",t)}function Fl(e,t){qi(e,"da",t)}function qi(e,t,s=Ze){const n=e.__wdc||(e.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Io(t,n,s),s){let r=s.parent;for(;r&&r.parent;)Lo(r.parent.vnode)&&Vl(n,t,s,r),r=r.parent}}function Vl(e,t,s,n){const r=Io(t,e,n,!0);Ut(()=>{Pn(n[t],r)},s)}function Io(e,t,s=Ze,n=!1){if(s){const r=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ft();const l=Xs(s),u=bt(t,s,e,a);return l(),Vt(),u});return n?r.unshift(i):r.push(i),i}}const Ht=e=>(t,s=Ze)=>{(!Us||e==="sp")&&Io(e,(...n)=>t(...n),s)},Hl=Ht("bm"),Je=Ht("m"),Ul=Ht("bu"),ql=Ht("u"),Ki=Ht("bum"),Ut=Ht("um"),Kl=Ht("sp"),Wl=Ht("rtg"),Gl=Ht("rtc");function Jl(e,t=Ze){Io("ec",e,t)}const Wi="components";function lr(e,t){return Ji(Wi,e,!0,t)||e}const Gi=Symbol.for("v-ndc");function Xl(e){return Be(e)?Ji(Wi,e,!1)||e:e||Gi}function Ji(e,t,s=!0,n=!1){const r=ft||Ze;if(r){const i=r.type;{const l=Oc(i,!1);if(l&&(l===t||l===gt(t)||l===Eo(gt(t))))return i}const a=cr(r[e]||i[e],t)||cr(r.appContext[e],t);return!a&&n?i:a}}function cr(e,t){return e&&(e[t]||e[gt(t)]||e[Eo(gt(t))])}function ge(e,t,s,n){let r;const i=s,a=pe(e);if(a||Be(e)){const l=a&&ys(e);let u=!1,d=!1;l&&(u=!vt(e),d=Xt(e),e=Po(e)),r=new Array(e.length);for(let c=0,f=e.length;c<f;c++)r[c]=t(u?d?_o(Ge(e[c])):Ge(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,i)}else if(Ne(e))if(e[Symbol.iterator])r=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);r=new Array(l.length);for(let u=0,d=l.length;u<d;u++){const c=l[u];r[u]=t(e[c],c,u,i)}}else r=[];return r}const mn=e=>e?va(e)?Do(e):mn(e.parent):null,Os=We(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>mn(e.parent),$root:e=>mn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Yi(e),$forceUpdate:e=>e.f||(e.f=()=>{Vn(e.update)}),$nextTick:e=>e.n||(e.n=Et.bind(e.proxy)),$watch:e=>yc.bind(e)}),Qo=(e,t)=>e!==Pe&&!e.__isScriptSetup&&Me(e,t),Yl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:a,type:l,appContext:u}=e;let d;if(t[0]!=="$"){const N=a[t];if(N!==void 0)switch(N){case 1:return n[t];case 2:return r[t];case 4:return s[t];case 3:return i[t]}else{if(Qo(n,t))return a[t]=1,n[t];if(r!==Pe&&Me(r,t))return a[t]=2,r[t];if((d=e.propsOptions[0])&&Me(d,t))return a[t]=3,i[t];if(s!==Pe&&Me(s,t))return a[t]=4,s[t];gn&&(a[t]=0)}}const c=Os[t];let f,C;if(c)return t==="$attrs"&&Ye(e.attrs,"get",""),c(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(s!==Pe&&Me(s,t))return a[t]=4,s[t];if(C=u.config.globalProperties,Me(C,t))return C[t]},set({_:e},t,s){const{data:n,setupState:r,ctx:i}=e;return Qo(r,t)?(r[t]=s,!0):n!==Pe&&Me(n,t)?(n[t]=s,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:a}},l){let u,d;return!!(s[l]||e!==Pe&&l[0]!=="$"&&Me(e,l)||Qo(t,l)||(u=i[0])&&Me(u,l)||Me(n,l)||Me(Os,l)||Me(r.config.globalProperties,l)||(d=a.__cssModules)&&d[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Me(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function ur(e){return pe(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let gn=!0;function Zl(e){const t=Yi(e),s=e.proxy,n=e.ctx;gn=!1,t.beforeCreate&&dr(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:a,watch:l,provide:u,inject:d,created:c,beforeMount:f,mounted:C,beforeUpdate:N,updated:S,activated:$,deactivated:_,beforeDestroy:m,beforeUnmount:g,destroyed:E,unmounted:P,render:j,renderTracked:A,renderTriggered:F,errorCaptured:K,serverPrefetch:L,expose:J,inheritAttrs:ae,components:oe,directives:me,filters:Ee}=t;if(d&&Ql(d,n,null),a)for(const R in a){const B=a[R];ye(B)&&(n[R]=B.bind(s))}if(r){const R=r.call(s,s);Ne(R)&&(e.data=yt(R))}if(gn=!0,i)for(const R in i){const B=i[R],xe=ye(B)?B.bind(s,s):ye(B.get)?B.get.bind(s,s):jt,Ue=!ye(B)&&ye(B.set)?B.set.bind(s):jt,Ve=be({get:xe,set:Ue});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:ce=>Ve.value=ce})}if(l)for(const R in l)Xi(l[R],n,s,R);if(u){const R=ye(u)?u.call(s):u;Reflect.ownKeys(R).forEach(B=>{rc(B,R[B])})}c&&dr(c,e,"c");function ee(R,B){pe(B)?B.forEach(xe=>R(xe.bind(s))):B&&R(B.bind(s))}if(ee(Hl,f),ee(Je,C),ee(Ul,N),ee(ql,S),ee(Rl,$),ee(Fl,_),ee(Jl,K),ee(Gl,A),ee(Wl,F),ee(Ki,g),ee(Ut,P),ee(Kl,L),pe(J))if(J.length){const R=e.exposed||(e.exposed={});J.forEach(B=>{Object.defineProperty(R,B,{get:()=>s[B],set:xe=>s[B]=xe,enumerable:!0})})}else e.exposed||(e.exposed={});j&&e.render===jt&&(e.render=j),ae!=null&&(e.inheritAttrs=ae),oe&&(e.components=oe),me&&(e.directives=me),L&&Ui(e)}function Ql(e,t,s=jt){pe(e)&&(e=yn(e));for(const n in e){const r=e[n];let i;Ne(r)?"default"in r?i=uo(r.from||n,r.default,!0):i=uo(r.from||n):i=uo(r),tt(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[n]=i}}function dr(e,t,s){bt(pe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Xi(e,t,s,n){let r=n.includes(".")?ca(s,n):()=>s[n];if(Be(e)){const i=t[e];ye(i)&&Re(r,i)}else if(ye(e))Re(r,e.bind(s));else if(Ne(e))if(pe(e))e.forEach(i=>Xi(i,t,s,n));else{const i=ye(e.handler)?e.handler.bind(s):t[e.handler];ye(i)&&Re(r,i,e)}}function Yi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!r.length&&!s&&!n?u=t:(u={},r.length&&r.forEach(d=>xo(u,d,a,!0)),xo(u,t,a)),Ne(t)&&i.set(t,u),u}function xo(e,t,s,n=!1){const{mixins:r,extends:i}=t;i&&xo(e,i,s,!0),r&&r.forEach(a=>xo(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const l=ec[a]||s&&s[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const ec={data:fr,props:pr,emits:pr,methods:Es,computed:Es,beforeCreate:st,created:st,beforeMount:st,mounted:st,beforeUpdate:st,updated:st,beforeDestroy:st,beforeUnmount:st,destroyed:st,unmounted:st,activated:st,deactivated:st,errorCaptured:st,serverPrefetch:st,components:Es,directives:Es,watch:sc,provide:fr,inject:tc};function fr(e,t){return t?e?function(){return We(ye(e)?e.call(this,this):e,ye(t)?t.call(this,this):t)}:t:e}function tc(e,t){return Es(yn(e),yn(t))}function yn(e){if(pe(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function st(e,t){return e?[...new Set([].concat(e,t))]:t}function Es(e,t){return e?We(Object.create(null),e,t):t}function pr(e,t){return e?pe(e)&&pe(t)?[...new Set([...e,...t])]:We(Object.create(null),ur(e),ur(t??{})):t}function sc(e,t){if(!e)return t;if(!t)return e;const s=We(Object.create(null),e);for(const n in t)s[n]=st(e[n],t[n]);return s}function Zi(){return{app:null,config:{isNativeTag:ii,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oc=0;function nc(e,t){return function(n,r=null){ye(n)||(n=We({},n)),r!=null&&!Ne(r)&&(r=null);const i=Zi(),a=new WeakSet,l=[];let u=!1;const d=i.app={_uid:oc++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Rc,get config(){return i.config},set config(c){},use(c,...f){return a.has(c)||(c&&ye(c.install)?(a.add(c),c.install(d,...f)):ye(c)&&(a.add(c),c(d,...f))),d},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),d},component(c,f){return f?(i.components[c]=f,d):i.components[c]},directive(c,f){return f?(i.directives[c]=f,d):i.directives[c]},mount(c,f,C){if(!u){const N=d._ceVNode||Ce(n,r);return N.appContext=i,C===!0?C="svg":C===!1&&(C=void 0),e(N,c,C),u=!0,d._container=c,c.__vue_app__=d,Do(N.component)}},onUnmount(c){l.push(c)},unmount(){u&&(bt(l,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(c,f){return i.provides[c]=f,d},runWithContext(c){const f=bs;bs=d;try{return c()}finally{bs=f}}};return d}}let bs=null;function rc(e,t){if(Ze){let s=Ze.provides;const n=Ze.parent&&Ze.parent.provides;n===s&&(s=Ze.provides=Object.create(n)),s[e]=t}}function uo(e,t,s=!1){const n=ha();if(n||bs){let r=bs?bs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return s&&ye(t)?t.call(n&&n.proxy):t}}const Qi={},ea=()=>Object.create(Qi),ta=e=>Object.getPrototypeOf(e)===Qi;function ic(e,t,s,n=!1){const r={},i=ea();e.propsDefaults=Object.create(null),sa(e,t,r,i);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);s?e.props=n?r:Cl(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function ac(e,t,s,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=e,l=Te(r),[u]=e.propsOptions;let d=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let C=c[f];if(Bo(e.emitsOptions,C))continue;const N=t[C];if(u)if(Me(i,C))N!==i[C]&&(i[C]=N,d=!0);else{const S=gt(C);r[S]=_n(u,l,S,N,e,!1)}else N!==i[C]&&(i[C]=N,d=!0)}}}else{sa(e,t,r,i)&&(d=!0);let c;for(const f in l)(!t||!Me(t,f)&&((c=es(f))===f||!Me(t,c)))&&(u?s&&(s[f]!==void 0||s[c]!==void 0)&&(r[f]=_n(u,l,f,void 0,e,!0)):delete r[f]);if(i!==l)for(const f in i)(!t||!Me(t,f))&&(delete i[f],d=!0)}d&&Ot(e.attrs,"set","")}function sa(e,t,s,n){const[r,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(js(u))continue;const d=t[u];let c;r&&Me(r,c=gt(u))?!i||!i.includes(c)?s[c]=d:(l||(l={}))[c]=d:Bo(e.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,a=!0)}if(i){const u=Te(s),d=l||Pe;for(let c=0;c<i.length;c++){const f=i[c];s[f]=_n(r,u,f,d[f],e,!Me(d,f))}}return a}function _n(e,t,s,n,r,i){const a=e[s];if(a!=null){const l=Me(a,"default");if(l&&n===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&ye(u)){const{propsDefaults:d}=r;if(s in d)n=d[s];else{const c=Xs(r);n=d[s]=u.call(null,t),c()}}else n=u;r.ce&&r.ce._setProp(s,n)}a[0]&&(i&&!l?n=!1:a[1]&&(n===""||n===es(s))&&(n=!0))}return n}const lc=new WeakMap;function oa(e,t,s=!1){const n=s?lc:t.propsCache,r=n.get(e);if(r)return r;const i=e.props,a={},l=[];let u=!1;if(!ye(e)){const c=f=>{u=!0;const[C,N]=oa(f,t,!0);We(a,C),N&&l.push(...N)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!u)return Ne(e)&&n.set(e,ms),ms;if(pe(i))for(let c=0;c<i.length;c++){const f=gt(i[c]);hr(f)&&(a[f]=Pe)}else if(i)for(const c in i){const f=gt(c);if(hr(f)){const C=i[c],N=a[f]=pe(C)||ye(C)?{type:C}:We({},C),S=N.type;let $=!1,_=!0;if(pe(S))for(let m=0;m<S.length;++m){const g=S[m],E=ye(g)&&g.name;if(E==="Boolean"){$=!0;break}else E==="String"&&(_=!1)}else $=ye(S)&&S.name==="Boolean";N[0]=$,N[1]=_,($||Me(N,"default"))&&l.push(f)}}const d=[a,l];return Ne(e)&&n.set(e,d),d}function hr(e){return e[0]!=="$"&&!js(e)}const Hn=e=>e==="_"||e==="_ctx"||e==="$stable",Un=e=>pe(e)?e.map(At):[At(e)],cc=(e,t,s)=>{if(t._n)return t;const n=Jt((...r)=>Un(t(...r)),s);return n._c=!1,n},na=(e,t,s)=>{const n=e._ctx;for(const r in e){if(Hn(r))continue;const i=e[r];if(ye(i))t[r]=cc(r,i,n);else if(i!=null){const a=Un(i);t[r]=()=>a}}},ra=(e,t)=>{const s=Un(t);e.slots.default=()=>s},ia=(e,t,s)=>{for(const n in t)(s||!Hn(n))&&(e[n]=t[n])},uc=(e,t,s)=>{const n=e.slots=ea();if(e.vnode.shapeFlag&32){const r=t._;r?(ia(n,t,s),s&&ui(n,"_",r,!0)):na(t,n)}else t&&ra(e,t)},dc=(e,t,s)=>{const{vnode:n,slots:r}=e;let i=!0,a=Pe;if(n.shapeFlag&32){const l=t._;l?s&&l===1?i=!1:ia(r,t,s):(i=!t.$stable,na(t,r)),a=t}else t&&(ra(e,t),a={default:1});if(i)for(const l in r)!Hn(l)&&a[l]==null&&delete r[l]},ot=$c;function fc(e){return pc(e)}function pc(e,t){const s=jo();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:l,createComment:u,setText:d,setElementText:c,parentNode:f,nextSibling:C,setScopeId:N=jt,insertStaticContent:S}=e,$=(w,T,z,X=null,q=null,W=null,se=void 0,k=null,p=!!T.dynamicChildren)=>{if(w===T)return;w&&!as(w,T)&&(X=le(w),ce(w,q,W,!0),w=null),T.patchFlag===-2&&(p=!1,T.dynamicChildren=null);const{type:b,ref:U,shapeFlag:Z}=T;switch(b){case Oo:_(w,T,z,X);break;case rt:m(w,T,z,X);break;case fo:w==null&&g(T,z,X,se);break;case de:oe(w,T,z,X,q,W,se,k,p);break;default:Z&1?j(w,T,z,X,q,W,se,k,p):Z&6?me(w,T,z,X,q,W,se,k,p):(Z&64||Z&128)&&b.process(w,T,z,X,q,W,se,k,p,fe)}U!=null&&q?Is(U,w&&w.ref,W,T||w,!T):U==null&&w&&w.ref!=null&&Is(w.ref,null,W,w,!0)},_=(w,T,z,X)=>{if(w==null)n(T.el=l(T.children),z,X);else{const q=T.el=w.el;T.children!==w.children&&d(q,T.children)}},m=(w,T,z,X)=>{w==null?n(T.el=u(T.children||""),z,X):T.el=w.el},g=(w,T,z,X)=>{[w.el,w.anchor]=S(w.children,T,z,X,w.el,w.anchor)},E=({el:w,anchor:T},z,X)=>{let q;for(;w&&w!==T;)q=C(w),n(w,z,X),w=q;n(T,z,X)},P=({el:w,anchor:T})=>{let z;for(;w&&w!==T;)z=C(w),r(w),w=z;r(T)},j=(w,T,z,X,q,W,se,k,p)=>{T.type==="svg"?se="svg":T.type==="math"&&(se="mathml"),w==null?A(T,z,X,q,W,se,k,p):L(w,T,q,W,se,k,p)},A=(w,T,z,X,q,W,se,k)=>{let p,b;const{props:U,shapeFlag:Z,transition:Q,dirs:ue}=w;if(p=w.el=a(w.type,W,U&&U.is,U),Z&8?c(p,w.children):Z&16&&K(w.children,p,null,X,q,en(w,W),se,k),ue&&ss(w,null,X,"created"),F(p,w,w.scopeId,se,X),U){for(const ke in U)ke!=="value"&&!js(ke)&&i(p,ke,null,U[ke],W,X);"value"in U&&i(p,"value",null,U.value,W),(b=U.onVnodeBeforeMount)&&$t(b,X,w)}ue&&ss(w,null,X,"beforeMount");const ve=hc(q,Q);ve&&Q.beforeEnter(p),n(p,T,z),((b=U&&U.onVnodeMounted)||ve||ue)&&ot(()=>{b&&$t(b,X,w),ve&&Q.enter(p),ue&&ss(w,null,X,"mounted")},q)},F=(w,T,z,X,q)=>{if(z&&N(w,z),X)for(let W=0;W<X.length;W++)N(w,X[W]);if(q){let W=q.subTree;if(T===W||da(W.type)&&(W.ssContent===T||W.ssFallback===T)){const se=q.vnode;F(w,se,se.scopeId,se.slotScopeIds,q.parent)}}},K=(w,T,z,X,q,W,se,k,p=0)=>{for(let b=p;b<w.length;b++){const U=w[b]=k?Wt(w[b]):At(w[b]);$(null,U,T,z,X,q,W,se,k)}},L=(w,T,z,X,q,W,se)=>{const k=T.el=w.el;let{patchFlag:p,dynamicChildren:b,dirs:U}=T;p|=w.patchFlag&16;const Z=w.props||Pe,Q=T.props||Pe;let ue;if(z&&os(z,!1),(ue=Q.onVnodeBeforeUpdate)&&$t(ue,z,T,w),U&&ss(T,w,z,"beforeUpdate"),z&&os(z,!0),(Z.innerHTML&&Q.innerHTML==null||Z.textContent&&Q.textContent==null)&&c(k,""),b?J(w.dynamicChildren,b,k,z,X,en(T,q),W):se||B(w,T,k,null,z,X,en(T,q),W,!1),p>0){if(p&16)ae(k,Z,Q,z,q);else if(p&2&&Z.class!==Q.class&&i(k,"class",null,Q.class,q),p&4&&i(k,"style",Z.style,Q.style,q),p&8){const ve=T.dynamicProps;for(let ke=0;ke<ve.length;ke++){const Se=ve[ke],it=Z[Se],at=Q[Se];(at!==it||Se==="value")&&i(k,Se,it,at,q,z)}}p&1&&w.children!==T.children&&c(k,T.children)}else!se&&b==null&&ae(k,Z,Q,z,q);((ue=Q.onVnodeUpdated)||U)&&ot(()=>{ue&&$t(ue,z,T,w),U&&ss(T,w,z,"updated")},X)},J=(w,T,z,X,q,W,se)=>{for(let k=0;k<T.length;k++){const p=w[k],b=T[k],U=p.el&&(p.type===de||!as(p,b)||p.shapeFlag&198)?f(p.el):z;$(p,b,U,null,X,q,W,se,!0)}},ae=(w,T,z,X,q)=>{if(T!==z){if(T!==Pe)for(const W in T)!js(W)&&!(W in z)&&i(w,W,T[W],null,q,X);for(const W in z){if(js(W))continue;const se=z[W],k=T[W];se!==k&&W!=="value"&&i(w,W,k,se,q,X)}"value"in z&&i(w,"value",T.value,z.value,q)}},oe=(w,T,z,X,q,W,se,k,p)=>{const b=T.el=w?w.el:l(""),U=T.anchor=w?w.anchor:l("");let{patchFlag:Z,dynamicChildren:Q,slotScopeIds:ue}=T;ue&&(k=k?k.concat(ue):ue),w==null?(n(b,z,X),n(U,z,X),K(T.children||[],z,U,q,W,se,k,p)):Z>0&&Z&64&&Q&&w.dynamicChildren?(J(w.dynamicChildren,Q,z,q,W,se,k),(T.key!=null||q&&T===q.subTree)&&qn(w,T,!0)):B(w,T,z,U,q,W,se,k,p)},me=(w,T,z,X,q,W,se,k,p)=>{T.slotScopeIds=k,w==null?T.shapeFlag&512?q.ctx.activate(T,z,X,se,p):Ee(T,z,X,q,W,se,p):De(w,T,p)},Ee=(w,T,z,X,q,W,se)=>{const k=w.component=Pc(w,X,q);if(Lo(w)&&(k.ctx.renderer=fe),Nc(k,!1,se),k.asyncDep){if(q&&q.registerDep(k,ee,se),!w.el){const p=k.subTree=Ce(rt);m(null,p,T,z),w.placeholder=p.el}}else ee(k,w,T,z,q,W,se)},De=(w,T,z)=>{const X=T.component=w.component;if(xc(w,T,z))if(X.asyncDep&&!X.asyncResolved){R(X,T,z);return}else X.next=T,X.update();else T.el=w.el,X.vnode=T},ee=(w,T,z,X,q,W,se)=>{const k=()=>{if(w.isMounted){let{next:Z,bu:Q,u:ue,parent:ve,vnode:ke}=w;{const xt=aa(w);if(xt){Z&&(Z.el=ke.el,R(w,Z,se)),xt.asyncDep.then(()=>{w.isUnmounted||k()});return}}let Se=Z,it;os(w,!1),Z?(Z.el=ke.el,R(w,Z,se)):Z=ke,Q&&lo(Q),(it=Z.props&&Z.props.onVnodeBeforeUpdate)&&$t(it,ve,Z,ke),os(w,!0);const at=mr(w),kt=w.subTree;w.subTree=at,$(kt,at,f(kt.el),le(kt),w,q,W),Z.el=at.el,Se===null&&Cc(w,at.el),ue&&ot(ue,q),(it=Z.props&&Z.props.onVnodeUpdated)&&ot(()=>$t(it,ve,Z,ke),q)}else{let Z;const{el:Q,props:ue}=T,{bm:ve,m:ke,parent:Se,root:it,type:at}=w,kt=Bs(T);os(w,!1),ve&&lo(ve),!kt&&(Z=ue&&ue.onVnodeBeforeMount)&&$t(Z,Se,T),os(w,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(at);const xt=w.subTree=mr(w);$(null,xt,z,X,w,q,W),T.el=xt.el}if(ke&&ot(ke,q),!kt&&(Z=ue&&ue.onVnodeMounted)){const xt=T;ot(()=>$t(Z,Se,xt),q)}(T.shapeFlag&256||Se&&Bs(Se.vnode)&&Se.vnode.shapeFlag&256)&&w.a&&ot(w.a,q),w.isMounted=!0,T=z=X=null}};w.scope.on();const p=w.effect=new hi(k);w.scope.off();const b=w.update=p.run.bind(p),U=w.job=p.runIfDirty.bind(p);U.i=w,U.id=w.uid,p.scheduler=()=>Vn(U),os(w,!0),b()},R=(w,T,z)=>{T.component=w;const X=w.vnode.props;w.vnode=T,w.next=null,ac(w,T.props,X,z),dc(w,T.children,z),Ft(),or(w),Vt()},B=(w,T,z,X,q,W,se,k,p=!1)=>{const b=w&&w.children,U=w?w.shapeFlag:0,Z=T.children,{patchFlag:Q,shapeFlag:ue}=T;if(Q>0){if(Q&128){Ue(b,Z,z,X,q,W,se,k,p);return}else if(Q&256){xe(b,Z,z,X,q,W,se,k,p);return}}ue&8?(U&16&&$e(b,q,W),Z!==b&&c(z,Z)):U&16?ue&16?Ue(b,Z,z,X,q,W,se,k,p):$e(b,q,W,!0):(U&8&&c(z,""),ue&16&&K(Z,z,X,q,W,se,k,p))},xe=(w,T,z,X,q,W,se,k,p)=>{w=w||ms,T=T||ms;const b=w.length,U=T.length,Z=Math.min(b,U);let Q;for(Q=0;Q<Z;Q++){const ue=T[Q]=p?Wt(T[Q]):At(T[Q]);$(w[Q],ue,z,null,q,W,se,k,p)}b>U?$e(w,q,W,!0,!1,Z):K(T,z,X,q,W,se,k,p,Z)},Ue=(w,T,z,X,q,W,se,k,p)=>{let b=0;const U=T.length;let Z=w.length-1,Q=U-1;for(;b<=Z&&b<=Q;){const ue=w[b],ve=T[b]=p?Wt(T[b]):At(T[b]);if(as(ue,ve))$(ue,ve,z,null,q,W,se,k,p);else break;b++}for(;b<=Z&&b<=Q;){const ue=w[Z],ve=T[Q]=p?Wt(T[Q]):At(T[Q]);if(as(ue,ve))$(ue,ve,z,null,q,W,se,k,p);else break;Z--,Q--}if(b>Z){if(b<=Q){const ue=Q+1,ve=ue<U?T[ue].el:X;for(;b<=Q;)$(null,T[b]=p?Wt(T[b]):At(T[b]),z,ve,q,W,se,k,p),b++}}else if(b>Q)for(;b<=Z;)ce(w[b],q,W,!0),b++;else{const ue=b,ve=b,ke=new Map;for(b=ve;b<=Q;b++){const dt=T[b]=p?Wt(T[b]):At(T[b]);dt.key!=null&&ke.set(dt.key,b)}let Se,it=0;const at=Q-ve+1;let kt=!1,xt=0;const Ss=new Array(at);for(b=0;b<at;b++)Ss[b]=0;for(b=ue;b<=Z;b++){const dt=w[b];if(it>=at){ce(dt,q,W,!0);continue}let Ct;if(dt.key!=null)Ct=ke.get(dt.key);else for(Se=ve;Se<=Q;Se++)if(Ss[Se-ve]===0&&as(dt,T[Se])){Ct=Se;break}Ct===void 0?ce(dt,q,W,!0):(Ss[Ct-ve]=b+1,Ct>=xt?xt=Ct:kt=!0,$(dt,T[Ct],z,null,q,W,se,k,p),it++)}const Xn=kt?vc(Ss):ms;for(Se=Xn.length-1,b=at-1;b>=0;b--){const dt=ve+b,Ct=T[dt],Yn=T[dt+1],Zn=dt+1<U?Yn.el||Yn.placeholder:X;Ss[b]===0?$(null,Ct,z,Zn,q,W,se,k,p):kt&&(Se<0||b!==Xn[Se]?Ve(Ct,z,Zn,2):Se--)}}},Ve=(w,T,z,X,q=null)=>{const{el:W,type:se,transition:k,children:p,shapeFlag:b}=w;if(b&6){Ve(w.component.subTree,T,z,X);return}if(b&128){w.suspense.move(T,z,X);return}if(b&64){se.move(w,T,z,fe);return}if(se===de){n(W,T,z);for(let Z=0;Z<p.length;Z++)Ve(p[Z],T,z,X);n(w.anchor,T,z);return}if(se===fo){E(w,T,z);return}if(X!==2&&b&1&&k)if(X===0)k.beforeEnter(W),n(W,T,z),ot(()=>k.enter(W),q);else{const{leave:Z,delayLeave:Q,afterLeave:ue}=k,ve=()=>{w.ctx.isUnmounted?r(W):n(W,T,z)},ke=()=>{W._isLeaving&&W[Bt](!0),Z(W,()=>{ve(),ue&&ue()})};Q?Q(W,ve,ke):ke()}else n(W,T,z)},ce=(w,T,z,X=!1,q=!1)=>{const{type:W,props:se,ref:k,children:p,dynamicChildren:b,shapeFlag:U,patchFlag:Z,dirs:Q,cacheIndex:ue}=w;if(Z===-2&&(q=!1),k!=null&&(Ft(),Is(k,null,z,w,!0),Vt()),ue!=null&&(T.renderCache[ue]=void 0),U&256){T.ctx.deactivate(w);return}const ve=U&1&&Q,ke=!Bs(w);let Se;if(ke&&(Se=se&&se.onVnodeBeforeUnmount)&&$t(Se,T,w),U&6)re(w.component,z,X);else{if(U&128){w.suspense.unmount(z,X);return}ve&&ss(w,null,T,"beforeUnmount"),U&64?w.type.remove(w,T,z,fe,X):b&&!b.hasOnce&&(W!==de||Z>0&&Z&64)?$e(b,T,z,!1,!0):(W===de&&Z&384||!q&&U&16)&&$e(p,T,z),X&&V(w)}(ke&&(Se=se&&se.onVnodeUnmounted)||ve)&&ot(()=>{Se&&$t(Se,T,w),ve&&ss(w,null,T,"unmounted")},z)},V=w=>{const{type:T,el:z,anchor:X,transition:q}=w;if(T===de){H(z,X);return}if(T===fo){P(w);return}const W=()=>{r(z),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(w.shapeFlag&1&&q&&!q.persisted){const{leave:se,delayLeave:k}=q,p=()=>se(z,W);k?k(w.el,W,p):p()}else W()},H=(w,T)=>{let z;for(;w!==T;)z=C(w),r(w),w=z;r(T)},re=(w,T,z)=>{const{bum:X,scope:q,job:W,subTree:se,um:k,m:p,a:b}=w;vr(p),vr(b),X&&lo(X),q.stop(),W&&(W.flags|=8,ce(se,w,T,z)),k&&ot(k,T),ot(()=>{w.isUnmounted=!0},T)},$e=(w,T,z,X=!1,q=!1,W=0)=>{for(let se=W;se<w.length;se++)ce(w[se],T,z,X,q)},le=w=>{if(w.shapeFlag&6)return le(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const T=C(w.anchor||w.el),z=T&&T[Ii];return z?C(z):T};let M=!1;const te=(w,T,z)=>{w==null?T._vnode&&ce(T._vnode,null,null,!0):$(T._vnode||null,w,T,null,null,null,z),T._vnode=w,M||(M=!0,or(),Pi(),M=!1)},fe={p:$,um:ce,m:Ve,r:V,mt:Ee,mc:K,pc:B,pbc:J,n:le,o:e};return{render:te,hydrate:void 0,createApp:nc(te)}}function en({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function os({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function hc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function qn(e,t,s=!1){const n=e.children,r=t.children;if(pe(n)&&pe(r))for(let i=0;i<n.length;i++){const a=n[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Wt(r[i]),l.el=a.el),!s&&l.patchFlag!==-2&&qn(a,l)),l.type===Oo&&l.patchFlag!==-1&&(l.el=a.el),l.type===rt&&!l.el&&(l.el=a.el)}}function vc(e){const t=e.slice(),s=[0];let n,r,i,a,l;const u=e.length;for(n=0;n<u;n++){const d=e[n];if(d!==0){if(r=s[s.length-1],e[r]<d){t[n]=r,s.push(n);continue}for(i=0,a=s.length-1;i<a;)l=i+a>>1,e[s[l]]<d?i=l+1:a=l;d<e[s[i]]&&(i>0&&(t[n]=s[i-1]),s[i]=n)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=t[a];return s}function aa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:aa(t)}function vr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const mc=Symbol.for("v-scx"),gc=()=>uo(mc);function Re(e,t,s){return la(e,t,s)}function la(e,t,s=Pe){const{immediate:n,deep:r,flush:i,once:a}=s,l=We({},s),u=t&&n||!t&&i!=="post";let d;if(Us){if(i==="sync"){const N=gc();d=N.__watcherHandles||(N.__watcherHandles=[])}else if(!u){const N=()=>{};return N.stop=jt,N.resume=jt,N.pause=jt,N}}const c=Ze;l.call=(N,S,$)=>bt(N,c,S,$);let f=!1;i==="post"?l.scheduler=N=>{ot(N,c&&c.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(N,S)=>{S?N():Vn(N)}),l.augmentJob=N=>{t&&(N.flags|=4),f&&(N.flags|=2,c&&(N.id=c.uid,N.i=c))};const C=Pl(e,t,l);return Us&&(d?d.push(C):u&&C()),C}function yc(e,t,s){const n=this.proxy,r=Be(e)?e.includes(".")?ca(n,e):()=>n[e]:e.bind(n,n);let i;ye(t)?i=t:(i=t.handler,s=t);const a=Xs(this),l=la(r,i.bind(n),s);return a(),l}function ca(e,t){const s=t.split(".");return()=>{let n=e;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const _c=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gt(t)}Modifiers`]||e[`${es(t)}Modifiers`];function bc(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Pe;let r=s;const i=t.startsWith("update:"),a=i&&_c(n,t.slice(7));a&&(a.trim&&(r=s.map(c=>Be(c)?c.trim():c)),a.number&&(r=s.map(yo)));let l,u=n[l=Wo(t)]||n[l=Wo(gt(t))];!u&&i&&(u=n[l=Wo(es(t))]),u&&bt(u,e,6,r);const d=n[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,bt(d,e,6,r)}}function ua(e,t,s=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const i=e.emits;let a={},l=!1;if(!ye(e)){const u=d=>{const c=ua(d,t,!0);c&&(l=!0,We(a,c))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(Ne(e)&&n.set(e,null),null):(pe(i)?i.forEach(u=>a[u]=null):We(a,i),Ne(e)&&n.set(e,a),a)}function Bo(e,t){return!e||!Mo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,es(t))||Me(e,t))}function mr(e){const{type:t,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:l,emit:u,render:d,renderCache:c,props:f,data:C,setupState:N,ctx:S,inheritAttrs:$}=e,_=ko(e);let m,g;try{if(s.shapeFlag&4){const P=r||n,j=P;m=At(d.call(j,P,c,f,N,C,S)),g=l}else{const P=t;m=At(P.length>1?P(f,{attrs:l,slots:a,emit:u}):P(f,null)),g=t.props?l:wc(l)}}catch(P){Ds.length=0,No(P,e,1),m=Ce(rt)}let E=m;if(g&&$!==!1){const P=Object.keys(g),{shapeFlag:j}=E;P.length&&j&7&&(i&&P.some(jn)&&(g=kc(g,i)),E=Yt(E,g,!1,!0))}return s.dirs&&(E=Yt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(s.dirs):s.dirs),s.transition&&Vs(E,s.transition),m=E,ko(_),m}const wc=e=>{let t;for(const s in e)(s==="class"||s==="style"||Mo(s))&&((t||(t={}))[s]=e[s]);return t},kc=(e,t)=>{const s={};for(const n in e)(!jn(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function xc(e,t,s){const{props:n,children:r,component:i}=e,{props:a,children:l,patchFlag:u}=t,d=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?gr(n,a,d):!!a;if(u&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const C=c[f];if(a[C]!==n[C]&&!Bo(d,C))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?gr(n,a,d):!0:!!a;return!1}function gr(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(t[i]!==e[i]&&!Bo(s,i))return!0}return!1}function Cc({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const da=e=>e.__isSuspense;function $c(e,t){t&&t.pendingBranch?pe(e)?t.effects.push(...e):t.effects.push(e):Il(e)}const de=Symbol.for("v-fgt"),Oo=Symbol.for("v-txt"),rt=Symbol.for("v-cmt"),fo=Symbol.for("v-stc"),Ds=[];let pt=null;function h(e=!1){Ds.push(pt=e?null:[])}function Sc(){Ds.pop(),pt=Ds[Ds.length-1]||null}let Hs=1;function yr(e,t=!1){Hs+=e,e<0&&pt&&t&&(pt.hasOnce=!0)}function fa(e){return e.dynamicChildren=Hs>0?pt||ms:null,Sc(),Hs>0&&pt&&pt.push(e),e}function v(e,t,s,n,r,i){return fa(o(e,t,s,n,r,i,!0))}function Ie(e,t,s,n,r){return fa(Ce(e,t,s,n,r,!0))}function Co(e){return e?e.__v_isVNode===!0:!1}function as(e,t){return e.type===t.type&&e.key===t.key}const pa=({key:e})=>e??null,po=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Be(e)||tt(e)||ye(e)?{i:ft,r:e,k:t,f:!!s}:e:null);function o(e,t=null,s=null,n=0,r=null,i=e===de?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&pa(t),ref:t&&po(t),scopeId:Li,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ft};return l?(Kn(u,s),i&128&&e.normalize(u)):s&&(u.shapeFlag|=Be(s)?8:16),Hs>0&&!a&&pt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&pt.push(u),u}const Ce=Tc;function Tc(e,t=null,s=null,n=0,r=null,i=!1){if((!e||e===Gi)&&(e=rt),Co(e)){const l=Yt(e,t,!0);return s&&Kn(l,s),Hs>0&&!i&&pt&&(l.shapeFlag&6?pt[pt.indexOf(e)]=l:pt.push(l)),l.patchFlag=-2,l}if(Dc(e)&&(e=e.__vccOpts),t){t=Mc(t);let{class:l,style:u}=t;l&&!Be(l)&&(t.class=ne(l)),Ne(u)&&(Fn(u)&&!pe(u)&&(u=We({},u)),t.style=He(u))}const a=Be(e)?1:da(e)?128:Bi(e)?64:Ne(e)?4:ye(e)?2:0;return o(e,t,s,n,r,a,i,!0)}function Mc(e){return e?Fn(e)||ta(e)?We({},e):e:null}function Yt(e,t,s=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:l,transition:u}=e,d=t?Ac(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&pa(d),ref:t&&t.ref?s&&i?pe(i)?i.concat(po(t)):[i,po(t)]:po(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==de?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yt(e.ssContent),ssFallback:e.ssFallback&&Yt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Vs(c,u.clone(c)),c}function Y(e=" ",t=0){return Ce(Oo,null,e,t)}function Zt(e,t){const s=Ce(fo,null,e);return s.staticCount=t,s}function G(e="",t=!1){return t?(h(),Ie(rt,null,e)):Ce(rt,null,e)}function At(e){return e==null||typeof e=="boolean"?Ce(rt):pe(e)?Ce(de,null,e.slice()):Co(e)?Wt(e):Ce(Oo,null,String(e))}function Wt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yt(e)}function Kn(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(pe(t))s=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Kn(e,r()),r._c&&(r._d=!0));return}else{s=32;const r=t._;!r&&!ta(t)?t._ctx=ft:r===3&&ft&&(ft.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ye(t)?(t={default:t,_ctx:ft},s=32):(t=String(t),n&64?(s=16,t=[Y(t)]):s=8);e.children=t,e.shapeFlag|=s}function Ac(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=ne([t.class,n.class]));else if(r==="style")t.style=He([t.style,n.style]);else if(Mo(r)){const i=t[r],a=n[r];a&&i!==a&&!(pe(i)&&i.includes(a))&&(t[r]=i?[].concat(i,a):a)}else r!==""&&(t[r]=n[r])}return t}function $t(e,t,s,n=null){bt(e,t,7,[s,n])}const Ec=Zi();let jc=0;function Pc(e,t,s){const n=e.type,r=(t?t.appContext:e.appContext)||Ec,i={uid:jc++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oa(n,r),emitsOptions:ua(n,r),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:n.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=bc.bind(null,i),e.ce&&e.ce(i),i}let Ze=null;const ha=()=>Ze||ft;let $o,bn;{const e=jo(),t=(s,n)=>{let r;return(r=e[s])||(r=e[s]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};$o=t("__VUE_INSTANCE_SETTERS__",s=>Ze=s),bn=t("__VUE_SSR_SETTERS__",s=>Us=s)}const Xs=e=>{const t=Ze;return $o(e),e.scope.on(),()=>{e.scope.off(),$o(t)}},_r=()=>{Ze&&Ze.scope.off(),$o(null)};function va(e){return e.vnode.shapeFlag&4}let Us=!1;function Nc(e,t=!1,s=!1){t&&bn(t);const{props:n,children:r}=e.vnode,i=va(e);ic(e,n,i,t),uc(e,r,s||t);const a=i?Lc(e,t):void 0;return t&&bn(!1),a}function Lc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Yl);const{setup:n}=s;if(n){Ft();const r=e.setupContext=n.length>1?Bc(e):null,i=Xs(e),a=Js(n,e,0,[e.props,r]),l=ai(a);if(Vt(),i(),(l||e.sp)&&!Bs(e)&&Ui(e),l){if(a.then(_r,_r),t)return a.then(u=>{br(e,u)}).catch(u=>{No(u,e,0)});e.asyncDep=a}else br(e,a)}else ma(e)}function br(e,t,s){ye(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ne(t)&&(e.setupState=Ai(t)),ma(e)}function ma(e,t,s){const n=e.type;e.render||(e.render=n.render||jt);{const r=Xs(e);Ft();try{Zl(e)}finally{Vt(),r()}}}const Ic={get(e,t){return Ye(e,"get",""),e[t]}};function Bc(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Ic),slots:e.slots,emit:e.emit,expose:t}}function Do(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ai($l(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Os)return Os[s](e)},has(t,s){return s in t||s in Os}})):e.proxy}function Oc(e,t=!0){return ye(e)?e.displayName||e.name:e.name||t&&e.__name}function Dc(e){return ye(e)&&"__vccOpts"in e}const be=(e,t)=>El(e,t,Us);function zc(e,t,s){const n=arguments.length;return n===2?Ne(t)&&!pe(t)?Co(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Co(s)&&(s=[s]),Ce(e,t,s))}const Rc="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wn;const wr=typeof window<"u"&&window.trustedTypes;if(wr)try{wn=wr.createPolicy("vue",{createHTML:e=>e})}catch{}const ga=wn?e=>wn.createHTML(e):e=>e,Fc="http://www.w3.org/2000/svg",Vc="http://www.w3.org/1998/Math/MathML",It=typeof document<"u"?document:null,kr=It&&It.createElement("template"),Hc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const r=t==="svg"?It.createElementNS(Fc,e):t==="mathml"?It.createElementNS(Vc,e):s?It.createElement(e,{is:s}):It.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>It.createTextNode(e),createComment:e=>It.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>It.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,r,i){const a=s?s.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{kr.innerHTML=ga(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=kr.content;if(n==="svg"||n==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},qt="transition",Ms="animation",qs=Symbol("_vtc"),ya={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Uc=We({},zi,ya),qc=e=>(e.displayName="Transition",e.props=Uc,e),us=qc((e,{slots:t})=>zc(zl,Kc(e),t)),ns=(e,t=[])=>{pe(e)?e.forEach(s=>s(...t)):e&&e(...t)},xr=e=>e?pe(e)?e.some(t=>t.length>1):e.length>1:!1;function Kc(e){const t={};for(const oe in e)oe in ya||(t[oe]=e[oe]);if(e.css===!1)return t;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:a=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:u=i,appearActiveClass:d=a,appearToClass:c=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:C=`${s}-leave-active`,leaveToClass:N=`${s}-leave-to`}=e,S=Wc(r),$=S&&S[0],_=S&&S[1],{onBeforeEnter:m,onEnter:g,onEnterCancelled:E,onLeave:P,onLeaveCancelled:j,onBeforeAppear:A=m,onAppear:F=g,onAppearCancelled:K=E}=t,L=(oe,me,Ee,De)=>{oe._enterCancelled=De,rs(oe,me?c:l),rs(oe,me?d:a),Ee&&Ee()},J=(oe,me)=>{oe._isLeaving=!1,rs(oe,f),rs(oe,N),rs(oe,C),me&&me()},ae=oe=>(me,Ee)=>{const De=oe?F:g,ee=()=>L(me,oe,Ee);ns(De,[me,ee]),Cr(()=>{rs(me,oe?u:i),Lt(me,oe?c:l),xr(De)||$r(me,n,$,ee)})};return We(t,{onBeforeEnter(oe){ns(m,[oe]),Lt(oe,i),Lt(oe,a)},onBeforeAppear(oe){ns(A,[oe]),Lt(oe,u),Lt(oe,d)},onEnter:ae(!1),onAppear:ae(!0),onLeave(oe,me){oe._isLeaving=!0;const Ee=()=>J(oe,me);Lt(oe,f),oe._enterCancelled?(Lt(oe,C),Mr()):(Mr(),Lt(oe,C)),Cr(()=>{oe._isLeaving&&(rs(oe,f),Lt(oe,N),xr(P)||$r(oe,n,_,Ee))}),ns(P,[oe,Ee])},onEnterCancelled(oe){L(oe,!1,void 0,!0),ns(E,[oe])},onAppearCancelled(oe){L(oe,!0,void 0,!0),ns(K,[oe])},onLeaveCancelled(oe){J(oe),ns(j,[oe])}})}function Wc(e){if(e==null)return null;if(Ne(e))return[tn(e.enter),tn(e.leave)];{const t=tn(e);return[t,t]}}function tn(e){return Xa(e)}function Lt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[qs]||(e[qs]=new Set)).add(t)}function rs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[qs];s&&(s.delete(t),s.size||(e[qs]=void 0))}function Cr(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Gc=0;function $r(e,t,s,n){const r=e._endId=++Gc,i=()=>{r===e._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:a,timeout:l,propCount:u}=Jc(e,t);if(!a)return n();const d=a+"end";let c=0;const f=()=>{e.removeEventListener(d,C),i()},C=N=>{N.target===e&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},l+1),e.addEventListener(d,C)}function Jc(e,t){const s=window.getComputedStyle(e),n=S=>(s[S]||"").split(", "),r=n(`${qt}Delay`),i=n(`${qt}Duration`),a=Sr(r,i),l=n(`${Ms}Delay`),u=n(`${Ms}Duration`),d=Sr(l,u);let c=null,f=0,C=0;t===qt?a>0&&(c=qt,f=a,C=i.length):t===Ms?d>0&&(c=Ms,f=d,C=u.length):(f=Math.max(a,d),c=f>0?a>d?qt:Ms:null,C=c?c===qt?i.length:u.length:0);const N=c===qt&&/\b(transform|all)(,|$)/.test(n(`${qt}Property`).toString());return{type:c,timeout:f,propCount:C,hasTransform:N}}function Sr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Tr(s)+Tr(e[n])))}function Tr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Mr(){return document.body.offsetHeight}function Xc(e,t,s){const n=e[qs];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Ar=Symbol("_vod"),Yc=Symbol("_vsh"),Zc=Symbol(""),Qc=/(^|;)\s*display\s*:/;function eu(e,t,s){const n=e.style,r=Be(s);let i=!1;if(s&&!r){if(t)if(Be(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();s[l]==null&&ho(n,l,"")}else for(const a in t)s[a]==null&&ho(n,a,"");for(const a in s)a==="display"&&(i=!0),ho(n,a,s[a])}else if(r){if(t!==s){const a=n[Zc];a&&(s+=";"+a),n.cssText=s,i=Qc.test(s)}}else t&&e.removeAttribute("style");Ar in e&&(e[Ar]=i?n.display:"",e[Yc]&&(n.display="none"))}const Er=/\s*!important$/;function ho(e,t,s){if(pe(s))s.forEach(n=>ho(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=tu(e,t);Er.test(s)?e.setProperty(es(n),s.replace(Er,""),"important"):e[n]=s}}const jr=["Webkit","Moz","ms"],sn={};function tu(e,t){const s=sn[t];if(s)return s;let n=gt(t);if(n!=="filter"&&n in e)return sn[t]=n;n=Eo(n);for(let r=0;r<jr.length;r++){const i=jr[r]+n;if(i in e)return sn[t]=i}return t}const Pr="http://www.w3.org/1999/xlink";function Nr(e,t,s,n,r,i=sl(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Pr,t.slice(6,t.length)):e.setAttributeNS(Pr,t,s):s==null||i&&!di(s)?e.removeAttribute(t):e.setAttribute(t,i?"":Pt(s)?String(s):s)}function Lr(e,t,s,n,r){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ga(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(l!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let a=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=di(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(r||t)}function zt(e,t,s,n){e.addEventListener(t,s,n)}function su(e,t,s,n){e.removeEventListener(t,s,n)}const Ir=Symbol("_vei");function ou(e,t,s,n,r=null){const i=e[Ir]||(e[Ir]={}),a=i[t];if(n&&a)a.value=n;else{const[l,u]=nu(t);if(n){const d=i[t]=au(n,r);zt(e,l,d,u)}else a&&(su(e,l,a,u),i[t]=void 0)}}const Br=/(?:Once|Passive|Capture)$/;function nu(e){let t;if(Br.test(e)){t={};let n;for(;n=e.match(Br);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):es(e.slice(2)),t]}let on=0;const ru=Promise.resolve(),iu=()=>on||(ru.then(()=>on=0),on=Date.now());function au(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;bt(lu(n,s.value),t,5,[n])};return s.value=e,s.attached=iu(),s}function lu(e,t){if(pe(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const Or=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,cu=(e,t,s,n,r,i)=>{const a=r==="svg";t==="class"?Xc(e,n,a):t==="style"?eu(e,s,n):Mo(t)?jn(t)||ou(e,t,s,n,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):uu(e,t,n,a))?(Lr(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Nr(e,t,n,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Be(n))?Lr(e,gt(t),n,i,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Nr(e,t,n,a))};function uu(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Or(t)&&ye(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Or(t)&&Be(s)?!1:t in e}const Qt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pe(t)?s=>lo(t,s):t};function du(e){e.target.composing=!0}function Dr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const mt=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:s,number:n}},r){e[mt]=Qt(r);const i=n||r.props&&r.props.type==="number";zt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;s&&(l=l.trim()),i&&(l=yo(l)),e[mt](l)}),s&&zt(e,"change",()=>{e.value=e.value.trim()}),t||(zt(e,"compositionstart",du),zt(e,"compositionend",Dr),zt(e,"change",Dr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},a){if(e[mt]=Qt(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?yo(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||r&&e.value.trim()===u)||(e.value=u))}},Ks={deep:!0,created(e,t,s){e[mt]=Qt(s),zt(e,"change",()=>{const n=e._modelValue,r=ws(e),i=e.checked,a=e[mt];if(pe(n)){const l=Ln(n,r),u=l!==-1;if(i&&!u)a(n.concat(r));else if(!i&&u){const d=[...n];d.splice(l,1),a(d)}}else if(ks(n)){const l=new Set(n);i?l.add(r):l.delete(r),a(l)}else a(_a(e,i))})},mounted:zr,beforeUpdate(e,t,s){e[mt]=Qt(s),zr(e,t,s)}};function zr(e,{value:t,oldValue:s},n){e._modelValue=t;let r;if(pe(t))r=Ln(t,n.props.value)>-1;else if(ks(t))r=t.has(n.props.value);else{if(t===s)return;r=fs(t,_a(e,!0))}e.checked!==r&&(e.checked=r)}const fu={created(e,{value:t},s){e.checked=fs(t,s.props.value),e[mt]=Qt(s),zt(e,"change",()=>{e[mt](ws(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[mt]=Qt(n),t!==s&&(e.checked=fs(t,n.props.value))}},et={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const r=ks(t);zt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?yo(ws(a)):ws(a));e[mt](e.multiple?r?new Set(i):i:i[0]),e._assigning=!0,Et(()=>{e._assigning=!1})}),e[mt]=Qt(n)},mounted(e,{value:t}){Rr(e,t)},beforeUpdate(e,t,s){e[mt]=Qt(s)},updated(e,{value:t}){e._assigning||Rr(e,t)}};function Rr(e,t){const s=e.multiple,n=pe(t);if(!(s&&!n&&!ks(t))){for(let r=0,i=e.options.length;r<i;r++){const a=e.options[r],l=ws(a);if(s)if(n){const u=typeof l;u==="string"||u==="number"?a.selected=t.some(d=>String(d)===String(l)):a.selected=Ln(t,l)>-1}else a.selected=t.has(l);else if(fs(ws(a),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ws(e){return"_value"in e?e._value:e.value}function _a(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Fr={created(e,t,s){io(e,t,s,null,"created")},mounted(e,t,s){io(e,t,s,null,"mounted")},beforeUpdate(e,t,s,n){io(e,t,s,n,"beforeUpdate")},updated(e,t,s,n){io(e,t,s,n,"updated")}};function pu(e,t){switch(e){case"SELECT":return et;case"TEXTAREA":return Ae;default:switch(t){case"checkbox":return Ks;case"radio":return fu;default:return Ae}}}function io(e,t,s,n,r){const a=pu(e.tagName,s.props&&s.props.type)[r];a&&a(e,t,s,n)}const hu=["ctrl","shift","alt","meta"],vu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>hu.some(s=>e[`${s}Key`]&&!t.includes(s))},ze=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=((r,...i)=>{for(let a=0;a<t.length;a++){const l=vu[t[a]];if(l&&l(r,t))return}return e(r,...i)}))},mu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zo=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=(r=>{if(!("key"in r))return;const i=es(r.key);if(t.some(a=>a===i||mu[a]===i))return e(r)}))},gu=We({patchProp:cu},Hc);let Vr;function yu(){return Vr||(Vr=fc(gu))}const _u=((...e)=>{const t=yu().createApp(...e),{mount:s}=t;return t.mount=n=>{const r=wu(n);if(!r)return;const i=t._component;!ye(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,bu(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t});function bu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function wu(e){return Be(e)?document.querySelector(e):e}const ku="modulepreload",xu=function(e){return"/"+e},Hr={},Cu=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){let d=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};var a=d;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");r=d(s.map(c=>{if(c=xu(c),c in Hr)return;Hr[c]=!0;const f=c.endsWith(".css"),C=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${C}`))return;const N=document.createElement("link");if(N.rel=f?"stylesheet":ku,f||(N.as="script"),N.crossOrigin="",N.href=c,u&&N.setAttribute("nonce",u),document.head.appendChild(N),f)return new Promise((S,$)=>{N.addEventListener("load",S),N.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return r.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})};class $u{constructor(){this.settings={theme:"dark",language:"zh-CN",autoSave:!0,autoSaveInterval:30,fontSize:14,fontFamily:"Orbitron",apiProviders:{openrouter:{name:"OpenRouter",apiKey:"",isConnected:!1,models:["GPT-5","Claude Sonnet 4","Gemini Pro Preview 2.5","Deepseek V3.1","Deepseek R1"],selectedModel:"GPT-5"}},currentProvider:"openrouter",enableNotifications:!0,enableSounds:!0,dataExport:!1},this.listeners=new Set,this.isInitialized=!1,this.abortControllers={},this.init()}async init(){await this.loadSettings(),this.isInitialized=!0,this.notifyListeners()}addListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){this.listeners.forEach(t=>t(this.settings))}async loadSettings(){try{const{success:t,data:s,error:n}=await window.apiWrapper?.get("/api/settings")||await this.fallbackLoadSettings();if(t&&s)return s&&Object.keys(s).length>0&&(this.settings={...this.settings,...s}),this.notifyListeners(),this.settings}catch(t){console.error("加载设置失败:",t)}return this.settings}async fallbackLoadSettings(){try{const t=await fetch("/api/settings");return t.ok?{success:!0,data:await t.json()}:{success:!1,error:`HTTP ${t.status}: ${t.statusText}`}}catch(t){return{success:!1,error:t.message}}}async saveSettings(t=null){try{const s=t||this.settings,n=await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return n.ok?(t&&(this.settings={...this.settings,...t}),this.notifyListeners(),this.applySettings(),{success:!0,message:"设置保存成功"}):{success:!1,error:(await n.json()).error||"保存失败"}}catch(s){return console.error("保存设置失败:",s),{success:!1,error:s.message}}}async updateSetting(t,s){this.abortControllers[t]&&this.abortControllers[t].abort(),this.abortControllers[t]=new AbortController;try{const n=await fetch(`/api/settings/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:s}),signal:this.abortControllers[t].signal});return n.ok?(Ur(this.settings,t,s),this.notifyListeners(),this.applySettings(),{success:!0,message:"设置更新成功"}):{success:!1,error:(await n.json()).error||"更新失败"}}catch(n){return n.name==="AbortError"?{success:!1,error:"Request cancelled"}:(console.error("更新设置失败:",n),{success:!1,error:n.message})}finally{delete this.abortControllers[t]}}getSetting(t){return Su(this.settings,t)}setSetting(t,s,n=null,r=!0){Ur(this.settings,t,s),r&&this.notifyListeners(),this.applySettings(),n&&n("saving"),this.pendingUpdates[t]={value:s,statusCallback:n},this.debouncedBatchUpdate()}pendingUpdates={};debouncedBatchUpdate=this.debounce(async()=>{const t={...this.pendingUpdates};if(this.pendingUpdates={},Object.keys(t).length===0)return;const s=[],n=[];if(Object.keys(t).forEach(r=>{const i=t[r],a=i.value||i,l=i.statusCallback;if(!this.validateSettingValue(r,a)){console.error(`Invalid setting value for ${r}:`,a),l&&l("error");return}l&&s.push(l),n.push(this.updateSetting(r,a))}),n.length!==0)try{const i=(await Promise.allSettled(n)).some(a=>a.status==="rejected"||a.value&&!a.value.success);s.forEach(a=>{a(i?"error":"saved")}),i||setTimeout(()=>{this.notifyListeners()},150)}catch(r){console.error("批量更新失败:",r),s.forEach(i=>i("error"))}},300);validateSettingValue(t,s){const r={theme:i=>["dark","light","auto"].includes(i),language:i=>["zh-CN","en-US"].includes(i),autoSaveInterval:i=>typeof i=="number"&&i>=10&&i<=300,fontSize:i=>typeof i=="number"&&i>=12&&i<=20,fontFamily:i=>typeof i=="string"&&i.length>0,current_background_light:i=>typeof i=="string",current_background_dark:i=>typeof i=="string",pomodoro_work_duration:i=>typeof i=="number"&&i>=1&&i<=60,pomodoro_short_break_duration:i=>typeof i=="number"&&i>=1&&i<=30,pomodoro_long_break_duration:i=>typeof i=="number"&&i>=1&&i<=60,enable_auto_save:i=>typeof i=="boolean",enable_notifications:i=>typeof i=="boolean",enable_sound:i=>typeof i=="boolean"}[t];return r?r(s):!0}debounce(t,s){let n;return function(...i){const a=()=>{clearTimeout(n),t(...i)};clearTimeout(n),n=setTimeout(a,s)}}applySettings(){this.settings.theme&&(document.documentElement.setAttribute("data-theme",this.settings.theme),document.documentElement.style.setProperty("--theme",this.settings.theme),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:this.settings.theme}}))),this.settings.fontFamily&&(document.documentElement.style.setProperty("--font-family",this.settings.fontFamily),document.body.style.setProperty("font-family",this.settings.fontFamily,"important")),this.settings.fontSize&&(document.documentElement.style.setProperty("--font-size",`${this.settings.fontSize}px`),document.body.style.setProperty("font-size",`${this.settings.fontSize}px`,"important")),this.settings.language&&(document.documentElement.setAttribute("lang",this.settings.language),document.documentElement.setAttribute("data-language",this.settings.language),kn?kn.setLanguage(this.settings.language):Cu(()=>Promise.resolve().then(()=>Gu),void 0).then(t=>{t.default.setLanguage(this.settings.language)}).catch(t=>{console.warn("Failed to load language service:",t)})),this.settings.enableNotifications!==void 0&&document.documentElement.setAttribute("data-notifications",this.settings.enableNotifications),this.settings.enableSounds!==void 0&&document.documentElement.setAttribute("data-sounds",this.settings.enableSounds),window.dispatchEvent(new CustomEvent("settings-changed",{detail:{settings:this.settings}}))}getCurrentProvider(){return this.settings.currentProvider}getApiKey(t){return this.settings.apiProviders[t]?.apiKey||""}getSelectedModel(t){return this.settings.apiProviders[t]?.selectedModel||""}}function Ur(e,t,s){const n=t.split(".");let r=e;for(let i=0;i<n.length-1;i++){const a=n[i];(!(a in r)||typeof r[a]!="object")&&(r[a]={}),r=r[a]}r[n[n.length-1]]=s}function Su(e,t,s=null){const n=t.split(".");let r=e;for(const i of n){if(r==null||typeof r!="object"||!(i in r))return s;r=r[i]}return r}const _e=new $u;let kn=null;try{kn=require("../services/languageService").default}catch{console.warn("LanguageService not available yet")}const Tu={showNotification(e,t="info"){const s=new CustomEvent("setting-notification",{detail:{message:e,type:t}});window.dispatchEvent(s)},showSaveSuccess(){this.showNotification("设置已保存并应用到全局","success")},showSaveError(e){this.showNotification(`设置保存失败: ${e}`,"error")},showSettingChanged(e,t){const n={theme:"主题",language:"语言",fontSize:"字体大小",fontFamily:"字体族",autoSave:"自动保存",enableNotifications:"通知",enableSounds:"声音"}[e]||e;this.showNotification(`${n} 已更新`,"info")}},Mu=_e.applySettings.bind(_e);_e.applySettings=function(){Mu()};const Au=_e.setSetting.bind(_e);_e.setSetting=function(e,t,s=null,n=!0){const r=Au(e,t,s,n);return n&&Tu.showSettingChanged(e,t),r};const Xe=O("dark"),Eu=()=>{const e=_e.getSetting("theme");if(e)Xe.value=e;else{const t=localStorage.getItem("cyber-theme");if(t)Xe.value=t;else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;Xe.value=s?"dark":"light"}}};Eu();function Ro(){const e=()=>{const u=["dark","light","auto"],c=(u.indexOf(Xe.value)+1)%u.length;Xe.value=u[c]},t=u=>{Xe.value=u},s=be(()=>Xe.value==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Xe.value),n=be(()=>s.value==="dark"),r=be(()=>Xe.value),i=be(()=>s.value==="dark"?"theme-dark":"theme-light"),a=be(()=>n.value?{primary:"#bb86fc",secondary:"#9c27b0",accent:"#e1bee7",bg:"#0a0a0f",surface:"#1a1a2e",text:"#e1bee7",border:"#bb86fc",glow:"#bb86fc",gradient:"linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #2d1b69 100%)",cardGradient:"linear-gradient(135deg, rgba(187, 134, 252, 0.1) 0%, rgba(156, 39, 176, 0.05) 100%)",glowShadow:"0 0 20px rgba(187, 134, 252, 0.3)",particleColor1:"rgba(187, 134, 252, 0.3)",particleColor2:"rgba(156, 39, 176, 0.2)",particleColor3:"rgba(225, 190, 231, 0.1)"}:{primary:"#00e5ff",secondary:"#00bcd4",accent:"#4dd0e1",bg:"#f0f8ff",surface:"#e1f5fe",text:"#003d40",border:"#4dd0e1",glow:"#00e5ff",gradient:"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%)",cardGradient:"linear-gradient(135deg, rgba(0, 229, 255, 0.1) 0%, rgba(0, 188, 212, 0.05) 100%)",glowShadow:"0 0 20px rgba(0, 229, 255, 0.3)",particleColor1:"rgba(0, 229, 255, 0.3)",particleColor2:"rgba(0, 188, 212, 0.2)",particleColor3:"rgba(77, 208, 225, 0.1)"});return Re(Xe,u=>{localStorage.setItem("cyber-theme",u),_e.setSetting("theme",u),document.documentElement.classList.remove("theme-light","theme-dark"),document.documentElement.classList.add(s.value==="dark"?"theme-dark":"theme-light");const d=a.value,c=document.documentElement;c.style.setProperty("--theme-primary",d.primary),c.style.setProperty("--theme-secondary",d.secondary),c.style.setProperty("--theme-accent",d.accent),c.style.setProperty("--theme-bg",d.bg),c.style.setProperty("--theme-surface",d.surface),c.style.setProperty("--theme-text",d.text),c.style.setProperty("--theme-border",d.border),c.style.setProperty("--theme-glow",d.glow),c.style.setProperty("--theme-gradient",d.gradient),c.style.setProperty("--theme-card-gradient",d.cardGradient),c.style.setProperty("--theme-glow-shadow",d.glowShadow),c.style.setProperty("--theme-particle-1",d.particleColor1),c.style.setProperty("--theme-particle-2",d.particleColor2),c.style.setProperty("--theme-particle-3",d.particleColor3)},{immediate:!0}),Je(()=>{const u=f=>{if(f.detail?.settings?.theme){const C=f.detail.settings.theme;C!==Xe.value&&(Xe.value=C)}},d=f=>{if(f.detail?.theme){const C=f.detail.theme;C!==Xe.value&&(Xe.value=C)}};window.addEventListener("settings-changed",u),window.addEventListener("theme-change",d);const c=_e.addListener(f=>{f.theme&&f.theme!==Xe.value&&(Xe.value=f.theme)});return()=>{window.removeEventListener("settings-changed",u),window.removeEventListener("theme-change",d),c()}}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",u=>{localStorage.getItem("cyber-theme")||(n.value=u.matches)}),{isDarkMode:n,actualTheme:s,currentTheme:r,themeClass:i,themeColors:a,toggleTheme:e,setTheme:t}}const ju={class:"fixed inset-0 overflow-hidden pointer-events-none",style:{"z-index":"3"}},Pu={class:"absolute inset-0"},Nu={class:"absolute inset-0 opacity-20"},Lu={class:"particles-container"},Iu={class:"light-beams"},Bu={class:"pulse-rings"},Ou={class:"digital-rain"},Du={class:"city-skyline"},zu={class:"neon-lines"},Ru={class:"hologram-container"},Fu={class:"data-streams"},Vu={class:"floating-vehicles"},Hu=Fe({__name:"DynamicBackground",setup(e){const{isDarkMode:t}=Ro(),s=O([]),n=O([]),r=O([]),i=O([]),a=O([]),l=O([]),u=()=>{s.value=Array.from({length:50},($,_)=>({id:_,x:Math.random()*100,y:Math.random()*100,delay:Math.random()*5,duration:3+Math.random()*4}))},d=()=>{const S="01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン";n.value=Array.from({length:20},(_,m)=>({id:m,x:Math.random()*100,char:S[Math.floor(Math.random()*S.length)],delay:Math.random()*10,duration:8+Math.random()*4}))},c=()=>{r.value=Array.from({length:12},($,_)=>{const m=3+Math.floor(Math.random()*5),g=Array.from({length:m},(E,P)=>({id:P,y:20+Math.random()*60,width:60+Math.random()*40,delay:Math.random()*3}));return{id:_,x:_*8+Math.random()*5,width:40+Math.random()*60,height:200+Math.random()*300,delay:Math.random()*2,neonLines:g}})},f=()=>{const $=["◊","△","◯","◢","◣","◤","◥","⬟","⬢","⬡"];i.value=Array.from({length:6},(_,m)=>({id:m,x:Math.random()*80+10,y:Math.random()*60+20,delay:Math.random()*8,duration:6+Math.random()*4,content:$[Math.floor(Math.random()*$.length)]}))},C=()=>{a.value=Array.from({length:8},($,_)=>({id:_,x:Math.random()*100,delay:Math.random()*5,duration:4+Math.random()*3}))},N=()=>{l.value=Array.from({length:4},($,_)=>({id:_,x:Math.random()*120-10,y:30+Math.random()*40,delay:Math.random()*15,duration:20+Math.random()*15}))};return Je(()=>{u(),d(),c(),f(),C(),N(),setInterval(()=>{u()},1e4),setInterval(()=>{d()},15e3),setInterval(()=>{c()},45e3),setInterval(()=>{f()},2e4)}),(S,$)=>(h(),v("div",ju,[o("div",Pu,[o("div",Nu,[o("div",{class:ne(["grid-pattern",{"day-grid":!I(t),"night-grid":I(t)}])},null,2)]),o("div",Lu,[(h(!0),v(de,null,ge(s.value,_=>(h(),v("div",{key:_.id,class:ne(["particle",{"day-particle":!I(t),"night-particle":I(t)}]),style:He({left:_.x+"%",top:_.y+"%",animationDelay:_.delay+"s",animationDuration:_.duration+"s"})},null,6))),128))]),o("div",Iu,[o("div",{class:ne(["beam beam-1",{"day-beam":!I(t),"night-beam":I(t)}])},null,2),o("div",{class:ne(["beam beam-2",{"day-beam":!I(t),"night-beam":I(t)}])},null,2),o("div",{class:ne(["beam beam-3",{"day-beam":!I(t),"night-beam":I(t)}])},null,2)]),o("div",Bu,[o("div",{class:ne(["ring ring-1",{"day-ring":!I(t),"night-ring":I(t)}])},null,2),o("div",{class:ne(["ring ring-2",{"day-ring":!I(t),"night-ring":I(t)}])},null,2),o("div",{class:ne(["ring ring-3",{"day-ring":!I(t),"night-ring":I(t)}])},null,2)]),o("div",Ou,[(h(!0),v(de,null,ge(n.value,_=>(h(),v("div",{key:_.id,class:ne(["rain-drop",{"day-rain":!I(t),"night-rain":I(t)}]),style:He({left:_.x+"%",animationDelay:_.delay+"s",animationDuration:_.duration+"s"})},y(_.char),7))),128))]),o("div",Du,[(h(!0),v(de,null,ge(r.value,_=>(h(),v("div",{key:_.id,class:"building",style:He({left:_.x+"%",width:_.width+"px",height:_.height+"px",animationDelay:_.delay+"s"})},[o("div",zu,[(h(!0),v(de,null,ge(_.neonLines,m=>(h(),v("div",{key:m.id,class:ne(["neon-line",{"day-neon":!I(t),"night-neon":I(t)}]),style:He({top:m.y+"%",width:m.width+"%",left:"50%",transform:"translateX(-50%)",animationDelay:m.delay+"s"})},null,6))),128))])],4))),128))]),o("div",Ru,[(h(!0),v(de,null,ge(i.value,_=>(h(),v("div",{key:_.id,class:ne(["hologram",I(t)?"night-hologram":"day-hologram"]),style:He({left:_.x+"%",top:_.y+"%",animationDelay:_.delay+"s",animationDuration:_.duration+"s"})},y(_.content),7))),128))]),o("div",Fu,[(h(!0),v(de,null,ge(a.value,_=>(h(),v("div",{key:_.id,class:ne(["data-stream",I(t)?"night-stream":"day-stream"]),style:He({left:_.x+"%",animationDelay:_.delay+"s",animationDuration:_.duration+"s"})},null,6))),128))]),o("div",Vu,[(h(!0),v(de,null,ge(l.value,_=>(h(),v("div",{key:_.id,class:ne(["vehicle",I(t)?"night-vehicle":"day-vehicle"]),style:He({top:_.y+"%",animationDelay:_.delay+"s",animationDuration:_.duration+"s"})},null,6))),128))])])]))}}),Oe=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},Uu=Oe(Hu,[["__scopeId","data-v-5460d7de"]]),qu={"zh-CN":{save:"保存",cancel:"取消",delete:"删除",edit:"编辑",create:"创建",search:"搜索",settings:"设置",help:"帮助",loading:"加载中...",processing:"处理中...",success:"成功",error:"错误",warning:"警告",info:"提示",confirm:"确认",close:"关闭",back:"返回",next:"下一步",previous:"上一步",finish:"完成",notes:"智能笔记",todos:"待办事项",audio:"音频分析",settings:"系统设置",ai_assistant:"AI智能助手",workspace:"AI工作空间",future_tech:"未来科技",smart_experience:"智能体验",loading_title:"AI工作空间",loading_subtitle:"未来科技，智能体验",loading_message:"正在加载您的AI助手...",note_title:"笔记标题",note_content:"笔记内容",create_note:"创建新笔记",update_note:"更新笔记",delete_note:"删除笔记",no_notes:"暂无笔记",note_created:"笔记创建成功",note_updated:"笔记更新成功",note_deleted:"笔记删除成功",note_empty:"笔记内容为空",note_placeholder:"开始记录您的想法...",ai_assisted_writing:"AI辅助写作",smart_suggestions:"智能建议",format_text:"格式化文本",todo_title:"待办标题",todo_description:"待办描述",create_todo:"创建新待办",mark_complete:"标记为已完成",mark_incomplete:"标记为未完成",priority:"优先级",category:"分类",due_date:"截止日期",no_todos:"暂无待办事项",todo_created:"待办创建成功",todo_updated:"待办更新成功",todo_deleted:"待办删除成功",high_priority:"高优先级",medium_priority:"中优先级",low_priority:"低优先级",all_categories:"全部分类",work:"工作",personal:"个人",study:"学习",health:"健康",other:"其他",audio_analysis:"音频分析",upload_audio:"上传音频文件",drag_drop_audio:"拖拽音频文件到此处",or_click_to_upload:"或点击上传",supported_formats:"支持格式：MP3, WAV, M4A, FLAC",max_file_size:"最大文件大小：50MB",transcribe_audio:"转录音频",transcript:"转录文本",analyze_content:"分析内容",audio_file:"音频文件",duration:"时长",processing:"处理中",processing_audio:"正在处理音频...",transcription_complete:"转录完成",analysis_complete:"分析完成",download_transcript:"下载转录文本",copy_transcript:"复制转录文本",general_settings:"通用设置",appearance_settings:"外观设置",ai_settings:"AI设置",data_management:"数据管理",language:"语言",theme:"主题",font_size:"字体大小",font_family:"字体族",auto_save:"自动保存",enable_auto_save:"启用自动保存",auto_save_interval:"自动保存间隔（秒）",auto_save_enabled:"自动保存已启用",auto_saving:"正在保存...",auto_saved:"已自动保存",auto_save_error:"保存失败",just_now:"刚刚",minutes_ago:"{0}分钟前",hours_ago:"{0}小时前",notifications:"通知",enable_notifications:"启用桌面通知",sounds:"声音",enable_sounds:"启用提示音",save_settings:"保存设置",reset_settings:"重置设置",settings_saved:"设置已保存",settings_saved_success:"设置保存成功",settings_save_failed:"设置保存失败",settings_reset_success:"设置已重置",reset_options:"重置选项",factory_reset:"恢复出厂设置",reset_to_original_success:"已恢复到保存前的设置",no_original_settings:"没有可恢复的原始设置",confirm_factory_reset:"确定要恢复出厂设置吗？这将清除所有自定义配置，此操作不可撤销！",factory_reset_success:"已恢复出厂设置",factory_reset_failed:"恢复出厂设置失败",general:"通用",appearance:"外观",ai:"AI",data:"数据",dark_theme:"深色主题",light_theme:"浅色主题",auto_theme:"跟随系统",cyberpunk_style:"赛博朋克风格的深色界面",bright_clean_style:"简洁明亮的浅色界面",system_auto_style:"根据系统设置自动切换",orbitron_font:"Orbitron (赛博朋克)",fira_code_font:"Fira Code (编程字体)",system_font:"系统默认",ai_provider:"AI提供商",api_key:"API密钥",model:"模型",connect:"连接",disconnect:"断开连接",test_connection:"测试连接",connection_success:"连接成功",connection_failed:"连接失败",openrouter_provider:"OpenRouter",gpt5_model:"GPT-5 Chat",claude_model:"Claude Sonnet 4",deepseek_model:"Deepseek",gemini_model:"Gemini",provider_description:"支持多种AI模型的统一接口",current_ai:"当前活跃AI",using_provider:"当前使用",set_as_default:"设为默认",export_data:"导出数据",import_data:"导入数据",clear_data:"清除数据",data_exported:"数据已导出",data_cleared:"数据已清除",confirm_clear:"确定要清除所有数据吗？此操作不可恢复！",backup_file:"备份文件",last_export:"最后导出",never_exported:"从未",export_all_data:"导出所有数据",danger_zone:"危险区域",clear_all_data:"清除所有数据",operation_success:"操作成功",operation_failed:"操作失败",loading_data:"正在加载数据...",saving_data:"正在保存数据...",data_loaded:"数据加载完成",data_saved:"数据保存完成",api_key_required:"请先输入API密钥",invalid_input:"输入无效",network_error:"网络错误",server_error:"服务器错误",help_docs:"帮助文档",github_repo:"GitHub仓库",about_app:"关于应用",app_name:"AI智能笔记本",app_version:"版本 1.0.0",app_description:"一个集成了先进AI功能的现代化笔记应用，支持智能写作辅助、智能待办管理和音频内容分析，为您的工作和学习提供全方位的智能支持。",developer:"开发者",tech_stack:"技术栈",license:"许可证",mit_license:"MIT许可证",confirm_delete_note:"确定要删除这条笔记吗？",confirm_delete_todo:"确定要删除这个待办事项吗？",select_audio_file:"请选择音频文件",file_size_limit:"文件大小不能超过50MB",copied_to_clipboard:"已复制到剪贴板",note_deleted_success:"笔记删除成功！",create_note_failed:"创建笔记失败，请检查网络连接",no_matching_notes:"未找到匹配的笔记",create_first_note:"暂无笔记，点击 ➕ 创建第一条笔记",start_writing_placeholder:"开始写作你的想法...",search_notes_placeholder:"搜索笔记...",note_title_placeholder:"输入笔记标题...",start_writing_content_placeholder:"开始写作...",untitled_note:"无标题笔记",smart_search:"智能搜索",ai_helper:"AI助手",life:"生活",project:"项目",dark_theme_cyber:"赛博朋克风格的深色界面",light_theme_clean:"简洁明亮的浅色界面",auto_theme_system:"根据系统设置自动切换",orbitron_font_cyber:"Orbitron (赛博朋克)",fira_code_programming:"Fira Code (编程字体)",system_font_default:"系统默认",openrouter_provider_desc:"支持多种AI模型的统一接口",confirm_clear_data:"确定要清除所有数据吗？此操作不可恢复！",api_connection_success:"API连接成功",api_disconnection_success:"API已断开连接",settings_reset_success:"设置已重置",settings_save_success:"设置保存成功",loading_text:"加载中...",all_categories:"全部分类",pending_todos:"待完成",completed_todos:"已完成",chinese_simplified:"简体中文",english:"English",characters:"字符",start_your_creation:"开始你的创作",select_note_or_create_new:"选择一条笔记开始编辑，或创建全新的内容",total_tasks:"总计任务",pending:"待完成",completed:"已完成",completion_rate:"完成率",create_new_task:"创建新任务",add_your_todos:"添加你的待办事项",enter_task_title:"输入任务标题",add_task_description_optional:"添加任务描述（可选）",add_task:"添加任务",ai_smart_generate:"AI智能生成",ai_smart_assistant:"AI智能助手",let_ai_help_plan_tasks:"让AI帮你规划任务",describe_your_tasks_or_goals:"描述你想要完成的任务或目标",example_prepare_presentation:"例如：为下周的项目演示做准备，包括PPT制作、数据整理等",generating:"生成中",generate_tasks:"生成任务",clear:"清空",ai_generated_todos:"AI生成的待办事项",all_categories:"所有分类",no_tasks:"暂无任务",add_new_todo_start_manage:"添加一个新的待办事项开始管理你的任务",create_first_task:"创建第一个任务",delete_task:"删除任务",start_focus_session:"开始专注",create_todo_failed:"创建待办事项失败，请重试",ai_generation_failed:"AI生成待办事项失败，请重试",add_todo_failed:"添加待办事项失败，请重试",update_todo_failed:"更新待办事项失败，请重试",delete_todo_failed:"删除待办事项失败，请重试",confirm_delete_todo:"确定要删除这个待办事项吗？",system_settings:"系统设置",configure_ai_notebook:"配置您的AI笔记本",language_region:"语言和地区",interface_language:"界面语言",auto_save:"自动保存",enable_auto_save:"启用自动保存",auto_save_interval_seconds:"自动保存间隔（秒）",notification_settings:"通知设置",enable_desktop_notifications:"启用桌面通知",enable_sound_effects:"启用提示音",theme_selection:"主题选择",font_settings:"字体设置",font_family:"字体族",font_size_px:"字体大小: {size}px",api_key:"API密钥",enter_api_key_placeholder:"请输入{provider}的API密钥",ai_model:"AI模型",connect_api:"连接API",disconnect_api:"断开连接",currently_using:"当前使用",set_as_default:"设为默认",current_active_ai:"当前活跃AI",model_colon:"模型: {model}",data_export:"数据导出",export_all_data_info:"导出您的所有数据，包括笔记、待办事项和设置配置。数据将以JSON格式保存，便于备份和迁移。",export_data_btn:"导出数据",last_export_never:"最后导出: 从未",danger_zone:"危险区域",clear_all_data_warning:"此操作将永久删除您的所有笔记、待办事项、音频分析记录和设置配置。此操作无法撤销，请谨慎操作。",clear_all_data_btn:"清除所有数据",ai_smart_notebook:"AI智能笔记本",version:"版本",app_description_full:"一个集成了先进AI功能的现代化笔记应用，支持智能写作辅助、智能待办管理和音频内容分析，为您的工作和学习提供全方位的智能支持。",developer:"开发者",tech_stack:"技术栈",license:"许可证",help_docs:"帮助文档",github_repo:"GitHub仓库",settings_reset:"重置设置",settings_save:"保存设置",loading_failed:"加载设置失败",saving_failed:"保存设置失败",resetting_failed:"重置设置失败",data_export_failed:"数据导出失败",data_clear_failed:"数据清除失败",api_key_required_first:"请先输入API密钥",api_test_failed:"API测试失败",connected:"已连接",disconnected:"未连接",connecting:"连接中...",resetting:"重置中...",saving:"保存中...",confirm_delete_background:"确定要删除这个背景文件吗？",background_delete_success:"背景文件删除成功",background_delete_failed:"删除背景文件失败",background_save_success:"背景设置保存成功",background_save_failed:"保存背景设置失败",file_upload_failed:"文件上传失败",delete_failed:"删除失败",save_failed:"保存失败"},"en-US":{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",search:"Search",settings:"Settings",help:"Help",loading:"Loading...",processing:"Processing...",success:"Success",error:"Error",warning:"Warning",info:"Info",confirm:"Confirm",close:"Close",back:"Back",next:"Next",previous:"Previous",finish:"Finish",notes:"Smart Notes",todos:"Todo List",audio:"Audio Analysis",settings:"System Settings",ai_assistant:"AI Smart Assistant",workspace:"AI Workspace",future_tech:"Future Technology",smart_experience:"Smart Experience",loading_title:"AI Workspace",loading_subtitle:"Future Technology, Smart Experience",loading_message:"Loading your AI assistant...",note_title:"Note Title",note_content:"Note Content",create_note:"Create New Note",update_note:"Update Note",delete_note:"Delete Note",no_notes:"No notes yet",note_created:"Note created successfully",note_updated:"Note updated successfully",note_deleted:"Note deleted successfully",note_empty:"Note content is empty",note_placeholder:"Start recording your thoughts...",ai_assisted_writing:"AI-Assisted Writing",smart_suggestions:"Smart Suggestions",format_text:"Format Text",todo_title:"Todo Title",todo_description:"Todo Description",create_todo:"Create New Todo",mark_complete:"Mark as Complete",mark_incomplete:"Mark as Incomplete",priority:"Priority",category:"Category",due_date:"Due Date",no_todos:"No todos yet",todo_created:"Todo created successfully",todo_updated:"Todo updated successfully",todo_deleted:"Todo deleted successfully",high_priority:"High Priority",medium_priority:"Medium Priority",low_priority:"Low Priority",all_categories:"All Categories",work:"Work",personal:"Personal",study:"Study",health:"Health",other:"Other",audio_analysis:"Audio Analysis",upload_audio:"Upload Audio File",drag_drop_audio:"Drag and drop audio files here",or_click_to_upload:"or click to upload",supported_formats:"Supported formats: MP3, WAV, M4A, FLAC",max_file_size:"Max file size: 50MB",transcribe_audio:"Transcribe Audio",transcript:"Transcript",analyze_content:"Analyze Content",audio_file:"Audio File",duration:"Duration",processing:"Processing",processing_audio:"Processing audio...",transcription_complete:"Transcription complete",analysis_complete:"Analysis complete",download_transcript:"Download transcript",copy_transcript:"Copy transcript","audio.results.transcription.title":"Transcription Results","audio.results.transcription.filename":"transcription","audio.results.analysis.title":"AI Analysis Results","audio.results.analysis.subtitle":"AI-powered insights from your audio content","audio.results.analysis.filename":"analysis_report","audio.results.summary.title":"Summary","audio.results.keywords.title":"Keywords","audio.results.actionItems.title":"Action Items","audio.results.actionItems.addToTodo":"Add to Todo","audio.results.actionItems.category":"AI Generated","audio.results.sentiment.title":"Sentiment Analysis","audio.results.sentiment.positive":"Positive","audio.results.sentiment.negative":"Negative","audio.results.sentiment.neutral":"Neutral","audio.results.sentiment.mixed":"Mixed","audio.results.sentiment.unknown":"Unknown","audio.results.meetingNotes.title":"Meeting Notes","audio.results.meetingNotes.saveAsNote":"Save as Note","audio.results.meetingNotes.saveSuccess":"Meeting notes saved successfully!","audio.results.meetingNotes.saveFailed":"Failed to save meeting notes","audio.results.actions.title":"Actions","audio.results.actions.subtitle":"Export, share, or start a new analysis","audio.results.actions.downloadTranscription":"Download Transcript","audio.results.actions.downloadAnalysis":"Download Analysis","audio.results.actions.shareResults":"Share Results","audio.results.actions.newAnalysis":"New Analysis","audio.results.share.title":"Audio Analysis","audio.results.share.summary":"Summary","audio.results.share.keywords":"Keywords","audio.results.share.shareTitle":"Audio Analysis Results","audio.results.note.title":"Audio Analysis","audio.results.note.category":"Audio Analysis","audio.results.note.transcription":"Transcription","audio.results.note.summary":"Summary","audio.results.note.keywords":"Keywords","audio.results.note.actionItems":"Action Items","audio.results.note.sentiment":"Sentiment","audio.results.note.meetingNotes":"Meeting Notes","audio.processing.title":"Processing Audio","audio.processing.subtitle":"Please wait while we analyze your audio","audio.processing.steps.upload.title":"Uploading","audio.processing.steps.upload.description":"Uploading audio file to server","audio.processing.steps.transcription.title":"Transcription","audio.processing.steps.transcription.description":"Converting speech to text","audio.processing.steps.analysis.title":"Analysis","audio.processing.steps.analysis.description":"Analyzing content with AI","audio.processing.steps.report.title":"Report","audio.processing.steps.report.description":"Generating comprehensive report","audio.validation.invalidFileType":"Please select a valid audio file","audio.validation.fileSizeLimit":"File size cannot exceed 50MB","audio.errors.uploadFailed":"Failed to upload audio file","audio.errors.transcriptionFailed":"Failed to transcribe audio","audio.errors.analysisFailed":"Failed to analyze audio","audio.errors.analysisFailedWithMessage":"Analysis failed: {message}","audio.history.title":"Analysis History","audio.history.deleteConfirm":"Are you sure you want to delete this analysis?","audio.history.deleteFailed":"Failed to delete analysis","audio.history.empty.title":"No Analysis History","audio.history.empty.subtitle":"Upload and analyze your first audio file to see it here","audio.analysis.workflow.title":"Audio Analysis Workflow","audio.analysis.workflow.subtitle":"Upload, transcribe, and analyze audio content with AI","audio.upload.drag.title":"Drag & Drop Audio Files","audio.upload.drag.subtitle":"Supports MP3, WAV, M4A, FLAC - Max 50MB","audio.upload.selectFile":"Select File","audio.upload.clear":"Clear",general_settings:"General Settings",appearance_settings:"Appearance Settings",ai_settings:"AI Settings",data_management:"Data Management",language:"Language",theme:"Theme",font_size:"Font Size",font_family:"Font Family",auto_save:"Auto Save",enable_auto_save:"Enable Auto Save",auto_save_interval:"Auto Save Interval (seconds)",auto_save_enabled:"Auto Save Enabled",auto_saving:"Saving...",auto_saved:"Auto Saved",auto_save_error:"Save Failed",just_now:"Just now",minutes_ago:"{0} minutes ago",hours_ago:"{0} hours ago",notifications:"Notifications",enable_notifications:"Enable Desktop Notifications",sounds:"Sounds",enable_sounds:"Enable Sound Effects",save_settings:"Save Settings",reset_settings:"Reset Settings",settings_saved:"Settings saved",settings_saved_success:"Settings saved successfully",settings_save_failed:"Failed to save settings",settings_reset:"Settings reset",reset_options:"Reset Options",factory_reset:"Factory Reset",reset_to_original_success:"Settings restored to pre-save state",no_original_settings:"No original settings to restore",confirm_factory_reset:"Are you sure you want to restore factory settings? This will clear all custom configurations and cannot be undone!",factory_reset_success:"Factory settings restored successfully",factory_reset_failed:"Failed to restore factory settings",general:"General",appearance:"Appearance",ai:"AI",data:"Data",dark_theme:"Dark Theme",light_theme:"Light Theme",auto_theme:"Auto System",cyberpunk_style:"Cyberpunk-style dark interface",bright_clean_style:"Bright and clean light interface",system_auto_style:"Automatically switch based on system settings",orbitron_font:"Orbitron (Cyberpunk)",fira_code_font:"Fira Code (Programming Font)",system_font:"System Default",ai_provider:"AI Provider",api_key:"API Key",model:"Model",connect:"Connect",disconnect:"Disconnect",test_connection:"Test Connection",connection_success:"Connection successful",connection_failed:"Connection failed",openrouter_provider:"OpenRouter",gpt5_model:"GPT-5 Chat",claude_model:"Claude Sonnet 4",deepseek_model:"Deepseek",gemini_model:"Gemini",provider_description:"Unified interface supporting multiple AI models",current_ai:"Current Active AI",using_provider:"Currently Using",set_as_default:"Set as Default",export_data:"Export Data",import_data:"Import Data",clear_data:"Clear Data",data_exported:"Data exported",data_cleared:"Data cleared",confirm_clear:"Are you sure you want to clear all data? This cannot be undone!",backup_file:"Backup File",last_export:"Last Export",never_exported:"Never",export_all_data:"Export All Data",danger_zone:"Danger Zone",clear_all_data:"Clear All Data",operation_success:"Operation successful",operation_failed:"Operation failed",loading_data:"Loading data...",saving_data:"Saving data...",data_loaded:"Data loaded",data_saved:"Data saved",api_key_required:"Please enter API key first",invalid_input:"Invalid input",network_error:"Network error",server_error:"Server error",help_docs:"Help Documentation",github_repo:"GitHub Repository",about_app:"About App",app_name:"AI Smart Notebook",app_version:"Version 1.0.0",app_description:"A modern note-taking app with advanced AI capabilities, supporting intelligent writing assistance, smart todo management, and audio content analysis, providing comprehensive intelligent support for your work and study.",developer:"Developer",tech_stack:"Tech Stack",license:"License",mit_license:"MIT License",dark_theme_cyber:"Cyberpunk-style dark interface",light_theme_clean:"Bright and clean light interface",auto_theme_system:"Automatically switch based on system settings",orbitron_font_cyber:"Orbitron (Cyberpunk)",fira_code_programming:"Fira Code (Programming Font)",system_font_default:"System Default",openrouter_provider_desc:"Unified interface supporting multiple AI models","audio.results.transcription.title":"Transcription Results","audio.results.transcription.filename":"transcription","audio.results.analysis.title":"AI Analysis Results","audio.results.analysis.subtitle":"AI-powered insights from your audio content","audio.results.analysis.filename":"analysis_report","audio.results.summary.title":"Summary","audio.results.keywords.title":"Keywords","audio.results.actionItems.title":"Action Items","audio.results.actionItems.addToTodo":"Add to Todo","audio.results.actionItems.category":"AI Generated","audio.results.sentiment.title":"Sentiment Analysis","audio.results.sentiment.positive":"Positive","audio.results.sentiment.negative":"Negative","audio.results.sentiment.neutral":"Neutral","audio.results.sentiment.mixed":"Mixed","audio.results.sentiment.unknown":"Unknown","audio.results.meetingNotes.title":"Meeting Notes","audio.results.meetingNotes.saveAsNote":"Save as Note","audio.results.meetingNotes.saveSuccess":"Meeting notes saved successfully!","audio.results.meetingNotes.saveFailed":"Failed to save meeting notes","audio.results.actions.title":"Actions","audio.results.actions.subtitle":"Export, share, or start a new analysis","audio.results.actions.downloadTranscription":"Download Transcript","audio.results.actions.downloadAnalysis":"Download Analysis","audio.results.actions.shareResults":"Share Results","audio.results.actions.newAnalysis":"New Analysis","audio.results.share.title":"Audio Analysis","audio.results.share.summary":"Summary","audio.results.share.keywords":"Keywords","audio.results.share.shareTitle":"Audio Analysis Results","audio.results.note.title":"Audio Analysis","audio.results.note.category":"Audio Analysis","audio.results.note.transcription":"Transcription","audio.results.note.summary":"Summary","audio.results.note.keywords":"Keywords","audio.results.note.actionItems":"Action Items","audio.results.note.sentiment":"Sentiment","audio.results.note.meetingNotes":"Meeting Notes","audio.processing.title":"Processing Audio","audio.processing.subtitle":"Please wait while we analyze your audio","audio.processing.steps.upload.title":"Uploading","audio.processing.steps.upload.description":"Uploading audio file to server","audio.processing.steps.transcription.title":"Transcription","audio.processing.steps.transcription.description":"Converting speech to text","audio.processing.steps.analysis.title":"Analysis","audio.processing.steps.analysis.description":"Analyzing content with AI","audio.processing.steps.report.title":"Report","audio.processing.steps.report.description":"Generating comprehensive report","audio.validation.invalidFileType":"Please select a valid audio file","audio.validation.fileSizeLimit":"File size cannot exceed 50MB","audio.errors.uploadFailed":"Failed to upload audio file","audio.errors.transcriptionFailed":"Failed to transcribe audio","audio.errors.analysisFailed":"Failed to analyze audio","audio.errors.analysisFailedWithMessage":"Analysis failed: {message}","audio.history.title":"Analysis History","audio.history.deleteConfirm":"Are you sure you want to delete this analysis?","audio.history.deleteFailed":"Failed to delete analysis","audio.history.empty.title":"No Analysis History","audio.history.empty.subtitle":"Upload and analyze your first audio file to see it here","audio.analysis.workflow.title":"Audio Analysis Workflow","audio.analysis.workflow.subtitle":"Upload, transcribe, and analyze audio content with AI","audio.upload.drag.title":"Drag & Drop Audio Files","audio.upload.drag.subtitle":"Supports MP3, WAV, M4A, FLAC - Max 50MB","audio.upload.selectFile":"Select File","audio.upload.clear":"Clear",confirm_delete_note:"Are you sure you want to delete this note?",confirm_delete_todo:"Are you sure you want to delete this todo item?",select_audio_file:"Please select an audio file",file_size_limit:"File size cannot exceed 50MB",copied_to_clipboard:"Copied to clipboard",note_deleted_success:"Note deleted successfully!",create_note_failed:"Failed to create note, please check network connection",no_matching_notes:"No matching notes found",create_first_note:"No notes yet, click ➕ to create your first note",start_writing_placeholder:"Start writing your thoughts...",search_notes_placeholder:"Search notes...",note_title_placeholder:"Enter note title...",start_writing_content_placeholder:"Start writing...",untitled_note:"Untitled Note",smart_search:"Smart Search",ai_helper:"AI Helper",life:"Life",project:"Project",characters:"characters",start_your_creation:"Start Your Creation",select_note_or_create_new:"Select a note to start editing, or create new content",total_tasks:"Total Tasks",pending:"Pending",completed:"Completed",completion_rate:"Completion Rate",create_new_task:"Create New Task",add_your_todos:"Add Your Todos",enter_task_title:"Enter Task Title",add_task_description_optional:"Add Task Description (Optional)",add_task:"Add Task",ai_smart_generate:"AI Smart Generate",ai_smart_assistant:"AI Smart Assistant",let_ai_help_plan_tasks:"Let AI Help Plan Tasks",describe_your_tasks_or_goals:"Describe the tasks or goals you want to complete",example_prepare_presentation:"Example: Prepare for next week's project presentation, including PPT creation and data organization",generating:"Generating",generate_tasks:"Generate Tasks",clear:"Clear",ai_generated_todos:"AI Generated Todos",all_categories:"All Categories",no_tasks:"No Tasks",add_new_todo_start_manage:"Add a new todo to start managing your tasks",create_first_task:"Create First Task",delete_task:"Delete Task",start_focus_session:"Start Focus",create_todo_failed:"Failed to create todo, please try again",ai_generation_failed:"AI failed to generate todos, please try again",add_todo_failed:"Failed to add todo, please try again",update_todo_failed:"Failed to update todo, please try again",delete_todo_failed:"Failed to delete todo, please try again",confirm_delete_todo:"Are you sure you want to delete this todo item?",chinese_simplified:"简体中文",english:"English",confirm_delete_background:"Are you sure you want to delete this background file?",background_delete_success:"Background file deleted successfully",background_delete_failed:"Failed to delete background file",background_save_success:"Background settings saved successfully",background_save_failed:"Failed to save background settings",file_upload_failed:"File upload failed",delete_failed:"Delete failed",save_failed:"Save failed"}};class Ku{constructor(){this.currentLanguage="zh-CN",this.translations=qu,this.listeners=new Set,this.init()}init(){const t=localStorage.getItem("app-language")||"zh-CN";this.setLanguage(t)}setLanguage(t){this.translations[t]||(console.warn(`Language ${t} not found, using zh-CN`),t="zh-CN"),this.currentLanguage=t,localStorage.setItem("app-language",t),document.documentElement.setAttribute("lang",t),document.documentElement.setAttribute("data-language",t),this.notifyListeners()}getLanguage(){return this.currentLanguage}t(t,s=t){return this.translations[this.currentLanguage][t]||s}addListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){this.listeners.forEach(t=>t(this.currentLanguage))}getAvailableLanguages(){return[{value:"zh-CN",label:"简体中文"},{value:"en-US",label:"English"}]}}const x=new Ku,Wu=(e,t)=>x.t(e,t),Gu=Object.freeze(Object.defineProperty({__proto__:null,default:x,t:Wu},Symbol.toStringTag,{value:"Module"})),Ju={class:"flex items-center space-x-2 bg-black/20 backdrop-blur-md rounded-xl p-2"},Xu=["onClick","title"],Yu=["innerHTML"],Zu={key:0,class:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full animate-pulse",style:{background:"linear-gradient(90deg, var(--theme-primary), var(--theme-secondary))"}},Qu=Fe({__name:"TopNavigation",props:{currentView:{}},emits:["set-view"],setup(e,{emit:t}){const s=t,n=be(()=>[{id:"notes",label:x.t("notes"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',shortcut:"Ctrl+1"},{id:"todos",label:x.t("todos"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>',shortcut:"Ctrl+2"},{id:"projects",label:"项目管理",icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>',shortcut:"Ctrl+3"},{id:"ai",label:x.t("ai_assistant"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>',shortcut:"Ctrl+4"},{id:"pomodoro",label:"番茄时钟",icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',shortcut:"Ctrl+5"},{id:"settings",label:x.t("settings"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',shortcut:"Ctrl+6"}]),r=i=>{s("set-view",i)};return(i,a)=>(h(),v("div",Ju,[(h(!0),v(de,null,ge(n.value,l=>(h(),v("button",{key:l.id,onClick:u=>r(l.id),class:ne(["relative flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-300 group",i.currentView===l.id?"futuristic-btn-active scale-110":"futuristic-btn-secondary hover:scale-105"]),title:l.label+" ("+l.shortcut+")"},[o("div",{class:"text-lg group-hover:scale-110 transition-transform duration-300",innerHTML:l.icon},null,8,Yu),i.currentView===l.id?(h(),v("div",Zu)):G("",!0)],10,Xu))),128))]))}}),ed=Oe(Qu,[["__scopeId","data-v-c6d9e6f1"]]);function ba(e,t){return function(){return e.apply(t,arguments)}}const{toString:td}=Object.prototype,{getPrototypeOf:Wn}=Object,{iterator:Fo,toStringTag:wa}=Symbol,Vo=(e=>t=>{const s=td.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),wt=e=>(e=e.toLowerCase(),t=>Vo(t)===e),Ho=e=>t=>typeof t===e,{isArray:Cs}=Array,Ws=Ho("undefined");function Ys(e){return e!==null&&!Ws(e)&&e.constructor!==null&&!Ws(e.constructor)&&ct(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ka=wt("ArrayBuffer");function sd(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ka(e.buffer),t}const od=Ho("string"),ct=Ho("function"),xa=Ho("number"),Zs=e=>e!==null&&typeof e=="object",nd=e=>e===!0||e===!1,vo=e=>{if(Vo(e)!=="object")return!1;const t=Wn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wa in e)&&!(Fo in e)},rd=e=>{if(!Zs(e)||Ys(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},id=wt("Date"),ad=wt("File"),ld=wt("Blob"),cd=wt("FileList"),ud=e=>Zs(e)&&ct(e.pipe),dd=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ct(e.append)&&((t=Vo(e))==="formdata"||t==="object"&&ct(e.toString)&&e.toString()==="[object FormData]"))},fd=wt("URLSearchParams"),[pd,hd,vd,md]=["ReadableStream","Request","Response","Headers"].map(wt),gd=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qs(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),Cs(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Ys(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let l;for(n=0;n<a;n++)l=i[n],t.call(null,e[l],l,e)}}function Ca(e,t){if(Ys(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,r;for(;n-- >0;)if(r=s[n],t===r.toLowerCase())return r;return null}const ls=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$a=e=>!Ws(e)&&e!==ls;function xn(){const{caseless:e}=$a(this)&&this||{},t={},s=(n,r)=>{const i=e&&Ca(t,r)||r;vo(t[i])&&vo(n)?t[i]=xn(t[i],n):vo(n)?t[i]=xn({},n):Cs(n)?t[i]=n.slice():t[i]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Qs(arguments[n],s);return t}const yd=(e,t,s,{allOwnKeys:n}={})=>(Qs(t,(r,i)=>{s&&ct(r)?e[i]=ba(r,s):e[i]=r},{allOwnKeys:n}),e),_d=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),bd=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},wd=(e,t,s,n)=>{let r,i,a;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],(!n||n(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=s!==!1&&Wn(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kd=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},xd=e=>{if(!e)return null;if(Cs(e))return e;let t=e.length;if(!xa(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Cd=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Wn(Uint8Array)),$d=(e,t)=>{const n=(e&&e[Fo]).call(e);let r;for(;(r=n.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Sd=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},Td=wt("HTMLFormElement"),Md=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),qr=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Ad=wt("RegExp"),Sa=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Qs(s,(r,i)=>{let a;(a=t(r,i,e))!==!1&&(n[i]=a||r)}),Object.defineProperties(e,n)},Ed=e=>{Sa(e,(t,s)=>{if(ct(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(ct(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},jd=(e,t)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return Cs(e)?n(e):n(String(e).split(t)),s},Pd=()=>{},Nd=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ld(e){return!!(e&&ct(e.append)&&e[wa]==="FormData"&&e[Fo])}const Id=e=>{const t=new Array(10),s=(n,r)=>{if(Zs(n)){if(t.indexOf(n)>=0)return;if(Ys(n))return n;if(!("toJSON"in n)){t[r]=n;const i=Cs(n)?[]:{};return Qs(n,(a,l)=>{const u=s(a,r+1);!Ws(u)&&(i[l]=u)}),t[r]=void 0,i}}return n};return s(e,0)},Bd=wt("AsyncFunction"),Od=e=>e&&(Zs(e)||ct(e))&&ct(e.then)&&ct(e.catch),Ta=((e,t)=>e?setImmediate:t?((s,n)=>(ls.addEventListener("message",({source:r,data:i})=>{r===ls&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),ls.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ct(ls.postMessage)),Dd=typeof queueMicrotask<"u"?queueMicrotask.bind(ls):typeof process<"u"&&process.nextTick||Ta,zd=e=>e!=null&&ct(e[Fo]),D={isArray:Cs,isArrayBuffer:ka,isBuffer:Ys,isFormData:dd,isArrayBufferView:sd,isString:od,isNumber:xa,isBoolean:nd,isObject:Zs,isPlainObject:vo,isEmptyObject:rd,isReadableStream:pd,isRequest:hd,isResponse:vd,isHeaders:md,isUndefined:Ws,isDate:id,isFile:ad,isBlob:ld,isRegExp:Ad,isFunction:ct,isStream:ud,isURLSearchParams:fd,isTypedArray:Cd,isFileList:cd,forEach:Qs,merge:xn,extend:yd,trim:gd,stripBOM:_d,inherits:bd,toFlatObject:wd,kindOf:Vo,kindOfTest:wt,endsWith:kd,toArray:xd,forEachEntry:$d,matchAll:Sd,isHTMLForm:Td,hasOwnProperty:qr,hasOwnProp:qr,reduceDescriptors:Sa,freezeMethods:Ed,toObjectSet:jd,toCamelCase:Md,noop:Pd,toFiniteNumber:Nd,findKey:Ca,global:ls,isContextDefined:$a,isSpecCompliantForm:Ld,toJSONObject:Id,isAsyncFn:Bd,isThenable:Od,setImmediate:Ta,asap:Dd,isIterable:zd};function we(e,t,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Ma=we.prototype,Aa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Aa[e]={value:e}});Object.defineProperties(we,Aa);Object.defineProperty(Ma,"isAxiosError",{value:!0});we.from=(e,t,s,n,r,i)=>{const a=Object.create(Ma);return D.toFlatObject(e,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),we.call(a,e.message,t,s,n,r),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Rd=null;function Cn(e){return D.isPlainObject(e)||D.isArray(e)}function Ea(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Kr(e,t,s){return e?e.concat(t).map(function(r,i){return r=Ea(r),!s&&i?"["+r+"]":r}).join(s?".":""):t}function Fd(e){return D.isArray(e)&&!e.some(Cn)}const Vd=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Uo(e,t,s){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=D.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,_){return!D.isUndefined(_[$])});const n=s.metaTokens,r=s.visitor||c,i=s.dots,a=s.indexes,u=(s.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function d(S){if(S===null)return"";if(D.isDate(S))return S.toISOString();if(D.isBoolean(S))return S.toString();if(!u&&D.isBlob(S))throw new we("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(S)||D.isTypedArray(S)?u&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function c(S,$,_){let m=S;if(S&&!_&&typeof S=="object"){if(D.endsWith($,"{}"))$=n?$:$.slice(0,-2),S=JSON.stringify(S);else if(D.isArray(S)&&Fd(S)||(D.isFileList(S)||D.endsWith($,"[]"))&&(m=D.toArray(S)))return $=Ea($),m.forEach(function(E,P){!(D.isUndefined(E)||E===null)&&t.append(a===!0?Kr([$],P,i):a===null?$:$+"[]",d(E))}),!1}return Cn(S)?!0:(t.append(Kr(_,$,i),d(S)),!1)}const f=[],C=Object.assign(Vd,{defaultVisitor:c,convertValue:d,isVisitable:Cn});function N(S,$){if(!D.isUndefined(S)){if(f.indexOf(S)!==-1)throw Error("Circular reference detected in "+$.join("."));f.push(S),D.forEach(S,function(m,g){(!(D.isUndefined(m)||m===null)&&r.call(t,m,D.isString(g)?g.trim():g,$,C))===!0&&N(m,$?$.concat(g):[g])}),f.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return N(e),t}function Wr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Gn(e,t){this._pairs=[],e&&Uo(e,this,t)}const ja=Gn.prototype;ja.append=function(t,s){this._pairs.push([t,s])};ja.toString=function(t){const s=t?function(n){return t.call(this,n,Wr)}:Wr;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Hd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pa(e,t,s){if(!t)return e;const n=s&&s.encode||Hd;D.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(t,s):i=D.isURLSearchParams(t)?t.toString():new Gn(t,s).toString(n),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Gr{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Na={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ud=typeof URLSearchParams<"u"?URLSearchParams:Gn,qd=typeof FormData<"u"?FormData:null,Kd=typeof Blob<"u"?Blob:null,Wd={isBrowser:!0,classes:{URLSearchParams:Ud,FormData:qd,Blob:Kd},protocols:["http","https","file","blob","url","data"]},Jn=typeof window<"u"&&typeof document<"u",$n=typeof navigator=="object"&&navigator||void 0,Gd=Jn&&(!$n||["ReactNative","NativeScript","NS"].indexOf($n.product)<0),Jd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xd=Jn&&window.location.href||"http://localhost",Yd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jn,hasStandardBrowserEnv:Gd,hasStandardBrowserWebWorkerEnv:Jd,navigator:$n,origin:Xd},Symbol.toStringTag,{value:"Module"})),Qe={...Yd,...Wd};function Zd(e,t){return Uo(e,new Qe.classes.URLSearchParams,{visitor:function(s,n,r,i){return Qe.isNode&&D.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Qd(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function e1(e){const t={},s=Object.keys(e);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],t[i]=e[i];return t}function La(e){function t(s,n,r,i){let a=s[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=i>=s.length;return a=!a&&D.isArray(r)?r.length:a,u?(D.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!l):((!r[a]||!D.isObject(r[a]))&&(r[a]=[]),t(s,n,r[a],i)&&D.isArray(r[a])&&(r[a]=e1(r[a])),!l)}if(D.isFormData(e)&&D.isFunction(e.entries)){const s={};return D.forEachEntry(e,(n,r)=>{t(Qd(n),r,s,0)}),s}return null}function t1(e,t,s){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const eo={transitional:Na,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=D.isObject(t);if(i&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(La(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Zd(t,this.formSerializer).toString();if((l=D.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Uo(l?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),t1(t)):t}],transformResponse:[function(t){const s=this.transitional||eo.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(n&&!this.responseType||r)){const a=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?we.from(l,we.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{eo.headers[e]={}});const s1=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),o1=e=>{const t={};let s,n,r;return e&&e.split(`
`).forEach(function(a){r=a.indexOf(":"),s=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!s||t[s]&&s1[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},Jr=Symbol("internals");function As(e){return e&&String(e).trim().toLowerCase()}function mo(e){return e===!1||e==null?e:D.isArray(e)?e.map(mo):String(e)}function n1(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const r1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function nn(e,t,s,n,r){if(D.isFunction(n))return n.call(this,t,s);if(r&&(t=s),!!D.isString(t)){if(D.isString(n))return t.indexOf(n)!==-1;if(D.isRegExp(n))return n.test(t)}}function i1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function a1(e,t){const s=D.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(r,i,a){return this[n].call(this,t,r,i,a)},configurable:!0})})}let ut=class{constructor(t){t&&this.set(t)}set(t,s,n){const r=this;function i(l,u,d){const c=As(u);if(!c)throw new Error("header name must be a non-empty string");const f=D.findKey(r,c);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||u]=mo(l))}const a=(l,u)=>D.forEach(l,(d,c)=>i(d,c,u));if(D.isPlainObject(t)||t instanceof this.constructor)a(t,s);else if(D.isString(t)&&(t=t.trim())&&!r1(t))a(o1(t),s);else if(D.isObject(t)&&D.isIterable(t)){let l={},u,d;for(const c of t){if(!D.isArray(c))throw TypeError("Object iterator must return a key-value pair");l[d=c[0]]=(u=l[d])?D.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}a(l,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=As(t),t){const n=D.findKey(this,t);if(n){const r=this[n];if(!s)return r;if(s===!0)return n1(r);if(D.isFunction(s))return s.call(this,r,n);if(D.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=As(t),t){const n=D.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||nn(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let r=!1;function i(a){if(a=As(a),a){const l=D.findKey(n,a);l&&(!s||nn(n,n[l],l,s))&&(delete n[l],r=!0)}}return D.isArray(t)?t.forEach(i):i(t),r}clear(t){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!t||nn(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const s=this,n={};return D.forEach(this,(r,i)=>{const a=D.findKey(n,i);if(a){s[a]=mo(r),delete s[i];return}const l=t?i1(i):String(i).trim();l!==i&&delete s[i],s[l]=mo(r),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return D.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=t&&D.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[Jr]=this[Jr]={accessors:{}}).accessors,r=this.prototype;function i(a){const l=As(a);n[l]||(a1(r,a),n[l]=!0)}return D.isArray(t)?t.forEach(i):i(t),this}};ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(ut.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});D.freezeMethods(ut);function rn(e,t){const s=this||eo,n=t||s,r=ut.from(n.headers);let i=n.data;return D.forEach(e,function(l){i=l.call(s,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Ia(e){return!!(e&&e.__CANCEL__)}function $s(e,t,s){we.call(this,e??"canceled",we.ERR_CANCELED,t,s),this.name="CanceledError"}D.inherits($s,we,{__CANCEL__:!0});function Ba(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new we("Request failed with status code "+s.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function l1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function c1(e,t){e=e||10;const s=new Array(e),n=new Array(e);let r=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const d=Date.now(),c=n[i];a||(a=d),s[r]=u,n[r]=d;let f=i,C=0;for(;f!==r;)C+=s[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-a<t)return;const N=c&&d-c;return N?Math.round(C*1e3/N):void 0}}function u1(e,t){let s=0,n=1e3/t,r,i;const a=(d,c=Date.now())=>{s=c,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const c=Date.now(),f=c-s;f>=n?a(d,c):(r=d,i||(i=setTimeout(()=>{i=null,a(r)},n-f)))},()=>r&&a(r)]}const So=(e,t,s=3)=>{let n=0;const r=c1(50,250);return u1(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,u=a-n,d=r(u),c=a<=l;n=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&c?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},s)},Xr=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Yr=e=>(...t)=>D.asap(()=>e(...t)),d1=Qe.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Qe.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,f1=Qe.hasStandardBrowserEnv?{write(e,t,s,n,r,i){const a=[e+"="+encodeURIComponent(t)];D.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),D.isString(n)&&a.push("path="+n),D.isString(r)&&a.push("domain="+r),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function h1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Oa(e,t,s){let n=!p1(t);return e&&(n||s==!1)?h1(e,t):t}const Zr=e=>e instanceof ut?{...e}:e;function ps(e,t){t=t||{};const s={};function n(d,c,f,C){return D.isPlainObject(d)&&D.isPlainObject(c)?D.merge.call({caseless:C},d,c):D.isPlainObject(c)?D.merge({},c):D.isArray(c)?c.slice():c}function r(d,c,f,C){if(D.isUndefined(c)){if(!D.isUndefined(d))return n(void 0,d,f,C)}else return n(d,c,f,C)}function i(d,c){if(!D.isUndefined(c))return n(void 0,c)}function a(d,c){if(D.isUndefined(c)){if(!D.isUndefined(d))return n(void 0,d)}else return n(void 0,c)}function l(d,c,f){if(f in t)return n(d,c);if(f in e)return n(void 0,d)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,c,f)=>r(Zr(d),Zr(c),f,!0)};return D.forEach(Object.keys({...e,...t}),function(c){const f=u[c]||r,C=f(e[c],t[c],c);D.isUndefined(C)&&f!==l||(s[c]=C)}),s}const Da=e=>{const t=ps({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:l}=t;t.headers=a=ut.from(a),t.url=Pa(Oa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(D.isFormData(s)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[d,...c]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([d||"multipart/form-data",...c].join("; "))}}if(Qe.hasStandardBrowserEnv&&(n&&D.isFunction(n)&&(n=n(t)),n||n!==!1&&d1(t.url))){const d=r&&i&&f1.read(i);d&&a.set(r,d)}return t},v1=typeof XMLHttpRequest<"u",m1=v1&&function(e){return new Promise(function(s,n){const r=Da(e);let i=r.data;const a=ut.from(r.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:d}=r,c,f,C,N,S;function $(){N&&N(),S&&S(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function m(){if(!_)return;const E=ut.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:E,config:e,request:_};Ba(function(F){s(F),$()},function(F){n(F),$()},j),_=null}"onloadend"in _?_.onloadend=m:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(m)},_.onabort=function(){_&&(n(new we("Request aborted",we.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new we("Network Error",we.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const j=r.transitional||Na;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),n(new we(P,j.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,e,_)),_=null},i===void 0&&a.setContentType(null),"setRequestHeader"in _&&D.forEach(a.toJSON(),function(P,j){_.setRequestHeader(j,P)}),D.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),l&&l!=="json"&&(_.responseType=r.responseType),d&&([C,S]=So(d,!0),_.addEventListener("progress",C)),u&&_.upload&&([f,N]=So(u),_.upload.addEventListener("progress",f),_.upload.addEventListener("loadend",N)),(r.cancelToken||r.signal)&&(c=E=>{_&&(n(!E||E.type?new $s(null,e,_):E),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const g=l1(r.url);if(g&&Qe.protocols.indexOf(g)===-1){n(new we("Unsupported protocol "+g+":",we.ERR_BAD_REQUEST,e));return}_.send(i||null)})},g1=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,r;const i=function(d){if(!r){r=!0,l();const c=d instanceof Error?d:this.reason;n.abort(c instanceof we?c:new $s(c instanceof Error?c.message:c))}};let a=t&&setTimeout(()=>{a=null,i(new we(`timeout ${t} of ms exceeded`,we.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>D.asap(l),u}},y1=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,r;for(;n<s;)r=n+t,yield e.slice(n,r),n=r},_1=async function*(e,t){for await(const s of b1(e))yield*y1(s,t)},b1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},Qr=(e,t,s,n)=>{const r=_1(e,t);let i=0,a,l=u=>{a||(a=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:d,value:c}=await r.next();if(d){l(),u.close();return}let f=c.byteLength;if(s){let C=i+=f;s(C)}u.enqueue(new Uint8Array(c))}catch(d){throw l(d),d}},cancel(u){return l(u),r.return()}},{highWaterMark:2})},qo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",za=qo&&typeof ReadableStream=="function",w1=qo&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ra=(e,...t)=>{try{return!!e(...t)}catch{return!1}},k1=za&&Ra(()=>{let e=!1;const t=new Request(Qe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ei=64*1024,Sn=za&&Ra(()=>D.isReadableStream(new Response("").body)),To={stream:Sn&&(e=>e.body)};qo&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!To[t]&&(To[t]=D.isFunction(e[t])?s=>s[t]():(s,n)=>{throw new we(`Response type '${t}' is not supported`,we.ERR_NOT_SUPPORT,n)})})})(new Response);const x1=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(Qe.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await w1(e)).byteLength},C1=async(e,t)=>{const s=D.toFiniteNumber(e.getContentLength());return s??x1(t)},$1=qo&&(async e=>{let{url:t,method:s,data:n,signal:r,cancelToken:i,timeout:a,onDownloadProgress:l,onUploadProgress:u,responseType:d,headers:c,withCredentials:f="same-origin",fetchOptions:C}=Da(e);d=d?(d+"").toLowerCase():"text";let N=g1([r,i&&i.toAbortSignal()],a),S;const $=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let _;try{if(u&&k1&&s!=="get"&&s!=="head"&&(_=await C1(c,n))!==0){let j=new Request(t,{method:"POST",body:n,duplex:"half"}),A;if(D.isFormData(n)&&(A=j.headers.get("content-type"))&&c.setContentType(A),j.body){const[F,K]=Xr(_,So(Yr(u)));n=Qr(j.body,ei,F,K)}}D.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;S=new Request(t,{...C,signal:N,method:s.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:m?f:void 0});let g=await fetch(S,C);const E=Sn&&(d==="stream"||d==="response");if(Sn&&(l||E&&$)){const j={};["status","statusText","headers"].forEach(L=>{j[L]=g[L]});const A=D.toFiniteNumber(g.headers.get("content-length")),[F,K]=l&&Xr(A,So(Yr(l),!0))||[];g=new Response(Qr(g.body,ei,F,()=>{K&&K(),$&&$()}),j)}d=d||"text";let P=await To[D.findKey(To,d)||"text"](g,e);return!E&&$&&$(),await new Promise((j,A)=>{Ba(j,A,{data:P,headers:ut.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:S})})}catch(m){throw $&&$(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,e,S),{cause:m.cause||m}):we.from(m,m&&m.code,e,S)}}),Tn={http:Rd,xhr:m1,fetch:$1};D.forEach(Tn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ti=e=>`- ${e}`,S1=e=>D.isFunction(e)||e===null||e===!1,Fa={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let s,n;const r={};for(let i=0;i<t;i++){s=e[i];let a;if(n=s,!S1(s)&&(n=Tn[(a=String(s)).toLowerCase()],n===void 0))throw new we(`Unknown adapter '${a}'`);if(n)break;r[a||"#"+i]=n}if(!n){const i=Object.entries(r).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(ti).join(`
`):" "+ti(i[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Tn};function an(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $s(null,e)}function si(e){return an(e),e.headers=ut.from(e.headers),e.data=rn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fa.getAdapter(e.adapter||eo.adapter)(e).then(function(n){return an(e),n.data=rn.call(e,e.transformResponse,n),n.headers=ut.from(n.headers),n},function(n){return Ia(n)||(an(e),n&&n.response&&(n.response.data=rn.call(e,e.transformResponse,n.response),n.response.headers=ut.from(n.response.headers))),Promise.reject(n)})}const Va="1.11.0",Ko={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ko[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const oi={};Ko.transitional=function(t,s,n){function r(i,a){return"[Axios v"+Va+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(t===!1)throw new we(r(a," has been removed"+(s?" in "+s:"")),we.ERR_DEPRECATED);return s&&!oi[a]&&(oi[a]=!0,console.warn(r(a," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,a,l):!0}};Ko.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function T1(e,t,s){if(typeof e!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const i=n[r],a=t[i];if(a){const l=e[i],u=l===void 0||a(l,i,e);if(u!==!0)throw new we("option "+i+" must be "+u,we.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new we("Unknown option "+i,we.ERR_BAD_OPTION)}}const go={assertOptions:T1,validators:Ko},St=go.validators;let ds=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Gr,response:new Gr}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=ps(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&go.assertOptions(n,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),r!=null&&(D.isFunction(r)?s.paramsSerializer={serialize:r}:go.assertOptions(r,{encode:St.function,serialize:St.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),go.assertOptions(s,{baseUrl:St.spelling("baseURL"),withXsrfToken:St.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=i&&D.merge(i.common,i[s.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],S=>{delete i[S]}),s.headers=ut.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(s)===!1||(u=u&&$.synchronous,l.unshift($.fulfilled,$.rejected))});const d=[];this.interceptors.response.forEach(function($){d.push($.fulfilled,$.rejected)});let c,f=0,C;if(!u){const S=[si.bind(this),void 0];for(S.unshift(...l),S.push(...d),C=S.length,c=Promise.resolve(s);f<C;)c=c.then(S[f++],S[f++]);return c}C=l.length;let N=s;for(f=0;f<C;){const S=l[f++],$=l[f++];try{N=S(N)}catch(_){$.call(this,_);break}}try{c=si.call(this,N)}catch(S){return Promise.reject(S)}for(f=0,C=d.length;f<C;)c=c.then(d[f++],d[f++]);return c}getUri(t){t=ps(this.defaults,t);const s=Oa(t.baseURL,t.url,t.allowAbsoluteUrls);return Pa(s,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){ds.prototype[t]=function(s,n){return this.request(ps(n||{},{method:t,url:s,data:(n||{}).data}))}});D.forEach(["post","put","patch"],function(t){function s(n){return function(i,a,l){return this.request(ps(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}ds.prototype[t]=s(),ds.prototype[t+"Form"]=s(!0)});let M1=class Ha{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(r);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,l){n.reason||(n.reason=new $s(i,a,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Ha(function(r){t=r}),cancel:t}}};function A1(e){return function(s){return e.apply(null,s)}}function E1(e){return D.isObject(e)&&e.isAxiosError===!0}const Mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mn).forEach(([e,t])=>{Mn[t]=e});function Ua(e){const t=new ds(e),s=ba(ds.prototype.request,t);return D.extend(s,ds.prototype,t,{allOwnKeys:!0}),D.extend(s,t,null,{allOwnKeys:!0}),s.create=function(r){return Ua(ps(e,r))},s}const ie=Ua(eo);ie.Axios=ds;ie.CanceledError=$s;ie.CancelToken=M1;ie.isCancel=Ia;ie.VERSION=Va;ie.toFormData=Uo;ie.AxiosError=we;ie.Cancel=ie.CanceledError;ie.all=function(t){return Promise.all(t)};ie.spread=A1;ie.isAxiosError=E1;ie.mergeConfig=ps;ie.AxiosHeaders=ut;ie.formToJSON=e=>La(D.isHTMLForm(e)?new FormData(e):e);ie.getAdapter=Fa.getAdapter;ie.HttpStatusCode=Mn;ie.default=ie;const{Axios:Kk,AxiosError:Wk,CanceledError:Gk,isCancel:Jk,CancelToken:Xk,VERSION:Yk,all:Zk,Cancel:Qk,isAxiosError:e5,spread:t5,toFormData:s5,AxiosHeaders:o5,HttpStatusCode:n5,formToJSON:r5,getAdapter:i5,mergeConfig:a5}=ie,Tt="/api";class j1{async getAllNotes(){try{return(await ie.get(`${Tt}/notes`)).data.notes||[]}catch(t){return console.error("获取笔记失败:",t),[]}}async createNote(t){try{return(await ie.post(`${Tt}/notes`,t)).data}catch(s){throw console.error("创建笔记失败:",s),s}}async updateNote(t,s){try{return(await ie.put(`${Tt}/notes/${t}`,s)).data}catch(n){throw console.error("更新笔记失败:",n),n}}async deleteNote(t){try{return(await ie.delete(`${Tt}/notes/${t}`)).data}catch(s){throw console.error("删除笔记失败:",s),s}}async searchNotes(t){try{return(await ie.get(`${Tt}/notes/search`,{params:{q:t}})).data.notes||[]}catch(s){return console.error("搜索笔记失败:",s),[]}}async getNoteById(t){try{return(await ie.get(`${Tt}/notes/${t}`)).data}catch(s){throw console.error("获取笔记详情失败:",s),s}}async getNotesByCategory(t){try{return(await ie.get(`${Tt}/notes/category/${t}`)).data.notes||[]}catch(s){return console.error("按分类获取笔记失败:",s),[]}}async getRecentNotes(t=10){try{return(await ie.get(`${Tt}/notes/recent`,{params:{limit:t}})).data.notes||[]}catch(s){return console.error("获取最近笔记失败:",s),[]}}async exportNotes(t="json"){try{return(await ie.get(`${Tt}/notes/export`,{params:{format:t},responseType:"blob"})).data}catch(s){throw console.error("导出笔记失败:",s),s}}async importNotes(t){try{const s=new FormData;return s.append("file",t),(await ie.post(`${Tt}/notes/import`,s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("导入笔记失败:",s),s}}}const An=new j1,qe="/api";class P1{async getAllTodos(){try{return(await ie.get(`${qe}/todos`)).data.todos||[]}catch(t){return console.error("获取待办事项失败:",t),[]}}async createTodo(t){try{const s={title:t.content,description:t.description,priority:t.priority,category:t.category,due_date:t.due_date};return{success:!0,todo:(await ie.post(`${qe}/todos`,s)).data}}catch(s){return console.error("创建待办事项失败:",s),{success:!1,error:s.response?.data?.error||"创建待办事项失败"}}}async updateTodo(t,s){try{return(await ie.put(`${qe}/todos/${t}`,s)).data}catch(n){throw console.error("更新待办事项失败:",n),n}}async deleteTodo(t){try{return(await ie.delete(`${qe}/todos/${t}`)).data}catch(s){throw console.error("删除待办事项失败:",s),s}}async toggleTodo(t){try{return(await ie.patch(`${qe}/todos/${t}/toggle`)).data}catch(s){throw console.error("切换待办事项状态失败:",s),s}}async searchTodos(t){try{return(await ie.get(`${qe}/todos/search`,{params:{q:t}})).data.todos||[]}catch(s){return console.error("搜索待办事项失败:",s),[]}}async getTodoById(t){try{return(await ie.get(`${qe}/todos/${t}`)).data}catch(s){throw console.error("获取待办事项详情失败:",s),s}}async getTodosByStatus(t){try{return(await ie.get(`${qe}/todos/status/${t}`)).data.todos||[]}catch(s){return console.error("按状态获取待办事项失败:",s),[]}}async getTodosByPriority(t){try{return(await ie.get(`${qe}/todos/priority/${t}`)).data.todos||[]}catch(s){return console.error("按优先级获取待办事项失败:",s),[]}}async getTodosByCategory(t){try{return(await ie.get(`${qe}/todos/category/${t}`)).data.todos||[]}catch(s){return console.error("按分类获取待办事项失败:",s),[]}}async getOverdueTodos(){try{return(await ie.get(`${qe}/todos/overdue`)).data.todos||[]}catch(t){return console.error("获取过期待办事项失败:",t),[]}}async getTodayTodos(){try{return(await ie.get(`${qe}/todos/today`)).data.todos||[]}catch(t){return console.error("获取今日待办事项失败:",t),[]}}async getUpcomingTodos(t=7){try{return(await ie.get(`${qe}/todos/upcoming`,{params:{days:t}})).data.todos||[]}catch(s){return console.error("获取即将到期待办事项失败:",s),[]}}async getTodoStats(){try{return(await ie.get(`${qe}/todos/stats`)).data}catch(t){return console.error("获取待办事项统计失败:",t),{total:0,completed:0,pending:0,overdue:0}}}async batchUpdateTodos(t,s){try{return(await ie.patch(`${qe}/todos/batch`,{todo_ids:t,update_data:s})).data}catch(n){throw console.error("批量更新待办事项失败:",n),n}}async batchDeleteTodos(t){try{return(await ie.delete(`${qe}/todos/batch`,{data:{todo_ids:t}})).data}catch(s){throw console.error("批量删除待办事项失败:",s),s}}async exportTodos(t="json"){try{return(await ie.get(`${qe}/todos/export`,{params:{format:t},responseType:"blob"})).data}catch(s){throw console.error("导出待办事项失败:",s),s}}async importTodos(t){try{const s=new FormData;return s.append("file",t),(await ie.post(`${qe}/todos/import`,s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("导入待办事项失败:",s),s}}}const Rt=new P1,N1="/api";class L1{constructor(){this.client=ie.create({baseURL:N1,timeout:3e4,headers:{"Content-Type":"application/json"}})}async testConnection(){try{return(await this.client.get("/ai/test")).data}catch(t){throw console.error("AI连接测试失败:",t),t}}async getGlobalContext(){try{const[t,s]=await Promise.all([An.getAllNotes(),Rt.getAllTodos()]);return{notes:t.slice(0,10).map(r=>({id:r.id,title:r.title,content:r.content.substring(0,200)+(r.content.length>200?"...":""),created_at:r.created_at})),todos:s.slice(0,20).map(r=>({id:r.id,content:r.content,status:r.status,priority:r.priority,category:r.category,created_at:r.created_at}))}}catch(t){return console.error("获取全局上下文失败:",t),{notes:[],todos:[]}}}async sendMessage(t,s="openai/gpt-5-chat",n=null){try{return n||(n=await this.getGlobalContext()),(await this.client.post("/ai/chat",{message:t,model:s,context:n})).data}catch(r){throw console.error("AI聊天失败:",r),r}}async parseCommand(t){try{return(await this.client.post("/ai/parse-command",{command:t})).data}catch(s){throw console.error("AI指令解析失败:",s),s}}async executeFileOperation(t,s){try{return(await this.client.post("/ai/file/execute",{operation:t,params:s})).data}catch(n){throw console.error("文件操作执行失败:",n),n}}async readFile(t,s="utf-8"){try{return(await this.client.post("/ai/file/read",{file_path:t,encoding:s})).data}catch(n){throw console.error("文件读取失败:",n),n}}async writeFile(t,s,n="utf-8"){try{return(await this.client.post("/ai/file/write",{file_path:t,content:s,encoding:n})).data}catch(r){throw console.error("文件写入失败:",r),r}}async modifyFile(t,s,n="utf-8"){try{return(await this.client.post("/ai/file/modify",{file_path:t,content:s,encoding:n})).data}catch(r){throw console.error("文件修改失败:",r),r}}async getAvailableModels(){try{return(await this.client.get("/ai/models")).data}catch(t){throw console.error("获取AI模型列表失败:",t),t}}async setCurrentModel(t){try{return(await this.client.post("/ai/models/current",{model_id:t})).data}catch(s){throw console.error("设置AI模型失败:",s),s}}async getCurrentModel(){try{return(await this.client.get("/ai/models/current")).data}catch(t){throw console.error("获取当前AI模型失败:",t),t}}async generateSuggestions(t,s={}){try{return(await this.client.post("/ai/suggestions",{type:t,context:s})).data}catch(n){throw console.error("生成智能建议失败:",n),n}}async analyzeText(t,s="general"){try{return(await this.client.post("/ai/analyze",{text:t,analysis_type:s})).data}catch(n){throw console.error("文本分析失败:",n),n}}async generateSummary(t,s=200){try{return(await this.client.post("/ai/summarize",{content:t,max_length:s})).data}catch(n){throw console.error("生成摘要失败:",n),n}}async translateText(t,s="zh",n="auto"){try{return(await this.client.post("/ai/translate",{text:t,target_language:s,source_language:n})).data}catch(r){throw console.error("文本翻译失败:",r),r}}async chat(t,s="gpt-5-chat",n=!1,r=!1){try{const i=t[t.length-1]?.content||"";if(!i.trim())return{success:!1,response:"请输入有效的消息内容",error:"Empty message"};const a={message:i,model:s,context:t.slice(0,-1),web_search_enabled:r};if(n){const u=await this.getGlobalContext();a.global_context=u}const l=await this.client.post("/ai/chat",a);return{success:l.data.success||!0,response:l.data.response,provider:l.data.provider,model:l.data.model,usage:l.data.usage}}catch(i){return console.error("AI聊天失败:",i),{success:!1,response:"抱歉，AI服务暂时不可用，请稍后再试。",error:i.message}}}async sendMessage(t,s="gpt-5-chat"){try{const n=await this.client.post("/ai/chat",{message:t,model:s});return{success:!0,message:n.data.response,provider:n.data.provider,model:n.data.model,usage:n.data.usage}}catch(n){return console.error("发送消息失败:",n),{success:!1,message:"抱歉，AI服务暂时不可用，请稍后再试。",error:n.message}}}async generateTopicName(t){try{return(await this.client.post("/topics/generate-name",{message:t})).data}catch(s){return console.error("生成话题名称失败:",s),{success:!1,error:"网络错误或服务不可用"}}}async getTopics(){try{return(await this.client.get("/topics")).data}catch(t){return console.error("获取话题失败:",t),{success:!1,error:"获取话题失败"}}}async createTopic(t){try{return(await this.client.post("/topics",t)).data}catch(s){return console.error("创建话题失败:",s),{success:!1,error:"创建话题失败"}}}async getTopic(t){try{return(await this.client.get(`/topics/${t}`)).data}catch(s){return console.error("获取话题失败:",s),{success:!1,error:"获取话题失败"}}}async updateTopic(t,s){try{return(await this.client.put(`/topics/${t}`,s)).data}catch(n){return console.error("更新话题失败:",n),{success:!1,error:"更新话题失败"}}}async deleteTopic(t){try{return(await this.client.delete(`/topics/${t}`)).data}catch(s){return s.response&&s.response.status===404?(console.log("话题不存在，视为删除成功:",t),{success:!0,message:"话题已删除"}):(console.error("删除话题失败:",s),{success:!1,error:"删除话题失败"})}}async addMessageToTopic(t,s){try{return(await this.client.post(`/topics/${t}/messages`,s)).data}catch(n){return console.error("添加消息失败:",n),{error:"添加消息失败"}}}formatContextAsText(t){if(!t)return"";let s="";if(t.notes&&t.notes.length>0&&(s+=`### 最近的笔记：
`,t.notes.forEach(n=>{s+=`**${n.title}**
${n.content}

`})),t.todos&&t.todos.length>0){const n=t.todos.filter(i=>i.status!=="completed"),r=t.todos.filter(i=>i.status==="completed");n.length>0&&(s+=`### 待办事项：
`,n.forEach(i=>{s+=`- [${i.priority||"medium"}] ${i.content}`,i.category&&(s+=` (${i.category})`),i.due_date&&(s+=` - 截止：${i.due_date}`),s+=`
`})),r.length>0&&(s+=`### 已完成：
`,r.slice(0,5).forEach(i=>{s+=`- ${i.content}
`}))}return s||"用户暂无保存的笔记和待办事项。"}async getAudioList(){try{return(await this.client.get("/audio")).data}catch(t){return console.error("获取音频列表失败:",t),{success:!1,error:"获取音频列表失败"}}}}const Ke=new L1,I1={class:"ai-enhanced-editor"},B1={class:"ai-toolbar futuristic-card mb-4"},O1={class:"flex items-center justify-between mb-3"},D1={class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},z1=["d"],R1={key:0,class:"space-y-3"},F1={class:"flex flex-wrap gap-2"},V1=["disabled"],H1=["disabled"],U1=["disabled"],q1=["disabled"],K1={class:"border-t pt-3",style:{"border-color":"var(--theme-border)"}},W1={class:"flex flex-wrap gap-2"},G1=["disabled"],J1=["disabled"],X1=["disabled"],Y1=["disabled"],Z1={class:"flex items-center justify-between text-xs futuristic-subtitle"},Q1={class:"flex items-center space-x-2"},e0={key:0,class:"futuristic-title"},t0={key:0,class:"ai-result-panel futuristic-card mb-4"},s0={class:"flex items-center justify-between mb-3"},o0={class:"font-semibold futuristic-title flex items-center"},n0={class:"flex space-x-2"},r0={class:"ai-result-content rounded p-3 text-sm",style:{background:"var(--theme-surface)"}},i0={key:0,class:"whitespace-pre-wrap font-mono"},a0={key:1,class:"space-y-2"},l0={class:"flex-1"},c0={key:2,class:"whitespace-pre-wrap"},u0={key:0,class:"ai-loading futuristic-card mb-4"},d0={class:"flex items-center space-x-3"},f0={class:"text-sm futuristic-subtitle"},p0={__name:"AIEnhancedEditor",props:{currentNote:{type:Object,default:()=>({title:"",content:""})},selectedText:{type:String,default:""}},emits:["update-content","add-todos"],setup(e,{emit:t}){const s=e,n=t,r=O(!0),i=O(!1),a=O(!1),l=O(""),u=O(null),d=be(()=>s.selectedText||s.currentNote.content||""),c=()=>{r.value=!r.value},f=async()=>{try{const j=await Ke.testConnection();i.value=j.success}catch(j){i.value=!1,console.error("AI连接测试失败:",j)}},C=async j=>{const A=d.value;if(!A.trim()){alert("请先输入或选择要分析的文本");return}a.value=!0,l.value=g(j);try{const F=await Ke.analyzeText(A,j);if(F.success)u.value={type:j,content:F.result};else throw new Error(F.error||"分析失败")}catch(F){console.error("文本分析失败:",F),alert(`分析失败: ${F.message}`)}finally{a.value=!1}},N=async()=>{const j=d.value;if(!j.trim()){alert("请先输入或选择要分析的文本");return}a.value=!0,l.value="正在生成待办事项...";try{const A=await Ke.generateTodos(j);A.success&&A.todos.length>0?(u.value={type:"todos",todos:A.todos},n("add-todos",A.todos)):u.value={type:"todos",content:"未找到明确的待办事项",todos:[]}}catch(A){console.error("生成待办事项失败:",A),alert(`生成待办事项失败: ${A.message}`)}finally{a.value=!1}},S=async j=>{const A=d.value;if(!A.trim()){alert("请先输入或选择要改进的文本");return}a.value=!0,l.value=E(j);try{const F=await Ke.improveContent(A,j);if(F.success)u.value={type:`improve_${j}`,content:F.improved_content,original:A};else throw new Error(F.error||"改进失败")}catch(F){console.error("内容改进失败:",F),alert(`内容改进失败: ${F.message}`)}finally{a.value=!1}},$=()=>{u.value&&u.value.content&&(n("update-content",u.value.content),u.value=null)},_=async()=>{if(u.value)try{const j=u.value.type==="todos"?u.value.todos.map(A=>`- ${A.content}`).join(`
`):u.value.content;await navigator.clipboard.writeText(j)}catch(j){console.error("复制失败:",j)}},m=j=>({summary:"内容摘要",keywords:"关键词",sentiment:"😊 情感分析",structure:"结构分析",todos:"待办事项",improve_general:"通用优化结果",improve_grammar:"语法检查结果",improve_structure:"结构优化结果",improve_expand:"📈 内容扩展结果"})[j]||"AI分析结果",g=j=>({summary:"正在生成摘要...",keywords:"正在提取关键词...",sentiment:"正在分析情感...",structure:"正在分析结构..."})[j]||"正在处理...",E=j=>({general:"正在优化内容...",grammar:"正在检查语法...",structure:"正在优化结构...",expand:"正在扩展内容..."})[j]||"正在改进...",P=j=>({high:"bg-red-500/20 text-red-400",medium:"bg-yellow-500/20 text-yellow-400",low:"bg-green-500/20 text-green-400"})[j]||"bg-gray-500/20 text-gray-400";return Je(()=>{f()}),Re(()=>s.currentNote,()=>{u.value=null},{deep:!0}),(j,A)=>(h(),v("div",I1,[o("div",B1,[o("div",O1,[A[8]||(A[8]=o("h3",{class:"text-lg font-bold futuristic-title flex items-center"},[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),Y(" AI智能助手 ")],-1)),o("button",{onClick:c,class:"p-2 rounded transition-colors hover:opacity-80",style:{background:"var(--theme-surface)"}},[(h(),v("svg",D1,[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.value?"M19 9l-7 7-7-7":"M9 5l7 7-7 7"},null,8,z1)]))])]),Ce(us,{name:"slide-down"},{default:Jt(()=>[r.value?(h(),v("div",R1,[o("div",F1,[o("button",{onClick:A[0]||(A[0]=F=>C("summary")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-primary"},[...A[9]||(A[9]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1),Y(" 生成摘要 ",-1)])],8,V1),o("button",{onClick:A[1]||(A[1]=F=>C("keywords")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-secondary"}," 提取关键词 ",8,H1),o("button",{onClick:A[2]||(A[2]=F=>C("sentiment")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-accent"}," 😊 情感分析 ",8,U1),o("button",{onClick:N,disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-success"},[...A[10]||(A[10]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Y(" 生成待办 ",-1)])],8,q1)]),o("div",K1,[A[13]||(A[13]=o("h4",{class:"text-sm font-semibold mb-2 futuristic-subtitle"},"内容改进",-1)),o("div",W1,[o("button",{onClick:A[3]||(A[3]=F=>S("general")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-outline"},[...A[11]||(A[11]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),Y(" 通用优化 ",-1)])],8,G1),o("button",{onClick:A[4]||(A[4]=F=>S("grammar")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-outline"},[...A[12]||(A[12]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1),Y(" 语法检查 ",-1)])],8,J1),o("button",{onClick:A[5]||(A[5]=F=>S("structure")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-outline"}," 结构优化 ",8,X1),o("button",{onClick:A[6]||(A[6]=F=>S("expand")),disabled:!e.selectedText&&!e.currentNote.content,class:"ai-btn ai-btn-outline"}," 📈 内容扩展 ",8,Y1)])]),o("div",Z1,[o("div",Q1,[o("div",{class:ne(["w-2 h-2 rounded-full",i.value?"animate-pulse":"bg-red-500"]),style:He(i.value?"background: var(--theme-success);":"")},null,6),o("span",null,y(i.value?"AI已连接":"AI连接失败"),1)]),e.selectedText?(h(),v("div",e0," 已选择 "+y(e.selectedText.length)+" 个字符 ",1)):G("",!0)])])):G("",!0)]),_:1})]),Ce(us,{name:"fade"},{default:Jt(()=>[u.value?(h(),v("div",t0,[o("div",s0,[o("h4",o0,[A[14]||(A[14]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Y(" "+y(m(u.value.type)),1)]),o("div",n0,[u.value.type.includes("improve")?(h(),v("button",{key:0,onClick:$,class:"text-xs px-3 py-1 rounded transition-colors futuristic-btn-primary"}," 应用改进 ")):G("",!0),o("button",{onClick:_,class:"text-xs px-3 py-1 rounded transition-colors futuristic-btn-secondary"}," 复制结果 "),o("button",{onClick:A[7]||(A[7]=F=>u.value=null),class:"text-xs px-2 py-1 hover:bg-red-500/20 rounded transition-colors"}," ✕ ")])]),o("div",r0,[u.value.type==="keywords"?(h(),v("pre",i0,y(u.value.content),1)):u.value.type==="todos"?(h(),v("div",a0,[(h(!0),v(de,null,ge(u.value.todos,(F,K)=>(h(),v("div",{key:K,class:"flex items-center space-x-2"},[A[15]||(A[15]=o("input",{type:"checkbox",class:"rounded"},null,-1)),o("span",l0,y(F.content),1),o("span",{class:ne(["text-xs px-2 py-1 rounded",P(F.priority)])},y(F.priority),3)]))),128))])):(h(),v("div",c0,y(u.value.content),1))])])):G("",!0)]),_:1}),Ce(us,{name:"fade"},{default:Jt(()=>[a.value?(h(),v("div",u0,[o("div",d0,[A[16]||(A[16]=o("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2",style:{"border-color":"var(--theme-success)"}},null,-1)),o("span",f0,y(l.value),1)])])):G("",!0)]),_:1})]))}},h0=Oe(p0,[["__scopeId","data-v-e1124593"]]),v0={class:"smart-search"},m0={class:"search-container cyber-card mb-4"},g0={class:"flex items-center space-x-3"},y0={class:"flex-1 relative"},_0=["disabled"],b0={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},w0={key:1},k0={class:"flex items-center justify-between mt-3 text-sm"},x0={class:"flex items-center space-x-4"},C0={class:"flex items-center space-x-2 cursor-pointer"},$0={class:"flex items-center space-x-2 cursor-pointer"},S0={class:"flex items-center space-x-2 text-xs text-cyber-primary/60"},T0={key:0},M0={key:0,class:"search-suggestions cyber-card mb-4"},A0={class:"flex flex-wrap gap-2"},E0=["onClick"],j0={key:1,class:"search-results space-y-3"},P0=["onClick"],N0={class:"flex items-start justify-between mb-2"},L0={class:"flex items-center space-x-2"},I0={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},B0={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},O0={class:"font-semibold text-glow"},D0={key:2,class:"text-xs px-2 py-1 bg-neon-green/20 text-neon-green rounded"},z0={class:"text-xs text-cyber-primary/60"},R0={class:"text-sm text-cyber-primary/80 mb-2 line-clamp-2"},F0={key:0,class:"text-xs text-cyber-primary/60 bg-cyber-gray/20 rounded p-2"},V0={key:1,class:"mt-2"},H0={class:"flex flex-wrap gap-1"},U0={key:2,class:"empty-state text-center py-8"},q0={key:3,class:"loading-state text-center py-8"},K0={class:"text-cyber-primary/80"},W0={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},G0={key:1,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},J0={__name:"SmartSearch",props:{autoFocus:{type:Boolean,default:!1}},emits:["select-result","close"],setup(e,{emit:t}){const s=e,n=t,r=O(""),i=O(!1),a=O(!1),l=O(!1),u=O([]),d=O(["会议记录","项目计划","学习笔记","待办事项","重要提醒"]),c=O(0),f=O({includeNotes:!0,includeTodos:!0});be(()=>r.value?d.value.filter(j=>j.toLowerCase().includes(r.value.toLowerCase())):d.value);const C=()=>{i.value=!i.value,r.value.trim()&&l.value&&S()},N=()=>{r.value.length>2},S=async()=>{if(!r.value.trim())return;a.value=!0,l.value=!0;const j=Date.now();try{i.value?await _():await $()}catch(A){console.error("搜索失败:",A),u.value=[]}finally{a.value=!1,c.value=Date.now()-j}},$=async()=>{const j=[];if(f.value.includeNotes)try{const A=await An.searchNotes(r.value);j.push(...A.map(F=>({...F,type:"note",highlights:m(F.content,r.value)})))}catch(A){console.error("搜索笔记失败:",A)}if(f.value.includeTodos)try{const A=await Rt.searchTodos(r.value);j.push(...A.map(F=>({...F,type:"todo",title:F.content.substring(0,50)+(F.content.length>50?"...":""),highlights:m(F.content,r.value)})))}catch(A){console.error("搜索待办事项失败:",A)}u.value=j},_=async()=>{try{const j=[];if(f.value.includeNotes){const F=await An.getAllNotes();j.push(...F.map(K=>({...K,type:"note"})))}if(f.value.includeTodos){const F=await Rt.getAllTodos();j.push(...F.map(K=>({...K,type:"todo",title:K.content.substring(0,50)+(K.content.length>50?"...":"")})))}const A=await Ke.smartSearch(r.value,j);if(A.success&&A.results){const F=A.results.map(K=>{const L=j.find(J=>J.id.toString()===K.id.toString());return L?{...L,relevanceScore:K.relevance_score,reason:K.reason,highlights:m(L.content,r.value)}:null}).filter(Boolean);u.value=F}else await $()}catch(j){console.error("AI搜索失败:",j),await $()}},m=(j,A)=>{const F=A.toLowerCase().split(" ").filter(L=>L.length>1),K=[];return F.forEach(L=>{const J=new RegExp(`\\b${L}\\b`,"gi"),ae=j.match(J);ae&&K.push(...ae.slice(0,3))}),[...new Set(K)]},g=j=>{r.value=j,S()},E=j=>{n("select-result",j)},P=j=>new Date(j).toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return Je(()=>{s.autoFocus&&setTimeout(()=>{const j=document.querySelector(".smart-search input");j&&j.focus()},100)}),Re(r,j=>{j.trim()||(u.value=[],l.value=!1)}),(j,A)=>(h(),v("div",v0,[o("div",m0,[o("div",g0,[o("div",y0,[he(o("input",{"onUpdate:modelValue":A[0]||(A[0]=F=>r.value=F),onKeyup:zo(S,["enter"]),onInput:N,type:"text",placeholder:"智能搜索笔记和待办事项...",class:"input-neon w-full pl-10 pr-4"},null,544),[[Ae,r.value]]),A[3]||(A[3]=o("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-cyber-primary/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),o("button",{onClick:C,class:ne(["px-4 py-2 rounded transition-all duration-200 text-sm font-medium",i.value?"bg-neon-green/20 text-neon-green border border-neon-green/30":"bg-cyber-primary/20 text-cyber-primary border border-cyber-primary/30"])},[A[4]||(A[4]=o("svg",{class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),Y(" "+y(i.value?"AI搜索":"普通搜索"),1)],2),o("button",{onClick:S,disabled:!r.value.trim()||a.value,class:"btn-neon px-4 py-2"},[a.value?(h(),v("svg",b0,[...A[5]||(A[5]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(h(),v("span",w0,"搜索"))],8,_0)]),o("div",k0,[o("div",x0,[o("label",C0,[he(o("input",{"onUpdate:modelValue":A[1]||(A[1]=F=>f.value.includeNotes=F),type:"checkbox",class:"rounded"},null,512),[[Ks,f.value.includeNotes]]),A[6]||(A[6]=o("span",{class:"text-cyber-primary/80"},[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),Y(" 笔记")],-1))]),o("label",$0,[he(o("input",{"onUpdate:modelValue":A[2]||(A[2]=F=>f.value.includeTodos=F),type:"checkbox",class:"rounded"},null,512),[[Ks,f.value.includeTodos]]),A[7]||(A[7]=o("span",{class:"text-cyber-primary/80"},[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),Y(" 待办")],-1))])]),o("div",S0,[o("span",null,y(u.value.length)+" 个结果",1),i.value&&c.value?(h(),v("span",T0,"• AI增强 "+y(c.value)+"ms",1)):G("",!0)])])]),d.value.length>0&&!u.value.length?(h(),v("div",M0,[A[8]||(A[8]=o("h4",{class:"text-sm font-semibold mb-2 text-cyber-primary/80"},[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),Y(" 搜索建议")],-1)),o("div",A0,[(h(!0),v(de,null,ge(d.value,F=>(h(),v("button",{key:F,onClick:K=>g(F),class:"px-3 py-1 text-xs bg-cyber-primary/10 text-cyber-primary rounded hover:bg-cyber-primary/20 transition-colors"},y(F),9,E0))),128))])])):G("",!0),u.value.length>0?(h(),v("div",j0,[(h(!0),v(de,null,ge(u.value,F=>(h(),v("div",{key:`${F.type}-${F.id}`,onClick:K=>E(F),class:"result-item cyber-card cursor-pointer hover:border-cyber-primary/50 transition-all duration-200"},[o("div",N0,[o("div",L0,[F.type==="note"?(h(),v("svg",I0,[...A[9]||(A[9]=[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},null,-1)])])):(h(),v("svg",B0,[...A[10]||(A[10]=[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])),o("h3",O0,y(F.title),1),i.value&&F.relevanceScore?(h(),v("span",D0,y(Math.round(F.relevanceScore*100))+"% 匹配 ",1)):G("",!0)]),o("span",z0,y(P(F.updated_at)),1)]),o("p",R0,y(F.content),1),i.value&&F.reason?(h(),v("div",F0,[A[11]||(A[11]=o("strong",null,"AI分析：",-1)),Y(" "+y(F.reason),1)])):G("",!0),F.highlights&&F.highlights.length>0?(h(),v("div",V0,[o("div",H0,[(h(!0),v(de,null,ge(F.highlights,K=>(h(),v("span",{key:K,class:"text-xs px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded"},y(K),1))),128))])])):G("",!0)],8,P0))),128))])):l.value&&!a.value?(h(),v("div",U0,[A[13]||(A[13]=o("svg",{class:"w-16 h-16 mb-4 text-cyber-primary/60",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1)),A[14]||(A[14]=o("h3",{class:"text-lg font-semibold mb-2 text-glow"},"未找到相关内容",-1)),A[15]||(A[15]=o("p",{class:"text-cyber-primary/60 mb-4"},"尝试使用不同的关键词或启用AI搜索",-1)),i.value?G("",!0):(h(),v("button",{key:0,onClick:C,class:"btn-neon"},[...A[12]||(A[12]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1),Y(" 启用AI智能搜索 ",-1)])]))])):G("",!0),a.value?(h(),v("div",q0,[A[18]||(A[18]=o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-neon-green mx-auto mb-4"},null,-1)),o("p",K0,[i.value?(h(),v("svg",W0,[...A[16]||(A[16]=[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},null,-1)])])):(h(),v("svg",G0,[...A[17]||(A[17]=[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"},null,-1)])])),Y(" "+y(i.value?"AI正在分析搜索内容...":"搜索中..."),1)])])):G("",!0)]))}},X0=Oe(J0,[["__scopeId","data-v-2adb029a"]]);class je{static formatDate(t,s="zh-CN"){if(!t)return"";const n=typeof t=="string"?new Date(t):t;return isNaN(n.getTime())?"":n.toLocaleDateString(s)}static formatTime(t,s="zh-CN"){if(!t)return"";const n=typeof t=="string"?new Date(t):t;return isNaN(n.getTime())?"":n.toLocaleTimeString(s,{hour:"2-digit",minute:"2-digit"})}static formatDateTime(t,s="zh-CN"){if(!t)return"";const n=typeof t=="string"?new Date(t):t;return isNaN(n.getTime())?"":n.toLocaleString(s)}static isOverdue(t){if(!t)return!1;const s=typeof t=="string"?new Date(t):t;return isNaN(s.getTime())?!1:s<new Date}static getRelativeTime(t,s="zh-CN"){if(!t)return"";const n=typeof t=="string"?new Date(t):t;if(isNaN(n.getTime()))return"";const i=new Date-n,a=Math.floor(i/(1e3*60)),l=Math.floor(i/(1e3*60*60)),u=Math.floor(i/(1e3*60*60*24));return s==="zh-CN"?a<1?"刚刚":a<60?`${a}分钟前`:l<24?`${l}小时前`:u<7?`${u}天前`:this.formatDate(n,s):a<1?"just now":a<60?`${a} minutes ago`:l<24?`${l} hours ago`:u<7?`${u} days ago`:this.formatDate(n,s)}static toISOString(t){return!t||!(t instanceof Date)?null:t.toISOString()}static fromISOString(t){if(!t)return null;try{const s=new Date(t);return isNaN(s.getTime())?null:s}catch{return console.warn("Invalid ISO string:",t),null}}static now(){return new Date}static formatForDisplay(t,s="zh-CN"){if(!t)return"";const n=typeof t=="string"?new Date(t):t;if(isNaN(n.getTime()))return"";const i=new Date-n,a=Math.floor(i/(1e3*60*60*24));return a===0?this.formatTime(n,s):a===1?s==="zh-CN"?"昨天":"Yesterday":a<7?this.getRelativeTime(n,s):this.formatDate(n,s)}}const Y0={class:"flex h-full"},Z0={class:"w-80 flex flex-col",style:{"border-right":"1px solid var(--theme-border)",background:"var(--theme-surface)"}},Q0={class:"p-6 border-b",style:{"border-color":"var(--theme-border)",background:"var(--theme-card-gradient)"}},ef={class:"flex space-x-3 mb-4"},tf={class:"relative flex-1"},sf=["placeholder"],of={class:"grid grid-cols-1 gap-3"},nf={class:"flex items-center justify-center space-x-2"},rf={class:"flex items-center justify-center space-x-2"},af={class:"flex-1 overflow-y-auto"},lf={key:0,class:"p-4 text-center futuristic-subtitle"},cf={class:"animate-pulse"},uf={key:1,class:"p-4 text-center futuristic-subtitle"},df={key:2,class:"p-2"},ff=["onClick"],pf={class:"flex justify-between items-start mb-3"},hf={class:"futuristic-title text-sm truncate flex-1"},vf=["onClick","title"],mf={class:"text-xs futuristic-subtitle line-clamp-2 mb-3 leading-relaxed"},gf={class:"flex justify-between items-center text-xs"},yf={class:"futuristic-subtitle opacity-70 font-mono"},_f={class:"flex space-x-1"},bf={key:0,class:"flex-1 flex flex-col"},wf={class:"h-full overflow-y-auto p-6"},kf={key:1,class:"flex-1 flex flex-col"},xf={key:0,class:"p-8 border-b",style:{"border-color":"var(--theme-border)",background:"var(--theme-card-gradient)"}},Cf={class:"futuristic-header mb-6"},$f={class:"futuristic-title-medium"},Sf={class:"futuristic-subtitle"},Tf={class:"space-y-6"},Mf={class:"relative"},Af=["placeholder"],Ef={class:"relative"},jf=["placeholder"],Pf={class:"flex space-x-4"},Nf={class:"flex items-center justify-center space-x-2"},Lf={class:"flex items-center justify-center space-x-2"},If={key:1,class:"flex-1 flex"},Bf={class:"p-8 border-b",style:{"border-color":"var(--theme-border)",background:"var(--theme-card-gradient)"}},Of={class:"futuristic-header"},Df=["placeholder"],zf={class:"futuristic-meta mt-3"},Rf={class:"flex items-center space-x-4 text-sm futuristic-subtitle"},Ff={class:"flex items-center space-x-2"},Vf={class:"flex items-center space-x-2"},Hf={class:"flex-1 p-8"},Uf={class:"futuristic-editor-container h-full"},qf=["placeholder"],Kf={key:0,class:"w-1/3 overflow-y-auto",style:{"border-left":"1px solid var(--theme-border)",background:"var(--theme-surface)"}},Wf={key:2,class:"flex-1 flex items-center justify-center"},Gf={class:"futuristic-empty-state text-center"},Jf={class:"futuristic-icon-container mb-8"},Xf={class:"w-24 h-24 mx-auto opacity-40 animate-pulse",style:{color:"var(--theme-text)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yf={class:"futuristic-title-medium mb-4"},Zf={class:"futuristic-subtitle mb-8"},Qf={class:"flex items-center space-x-2"},ep=Fe({__name:"NoteEditor",setup(e){const t=O([]),s=O(null),n=O(!1),r=O(""),i=O(""),a=O(""),l=O(!1),u=O(!1),d=O(""),c=O(!1),f=O(x.getLanguage());let C=null;const N=async()=>{l.value=!0;try{const K=await fetch("/api/notes");if(K.ok){const L=await K.json();Array.isArray(L)?t.value=L:L.notes&&Array.isArray(L.notes)?t.value=L.notes:t.value=[]}else console.error("获取笔记失败:",K.status),t.value=[]}catch(K){console.error("获取笔记失败:",K),t.value=[]}finally{l.value=!1}},S=async()=>{if(i.value.trim()){try{const K=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.value,content:a.value})});if(K.ok){const L=await K.json(),J=L.note||L;J.id?(t.value.unshift(J),s.value=J):(console.error("创建笔记返回数据格式错误:",L),await N())}else{const L=await K.json();alert(`创建笔记失败: ${L.error||"未知错误"}`)}}catch(K){console.error("创建笔记请求失败:",K),alert(x.t("create_note_failed"))}i.value="",a.value="",n.value=!1}},$=K=>{s.value=K,n.value=!1},_=K=>{s.value&&(s.value.content=K,s.value.updated_at=je.toISOString(je.now()))},m=K=>{if(s.value&&K.length>0){const L=K.map(ae=>`- [ ] ${ae.content}`).join(`
`),J=s.value.content;s.value.content=J+(J?`

`:"")+`## 待办事项
`+L,s.value.updated_at=je.toISOString(je.now())}},g=K=>{const L=window.getSelection();L&&L.toString().trim()?d.value=L.toString().trim():d.value=""},E=()=>{c.value=!c.value},P=K=>{K.type==="note"&&($(K),c.value=!1)},j=async K=>{if(console.log("deleteNote函数被调用，noteId:",K),!confirm(x.t("confirm_delete_note"))){console.log("用户取消删除");return}console.log("开始发送删除请求");try{const L=await fetch(`/api/notes/${K}`,{method:"DELETE"});if(console.log("删除请求响应:",L.status,L.statusText),L.ok)t.value=t.value.filter(J=>J.id!==K),s.value?.id===K&&(s.value=null),console.log("笔记删除成功，本地状态已更新"),alert("笔记删除成功！");else{const J=await L.json();console.error("删除失败:",J),alert(`删除失败: ${J.error||"未知错误"}`)}}catch(L){console.error("删除请求失败:",L),alert("删除失败，请检查网络连接")}},A=O([]);Re([t,r],()=>{r.value?A.value=t.value.filter(K=>K.title.toLowerCase().includes(r.value.toLowerCase())||K.content.toLowerCase().includes(r.value.toLowerCase())):A.value=t.value},{immediate:!0});const F=K=>{const J=x.getLanguage()==="zh-CN"?"zh-CN":"en-US";return new Date(K).toLocaleDateString(J,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return Je(()=>{N(),C=x.addListener(K=>{f.value=K})}),Ut(()=>{C&&C()}),(K,L)=>(h(),v("div",Y0,[o("div",Z0,[o("div",Q0,[o("div",ef,[o("div",tf,[he(o("input",{"onUpdate:modelValue":L[0]||(L[0]=J=>r.value=J),type:"text",placeholder:I(x).t("search_notes_placeholder"),class:"futuristic-input futuristic-input-with-icon w-full text-sm"},null,8,sf),[[Ae,r.value]]),L[10]||(L[10]=o("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 opacity-60",style:{color:"var(--theme-text)"}},[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),o("button",{onClick:L[1]||(L[1]=J=>n.value=!0),class:"futuristic-btn-primary px-4 py-3 text-sm group"},[...L[11]||(L[11]=[o("svg",{class:"w-4 h-4 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])]),o("div",of,[o("button",{onClick:E,class:ne(["futuristic-btn-secondary group",c.value?"futuristic-btn-active":""])},[o("div",nf,[L[12]||(L[12]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),o("span",null,y(I(x).t("smart_search")),1)])],2),o("button",{onClick:L[2]||(L[2]=J=>u.value=!u.value),class:ne(["futuristic-btn-secondary group",u.value?"futuristic-btn-active":""])},[o("div",rf,[L[13]||(L[13]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),o("span",null,y(I(x).t("ai_helper")),1)])],2)])]),o("div",af,[l.value?(h(),v("div",lf,[o("div",cf,y(I(x).t("loading")),1)])):A.value.length===0?(h(),v("div",uf,y(r.value?I(x).t("no_matching_notes"):I(x).t("create_first_note")),1)):(h(),v("div",df,[(h(!0),v(de,null,ge(A.value,J=>(h(),v("div",{key:J.id,onClick:ae=>$(J),class:ne(["futuristic-card group cursor-pointer transition-all duration-300 transform hover:scale-[1.02]",s.value?.id===J.id?"futuristic-card-active":"hover:shadow-cyber-lg"])},[o("div",pf,[o("h3",hf,y(J.title),1),o("button",{onClick:[ze(ae=>j(J.id),["stop"]),ae=>console.log("删除按钮被点击了，笔记ID:",J.id)],class:"futuristic-btn-danger opacity-60 group-hover:opacity-100 transition-all duration-200 hover:scale-110",title:I(x).t("delete_note")},[...L[14]||(L[14]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vf)]),o("p",mf,y((J.content||"").substring(0,100))+y((J.content||"").length>100?"...":""),1),o("div",gf,[o("span",yf,y(F(J.updated_at)),1),o("div",_f,[(h(!0),v(de,null,ge(J.tags,ae=>(h(),v("span",{key:ae,class:"futuristic-tag"},y(ae),1))),128))])])],10,ff))),128))]))])]),c.value?(h(),v("div",bf,[o("div",wf,[Ce(X0,{"auto-focus":!0,onSelectResult:P,onClose:L[3]||(L[3]=J=>c.value=!1)})])])):(h(),v("div",kf,[n.value?(h(),v("div",xf,[o("div",Cf,[o("h2",$f,y(I(x).t("create_note")),1),o("div",Sf,y(I(x).t("start_writing_placeholder")),1)]),o("div",Tf,[o("div",Mf,[he(o("input",{"onUpdate:modelValue":L[4]||(L[4]=J=>i.value=J),type:"text",placeholder:I(x).t("note_title_placeholder"),class:"futuristic-input w-full text-lg",onKeyup:zo(S,["enter"])},null,40,Af),[[Ae,i.value]]),L[15]||(L[15]=o("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 opacity-40",style:{color:"var(--theme-text)"}},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1))]),o("div",Ef,[he(o("textarea",{"onUpdate:modelValue":L[5]||(L[5]=J=>a.value=J),placeholder:I(x).t("start_writing_placeholder"),class:"futuristic-input w-full h-40 resize-none"},null,8,jf),[[Ae,a.value]])]),o("div",Pf,[o("button",{onClick:S,class:"futuristic-btn-primary flex-1 group"},[o("div",Nf,[L[16]||(L[16]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),o("span",null,y(I(x).t("create_note")),1)])]),o("button",{onClick:L[6]||(L[6]=J=>n.value=!1),class:"futuristic-btn-danger flex-1 group"},[o("div",Lf,[L[17]||(L[17]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),o("span",null,y(I(x).t("cancel")),1)])])])])])):s.value?(h(),v("div",If,[o("div",{class:ne(["flex-1 flex flex-col",u.value?"w-2/3":"w-full"])},[o("div",Bf,[o("div",Of,[he(o("input",{"onUpdate:modelValue":L[7]||(L[7]=J=>s.value.title=J),class:"futuristic-title-input w-full text-2xl font-bold bg-transparent border-none focus:outline-none",placeholder:I(x).t("untitled_note")},null,8,Df),[[Ae,s.value.title]]),o("div",zf,[o("div",Rf,[o("div",Ff,[L[18]||(L[18]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,y(F(s.value.updated_at)),1)]),o("div",Vf,[L[19]||(L[19]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o("span",null,y((s.value.content||"").length)+" "+y(I(x).t("characters")),1)])])])])]),o("div",Hf,[o("div",Uf,[he(o("textarea",{"onUpdate:modelValue":L[8]||(L[8]=J=>s.value.content=J),onMouseup:g,onKeyup:g,class:"futuristic-textarea w-full h-full resize-none text-base leading-relaxed",placeholder:I(x).t("start_writing_placeholder")},null,40,qf),[[Ae,s.value.content]])])])],2),u.value?(h(),v("div",Kf,[Ce(h0,{"current-note":s.value,"selected-text":d.value,onUpdateContent:_,onAddTodos:m},null,8,["current-note","selected-text"])])):G("",!0)])):(h(),v("div",Wf,[o("div",Gf,[o("div",Jf,[(h(),v("svg",Xf,[...L[20]||(L[20]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)])]))]),o("h2",Yf,y(I(x).t("start_your_creation")),1),o("p",Zf,y(I(x).t("select_note_or_create_new")),1),o("button",{onClick:L[9]||(L[9]=J=>n.value=!0),class:"futuristic-btn-primary group"},[o("div",Qf,[L[21]||(L[21]=o("svg",{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),o("span",null,y(I(x).t("create_note")),1)])])])]))]))]))}}),tp=Oe(ep,[["__scopeId","data-v-c9c4f0ce"]]),sp={class:"h-full flex flex-col p-6"},op={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},np={class:"futuristic-card text-center group hover:scale-105 transition-transform duration-300"},rp={class:"flex items-center justify-center mb-2"},ip={class:"w-6 h-6 mr-2 opacity-60",style:{color:"var(--theme-text)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ap={class:"text-3xl font-bold futuristic-title mb-1"},lp={class:"futuristic-subtitle"},cp={class:"futuristic-card text-center group hover:scale-105 transition-transform duration-300"},up={class:"flex items-center justify-center mb-2"},dp={class:"w-6 h-6 mr-2",style:{color:"var(--theme-accent)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fp={class:"text-3xl font-bold text-blue-400 mb-1"},pp={class:"futuristic-subtitle"},hp={class:"futuristic-card text-center group hover:scale-105 transition-transform duration-300"},vp={class:"flex items-center justify-center mb-2"},mp={class:"w-6 h-6 mr-2",style:{color:"var(--theme-success)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gp={class:"text-3xl font-bold text-green-400 mb-1"},yp={class:"futuristic-subtitle"},_p={class:"futuristic-card text-center group hover:scale-105 transition-transform duration-300"},bp={class:"flex items-center justify-center mb-2"},wp={class:"w-6 h-6 mr-2",style:{color:"var(--theme-warning)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kp={class:"text-3xl font-bold text-purple-400 mb-1"},xp={class:"futuristic-subtitle"},Cp={class:"futuristic-card mb-8"},$p={class:"futuristic-header mb-6"},Sp={class:"futuristic-title-medium"},Tp={class:"futuristic-subtitle"},Mp={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ap={class:"space-y-4"},Ep={class:"relative"},jp=["placeholder"],Pp=["placeholder"],Np={class:"space-y-4"},Lp={class:"grid grid-cols-2 gap-3"},Ip={value:"low"},Bp={value:"medium"},Op={value:"high"},Dp=["value"],zp={class:"flex gap-3"},Rp={class:"flex items-center justify-center space-x-2"},Fp=["title"],Vp={key:0,class:"futuristic-card mb-8",style:{background:"var(--theme-card-gradient)"}},Hp={class:"flex items-center justify-between mb-6"},Up={class:"futuristic-header"},qp={class:"futuristic-title-small"},Kp={class:"futuristic-subtitle"},Wp={class:"space-y-4"},Gp={class:"block text-sm font-medium futuristic-subtitle mb-3"},Jp={class:"relative"},Xp=["placeholder"],Yp={class:"flex gap-3"},Zp=["disabled"],Qp={class:"flex items-center justify-center space-x-2"},e2={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t2={key:1,class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s2={key:2},o2={key:3},n2={class:"flex items-center space-x-2"},r2={key:0,class:"space-y-2"},i2={class:"text-sm font-medium futuristic-subtitle"},a2={class:"space-y-2 max-h-60 overflow-y-auto"},l2={class:"flex items-start justify-between"},c2={class:"flex-1"},u2={class:"font-medium futuristic-title"},d2={key:0,class:"text-sm futuristic-subtitle mt-1"},f2={class:"flex items-center gap-2 mt-2 text-xs"},p2={key:0,class:"futuristic-tag"},h2={key:1,class:"px-2 py-1 rounded futuristic-subtitle",style:{background:"var(--theme-surface)"}},v2=["onClick"],m2={class:"flex flex-wrap gap-4 mb-8"},g2={class:"flex space-x-2"},y2=["onClick"],_2={value:"all"},b2=["value"],w2={class:"flex-1 overflow-y-auto"},k2={key:0,class:"text-center py-8"},x2={key:1,class:"futuristic-empty-state text-center py-12"},C2={class:"futuristic-icon-container mb-8"},$2={class:"w-24 h-24 mx-auto animate-pulse opacity-40",style:{color:"var(--theme-text)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},S2={class:"futuristic-title-small mb-4"},T2={class:"futuristic-subtitle mb-8"},M2={class:"flex items-center space-x-2"},A2={key:2,class:"space-y-3"},E2={class:"flex items-start space-x-4"},j2={class:"relative mt-1"},P2=["checked","onChange","id"],N2=["for"],L2={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I2={class:"flex-1 min-w-0"},B2={class:"flex items-start justify-between mb-3"},O2={class:"flex items-center space-x-2 ml-4"},D2={class:"futuristic-tag"},z2={class:"flex items-center justify-between text-xs"},R2={class:"flex items-center space-x-4"},F2={class:"flex items-center space-x-1 futuristic-subtitle"},V2={key:0},H2={class:"flex items-center space-x-2"},U2=["onClick","title"],q2=["onClick","title"],K2=Fe({__name:"TodoList",emits:["set-view","start-pomodoro"],setup(e,{emit:t}){const s=t,n=O([]),r=O(""),i=O(""),a=O("medium"),l=O("personal"),u=O(""),d=O(!1),c=O(""),f=O(!1),C=O([]),N=O("all"),S=O("all"),$=O(!1),_=O(x.getLanguage());let m=null;const g=be(()=>(_.value,[x.t("personal"),x.t("work"),x.t("study"),x.t("health"),x.t("other"),x.t("life"),x.t("project")]));be(()=>({low:x.t("low_priority"),medium:x.t("medium_priority"),high:x.t("high_priority")}));const E=async()=>{$.value=!0;try{const ee=await Rt.getAllTodos();n.value=ee}catch(ee){console.error("Failed to fetch todos:",ee),n.value=[{id:1,title:"Complete project documentation",description:"Write technical documentation and user manual",completed:!1,priority:"high",due_date:"2024-01-20",created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z",category:"work"},{id:2,title:"Learn Vue.js",description:"Deep dive into Vue 3 composition API",completed:!0,priority:"medium",created_at:"2024-01-10T09:00:00Z",updated_at:"2024-01-14T16:30:00Z",category:"study"},{id:3,title:"Buy daily necessities",completed:!1,priority:"low",due_date:"2024-01-18",created_at:"2024-01-16T14:00:00Z",updated_at:"2024-01-16T14:00:00Z",category:"personal"}]}finally{$.value=!1}},P=async()=>{if(!r.value.trim())return;const ee={content:r.value,description:i.value||void 0,priority:a.value,due_date:u.value||void 0,category:l.value};try{(await Rt.createTodo(ee)).success&&await E()}catch(R){console.error("Failed to create todo:",R),alert(x.t("create_todo_failed"))}r.value="",i.value="",a.value="medium",l.value="个人",u.value=""},j=async()=>{if(c.value.trim()){f.value=!0;try{const ee=await Ke.generateTodos(c.value);ee.success&&ee.todos&&(C.value=ee.todos)}catch(ee){console.error("AI failed to generate todos:",ee),alert(x.t("ai_generation_failed"))}finally{f.value=!1}}},A=async ee=>{try{const R=await Rt.createTodo({content:ee.title,description:ee.description,priority:ee.priority||"medium",category:ee.category||"个人",due_date:ee.due_date});R.success?(await E(),C.value=C.value.filter(B=>B!==ee)):alert(R.error||x.t("add_todo_failed"))}catch(R){console.error("Failed to add AI todo:",R),alert(x.t("add_todo_failed"))}},F=()=>{C.value=[],c.value=""},K=async ee=>{try{const R=await Rt.toggleTodo(ee.id);if(R&&R.id){const B=R,xe=n.value.findIndex(Ue=>Ue.id===ee.id);xe!==-1&&(n.value[xe]={...B})}else ee.completed=!ee.completed,ee.updated_at=je.toISOString(je.now())}catch(R){console.error("Failed to update todo:",R),alert(x.t("update_todo_failed"))}},L=async ee=>{if(confirm(x.t("confirm_delete_todo")))try{const R=await Rt.deleteTodo(ee);n.value=n.value.filter(B=>B.id!==ee)}catch(R){console.error("Failed to delete todo:",R),alert(x.t("delete_todo_failed"))}},J=ee=>{s("start-pomodoro",{taskId:ee.id.toString(),taskTitle:ee.title}),s("set-view","pomodoro")},ae=()=>{r.value="";const ee=document.querySelector('input[placeholder*="task"]');ee&&ee.focus()},oe=be(()=>{let ee=n.value;return N.value==="pending"?ee=ee.filter(R=>!R.completed):N.value==="completed"&&(ee=ee.filter(R=>R.completed)),S.value!=="all"&&(ee=ee.filter(R=>R.category===S.value)),ee.sort((R,B)=>{if(R.completed!==B.completed)return R.completed?1:-1;const xe={high:3,medium:2,low:1};return xe[R.priority]!==xe[B.priority]?xe[B.priority]-xe[R.priority]:new Date(B.created_at).getTime()-new Date(R.created_at).getTime()})}),me=be(()=>{const ee=n.value.length,R=n.value.filter(Ue=>Ue.completed).length,B=ee-R,xe=ee>0?Math.round(R/ee*100):0;return{total:ee,completed:R,pending:B,completionRate:xe}}),Ee=ee=>{const B=x.getLanguage()==="zh-CN"?"zh-CN":"en-US";return je.formatDate(ee,B)},De=ee=>je.isOverdue(ee);return Je(()=>{E(),m=x.addListener(ee=>{_.value=ee})}),Ut(()=>{m&&m()}),(ee,R)=>(h(),v("div",sp,[o("div",op,[o("div",np,[o("div",rp,[(h(),v("svg",ip,[...R[9]||(R[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])]))]),o("div",ap,y(me.value.total),1),o("div",lp,y(I(x).t("total_tasks")),1)]),o("div",cp,[o("div",up,[(h(),v("svg",dp,[...R[10]||(R[10]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),o("div",fp,y(me.value.pending),1),o("div",pp,y(I(x).t("pending")),1)]),o("div",hp,[o("div",vp,[(h(),v("svg",mp,[...R[11]||(R[11]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))]),o("div",gp,y(me.value.completed),1),o("div",yp,y(I(x).t("completed")),1)]),o("div",_p,[o("div",bp,[(h(),v("svg",wp,[...R[12]||(R[12]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])]))]),o("div",kp,y(me.value.completionRate)+"%",1),o("div",xp,y(I(x).t("completion_rate")),1)])]),o("div",Cp,[o("div",$p,[o("h2",Sp,y(I(x).t("create_new_task")),1),o("div",Tp,y(I(x).t("add_your_todos")),1)]),o("div",Mp,[o("div",Ap,[o("div",Ep,[he(o("input",{"onUpdate:modelValue":R[0]||(R[0]=B=>r.value=B),type:"text",placeholder:I(x).t("enter_task_title")+"...",class:"futuristic-input w-full",onKeyup:zo(P,["enter"])},null,40,jp),[[Ae,r.value]]),R[13]||(R[13]=o("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 opacity-40",style:{color:"var(--theme-text)"}},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))]),he(o("textarea",{"onUpdate:modelValue":R[1]||(R[1]=B=>i.value=B),placeholder:I(x).t("add_task_description_optional")+"...",class:"futuristic-input w-full h-24 resize-none"},null,8,Pp),[[Ae,i.value]])]),o("div",Np,[o("div",Lp,[he(o("select",{"onUpdate:modelValue":R[2]||(R[2]=B=>a.value=B),class:"futuristic-input"},[o("option",Ip,"🟢 "+y(I(x).t("low_priority")),1),o("option",Bp,"🟡 "+y(I(x).t("medium_priority")),1),o("option",Op,"🔴 "+y(I(x).t("high_priority")),1)],512),[[et,a.value]]),he(o("select",{"onUpdate:modelValue":R[3]||(R[3]=B=>l.value=B),class:"futuristic-input"},[(h(!0),v(de,null,ge(g.value,B=>(h(),v("option",{key:B,value:B},y(B),9,Dp))),128))],512),[[et,l.value]])]),he(o("input",{"onUpdate:modelValue":R[4]||(R[4]=B=>u.value=B),type:"date",class:"futuristic-input w-full"},null,512),[[Ae,u.value]]),o("div",zp,[o("button",{onClick:P,class:"futuristic-btn-primary flex-1 group"},[o("div",Rp,[R[14]||(R[14]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),o("span",null,y(I(x).t("add_task")),1)])]),o("button",{onClick:R[5]||(R[5]=B=>d.value=!d.value),class:ne(["futuristic-btn-secondary group px-4",d.value?"futuristic-btn-active":""]),title:I(x).t("ai_smart_generate")},[...R[15]||(R[15]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)])],10,Fp)])])])]),d.value?(h(),v("div",Vp,[o("div",Hp,[o("div",Up,[o("h3",qp,y(I(x).t("ai_smart_assistant")),1),o("div",Kp,y(I(x).t("let_ai_help_plan_tasks")),1)]),o("button",{onClick:R[6]||(R[6]=B=>d.value=!1),class:"futuristic-btn-danger hover:scale-110 transition-transform"},[...R[16]||(R[16]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",Wp,[o("div",null,[o("label",Gp,y(I(x).t("describe_your_tasks_or_goals")),1),o("div",Jp,[he(o("textarea",{"onUpdate:modelValue":R[7]||(R[7]=B=>c.value=B),placeholder:I(x).t("example_prepare_presentation"),class:"futuristic-input w-full h-24 resize-none"},null,8,Xp),[[Ae,c.value]]),R[17]||(R[17]=o("div",{class:"absolute bottom-3 right-3 opacity-40",style:{color:"var(--theme-text)"}},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1))])]),o("div",Yp,[o("button",{onClick:j,disabled:!c.value.trim()||f.value,class:"futuristic-btn-primary flex-1 group disabled:opacity-50 disabled:cursor-not-allowed"},[o("div",Qp,[f.value?(h(),v("svg",e2,[...R[18]||(R[18]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(h(),v("svg",t2,[...R[19]||(R[19]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])),f.value?(h(),v("span",s2,y(I(x).t("generating"))+"...",1)):(h(),v("span",o2,y(I(x).t("generate_tasks")),1))])],8,Zp),C.value.length>0?(h(),v("button",{key:0,onClick:F,class:"futuristic-btn-danger group"},[o("div",n2,[R[20]||(R[20]=o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),o("span",null,y(I(x).t("clear")),1)])])):G("",!0)]),C.value.length>0?(h(),v("div",r2,[o("h4",i2,y(I(x).t("ai_generated_todos"))+"：",1),o("div",a2,[(h(!0),v(de,null,ge(C.value,(B,xe)=>(h(),v("div",{key:xe,class:"p-3 rounded border",style:{background:"var(--theme-surface)","border-color":"var(--theme-border)"}},[o("div",l2,[o("div",c2,[o("h5",u2,y(B.title),1),B.description?(h(),v("p",d2,y(B.description),1)):G("",!0),o("div",f2,[o("span",{class:ne(["px-2 py-1 rounded border",{"text-red-400 border-red-400":B.priority==="high","text-yellow-400 border-yellow-400":B.priority==="medium","text-green-400 border-green-400":B.priority==="low"}])},y(B.priority==="high"?"高":B.priority==="medium"?"中":"低"),3),B.category?(h(),v("span",p2,y(B.category),1)):G("",!0),B.due_date?(h(),v("span",h2,[R[21]||(R[21]=o("svg",{class:"w-4 h-4 inline",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})],-1)),Y(" "+y(B.due_date),1)])):G("",!0)])]),o("button",{onClick:Ue=>A(B),class:"ml-3 futuristic-btn-primary px-3 py-1 text-sm"},y(I(x).t("add")),9,v2)])]))),128))])])):G("",!0)])])):G("",!0),o("div",m2,[o("div",g2,[(h(),v(de,null,ge(["all","pending","completed"],B=>o("button",{key:B,onClick:xe=>N.value=B,class:ne(["futuristic-btn-secondary transition-all duration-300",N.value===B?"futuristic-btn-active":""])},y(B==="all"?I(x).t("all"):B==="pending"?I(x).t("pending"):I(x).t("completed")),11,y2)),64))]),he(o("select",{"onUpdate:modelValue":R[8]||(R[8]=B=>S.value=B),class:"futuristic-input min-w-32"},[o("option",_2,y(I(x).t("all_categories")),1),(h(!0),v(de,null,ge(g.value,B=>(h(),v("option",{key:B,value:B},y(B),9,b2))),128))],512),[[et,S.value]])]),o("div",w2,[$.value?(h(),v("div",k2,[...R[22]||(R[22]=[o("div",{class:"animate-pulse futuristic-subtitle"},"加载中...",-1)])])):oe.value.length===0?(h(),v("div",x2,[o("div",C2,[(h(),v("svg",$2,[...R[23]||(R[23]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"},null,-1)])]))]),o("h3",S2,y(I(x).t("no_tasks")),1),o("p",T2,y(I(x).t("add_new_todo_start_manage")),1),o("button",{onClick:ae,class:"futuristic-btn-primary group"},[o("div",M2,[R[24]||(R[24]=o("svg",{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),o("span",null,y(I(x).t("create_first_task")),1)])])])):(h(),v("div",A2,[(h(!0),v(de,null,ge(oe.value,B=>(h(),v("div",{key:B.id,class:ne(["futuristic-card mb-6 group hover:scale-[1.02] transition-all duration-300",B.completed?"opacity-60":""])},[o("div",E2,[o("div",j2,[o("input",{type:"checkbox",checked:B.completed,onChange:xe=>K(B),class:"sr-only",id:`todo-${B.id}`},null,40,P2),o("label",{for:`todo-${B.id}`,class:ne(["flex items-center justify-center w-6 h-6 rounded-full border-2 cursor-pointer transition-all duration-300",B.completed?"futuristic-btn-primary border-0":"hover:scale-110 transition-all duration-300 border-2 opacity-50 hover:opacity-100"])},[B.completed?(h(),v("svg",L2,[...R[25]||(R[25]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):G("",!0)],10,N2)]),o("div",I2,[o("div",B2,[o("h3",{class:ne(["font-semibold text-lg leading-tight",B.completed?"line-through opacity-50":"futuristic-title"])},y(B.title),3),o("div",O2,[o("span",{class:ne(["px-3 py-1 text-xs rounded-full font-medium flex items-center space-x-1",B.priority==="high"?"bg-red-500/20 text-red-400 border border-red-500/30":B.priority==="medium"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"])},[o("span",null,y(B.priority==="high"?"🔴":B.priority==="medium"?"🟡":"🟢"),1),o("span",null,y(B.priority==="high"?I(x).t("high_priority"):B.priority==="medium"?I(x).t("medium_priority"):I(x).t("low_priority")),1)],2),o("span",D2,y(B.category),1)])]),B.description?(h(),v("p",{key:0,class:ne(["text-sm mb-4 leading-relaxed",B.completed?"opacity-40":"futuristic-subtitle"])},y(B.description),3)):G("",!0),o("div",z2,[o("div",R2,[o("span",F2,[R[26]||(R[26]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,y(Ee(B.created_at)),1)]),B.due_date?(h(),v("span",{key:0,class:ne(["flex items-center space-x-1",De(B.due_date)&&!B.completed?"text-red-400":"futuristic-subtitle"])},[R[28]||(R[28]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),o("span",null,y(Ee(B.due_date)),1),De(B.due_date)&&!B.completed?(h(),v("span",V2,[...R[27]||(R[27]=[o("svg",{class:"w-4 h-4 inline text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})],-1)])])):G("",!0)],2)):G("",!0)])])]),o("div",H2,[B.completed?G("",!0):(h(),v("button",{key:0,onClick:xe=>J(B),class:"futuristic-btn-primary group-hover:opacity-100 opacity-60 hover:scale-110 transition-all duration-300 p-2",title:I(x).t("start_focus_session")},[...R[29]||(R[29]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],8,U2)),o("button",{onClick:xe=>L(B.id),class:"futuristic-btn-danger group-hover:opacity-100 opacity-60 hover:scale-110 transition-all duration-300 p-2",title:I(x).t("delete_task")},[...R[30]||(R[30]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,q2)])])],2))),128))]))])]))}}),W2=Oe(K2,[["__scopeId","data-v-b6c32e85"]]),G2={class:"modal-header"},J2={class:"form-group"},X2={class:"form-group"},Y2={class:"char-count"},Z2={class:"modal-footer"},Q2=["disabled"],eh=["disabled"],th={key:0,class:"mr-1"},sh={key:1,class:"loading-spinner-small mr-1"},oh=Fe({__name:"EditProjectModal",props:{project:{}},emits:["close","project-updated"],setup(e,{emit:t}){const s=e,n=t,r=O(!1),i=yt({name:"",description:""});Je(()=>{i.name=s.project.name,i.description=s.project.description||""});const a=async()=>{if(!i.name.trim()){u("请输入项目名称","error");return}try{r.value=!0;const c=(await ie.put(`/api/projects/${s.project.id}`,{name:i.name.trim(),description:i.description.trim()||null})).data;n("project-updated",c)}catch(d){console.error("更新项目失败:",d),u("更新项目失败，请稍后重试","error")}finally{r.value=!1}},l=d=>{d.target===d.currentTarget&&n("close")},u=(d,c="info")=>{const f=new CustomEvent("setting-notification",{detail:{message:d,type:c}});window.dispatchEvent(f)};return(d,c)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:l},[o("div",{class:"modal-content",onClick:c[4]||(c[4]=ze(()=>{},["stop"]))},[o("div",G2,[c[5]||(c[5]=o("h3",{class:"modal-title"},"编辑项目",-1)),o("button",{onClick:c[0]||(c[0]=f=>d.$emit("close")),class:"close-btn"}," ✕ ")]),o("form",{onSubmit:ze(a,["prevent"]),class:"modal-body"},[o("div",J2,[c[6]||(c[6]=o("label",{for:"edit-project-name",class:"form-label"},"项目名称 *",-1)),he(o("input",{id:"edit-project-name","onUpdate:modelValue":c[1]||(c[1]=f=>i.name=f),type:"text",class:"futuristic-input",placeholder:"输入项目名称",required:"",maxlength:"100"},null,512),[[Ae,i.name]])]),o("div",X2,[c[7]||(c[7]=o("label",{for:"edit-project-description",class:"form-label"},"项目描述",-1)),he(o("textarea",{id:"edit-project-description","onUpdate:modelValue":c[2]||(c[2]=f=>i.description=f),class:"futuristic-textarea",placeholder:"描述项目的目标和范围（可选）",rows:"4",maxlength:"500"},null,512),[[Ae,i.description]]),o("div",Y2,y(i.description.length)+"/500 ",1)]),o("div",Z2,[o("button",{type:"button",onClick:c[3]||(c[3]=f=>d.$emit("close")),class:"futuristic-btn-ghost",disabled:r.value}," 取消 ",8,Q2),o("button",{type:"submit",class:"futuristic-btn-primary",disabled:r.value||!i.name.trim()},[r.value?(h(),v("div",sh)):(h(),v("span",th,"💾")),Y(" "+y(r.value?"保存中...":"保存更改"),1)],8,eh)])],32)])])]))}}),nh=Oe(oh,[["__scopeId","data-v-99a1f595"]]),rh={class:"modal-header"},ih={class:"modal-body"},ah={key:0,class:"planning-intro"},lh={class:"form-group"},ch={class:"char-count"},uh={key:1,class:"planning-progress"},dh={class:"ai-thinking"},fh={class:"thinking-text"},ph={class:"progress-bar"},hh={key:2,class:"planning-result"},vh={class:"result-header"},mh={class:"result-stats"},gh={class:"stat-item"},yh={class:"stat-item"},_h={class:"result-content"},bh={key:0,class:"section"},wh={key:1,class:"section"},kh={class:"task-list"},xh={class:"task-header"},Ch={class:"task-estimate"},$h={class:"task-description"},Sh={key:0,class:"task-dependencies"},Th={key:2,class:"section"},Mh={class:"recommendations"},Ah={class:"modal-footer"},Eh=["disabled"],jh=["disabled"],Ph={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},Nh={key:1,class:"loading-spinner-small mr-1"},Lh=["disabled"],Ih=["disabled"],Bh=Fe({__name:"AiPlanningModal",props:{project:{}},emits:["close","planning-applied"],setup(e,{emit:t}){const s=e,n=t,r=O(""),i=O(!1),a=O(!1),l=O(null),u=O(0),d=O("正在分析项目需求..."),c=["正在分析项目需求...","识别关键任务和里程碑...","评估任务复杂度和依赖关系...","优化任务优先级和时间安排...","生成最佳实践建议..."],f=async()=>{if(!r.value.trim()){_("请输入项目需求描述","error");return}i.value=!0,u.value=0;const m=setInterval(()=>{if(u.value<90){u.value+=Math.random()*15;const g=Math.floor(u.value/100*c.length);d.value=c[Math.min(g,c.length-1)]}},800);try{const g=await ie.post("/api/ai/plan-project",{project_id:s.project.id,project_name:s.project.name,project_description:s.project.description,requirements:r.value.trim()});clearInterval(m),u.value=100,setTimeout(()=>{l.value=g.data,i.value=!1},500)}catch(g){clearInterval(m),i.value=!1,console.error("AI 规划失败:",g),l.value={overview:`基于您的需求，我为"${s.project.name}"项目制定了详细的执行计划。该计划包含了关键任务的分解、优先级排序和时间估算。`,tasks:[{title:"项目初始化和环境搭建",description:"设置开发环境、配置工具链、创建项目结构",priority:"high",estimated_time:"1-2 天"},{title:"核心功能开发",description:"实现项目的主要功能模块和业务逻辑",priority:"high",estimated_time:"5-7 天",dependencies:["项目初始化和环境搭建"]},{title:"用户界面设计和实现",description:"设计用户界面，实现前端交互功能",priority:"medium",estimated_time:"3-4 天"},{title:"测试和质量保证",description:"编写测试用例，进行功能测试和性能优化",priority:"medium",estimated_time:"2-3 天",dependencies:["核心功能开发","用户界面设计和实现"]},{title:"部署和发布",description:"配置生产环境，部署应用并进行发布",priority:"low",estimated_time:"1 天",dependencies:["测试和质量保证"]}],estimated_duration:"2-3 周",recommendations:["建议采用敏捷开发方法，分阶段交付","优先实现核心功能，后续迭代完善细节","建立持续集成和自动化测试流程","定期进行代码审查和技术债务清理"]},_("AI 规划完成（使用模拟数据）","info")}},C=async()=>{if(!l.value?.tasks){_("没有可应用的规划结果","error");return}try{a.value=!0;for(const m of l.value.tasks)await ie.post("/api/tasks",{project_id:s.project.id,title:m.title,description:m.description,priority:m.priority,status:"todo"});_(`成功创建 ${l.value.tasks.length} 个任务`,"success"),n("planning-applied")}catch(m){console.error("应用规划失败:",m),_("应用规划失败，请稍后重试","error")}finally{a.value=!1}},N=()=>{l.value=null,r.value="",u.value=0},S=m=>{switch(m){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"⚪"}},$=m=>{m.target===m.currentTarget&&n("close")},_=(m,g="info")=>{const E=new CustomEvent("setting-notification",{detail:{message:m,type:g}});window.dispatchEvent(E)};return Je(()=>{s.project.description&&(r.value=s.project.description)}),(m,g)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:$},[o("div",{class:"modal-content",onClick:g[4]||(g[4]=ze(()=>{},["stop"]))},[o("div",rh,[g[5]||(g[5]=o("h3",{class:"modal-title"},[o("svg",{class:"w-6 h-6 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),Y(" AI 项目规划 ")],-1)),o("button",{onClick:g[0]||(g[0]=E=>m.$emit("close")),class:"close-btn"}," ✕ ")]),o("div",ih,[!i.value&&!l.value?(h(),v("div",ah,[g[7]||(g[7]=o("div",{class:"ai-icon"},[o("svg",{class:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),g[8]||(g[8]=o("h4",null,"AI 智能项目规划",-1)),g[9]||(g[9]=o("p",null,"AI 将为您的项目生成详细的任务规划，包括：",-1)),g[10]||(g[10]=o("ul",{class:"feature-list"},[o("li",null,[o("svg",{class:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})]),Y(" 任务分解与优先级排序 ")]),o("li",null,[o("svg",{class:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),Y(" 时间估算与里程碑设置 ")]),o("li",null,[o("svg",{class:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})]),Y(" 任务依赖关系分析 ")]),o("li",null,[o("svg",{class:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),Y(" 最佳实践建议 ")])],-1)),o("div",lh,[g[6]||(g[6]=o("label",{for:"planning-requirements",class:"form-label"},"项目需求描述",-1)),he(o("textarea",{id:"planning-requirements","onUpdate:modelValue":g[1]||(g[1]=E=>r.value=E),class:"futuristic-textarea",placeholder:"请详细描述您的项目需求、目标和约束条件...",rows:"4",maxlength:"1000"},null,512),[[Ae,r.value]]),o("div",ch,y(r.value.length)+"/1000 ",1)])])):G("",!0),i.value?(h(),v("div",uh,[o("div",dh,[g[11]||(g[11]=o("div",{class:"thinking-animation"},[o("div",{class:"brain-icon"},"🧠"),o("div",{class:"thinking-dots"},[o("span"),o("span"),o("span")])],-1)),g[12]||(g[12]=o("h4",null,"AI 正在分析您的项目...",-1)),o("p",fh,y(d.value),1),o("div",ph,[o("div",{class:"progress-fill",style:He({width:u.value+"%"})},null,4)])])])):G("",!0),l.value?(h(),v("div",hh,[o("div",vh,[g[14]||(g[14]=o("h4",null,[o("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),Y(" AI 规划结果")],-1)),o("div",mh,[o("span",gh,[g[13]||(g[13]=o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)),Y(" "+y(l.value.tasks?.length||0)+" 个任务",1)]),o("span",yh,"⏱ 预计 "+y(l.value.estimated_duration||"N/A"),1)])]),o("div",_h,[l.value.overview?(h(),v("div",bh,[g[15]||(g[15]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),o("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),Y(" 项目概述")],-1)),o("p",null,y(l.value.overview),1)])):G("",!0),l.value.tasks&&l.value.tasks.length>0?(h(),v("div",wh,[g[16]||(g[16]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),Y(" 任务列表")],-1)),o("div",kh,[(h(!0),v(de,null,ge(l.value.tasks,(E,P)=>(h(),v("div",{key:P,class:"task-item"},[o("div",xh,[o("span",{class:ne(["task-priority",`priority-${E.priority}`])},y(S(E.priority)),3),o("h6",null,y(E.title),1),o("span",Ch,y(E.estimated_time||"待估算"),1)]),o("p",$h,y(E.description),1),E.dependencies?(h(),v("div",Sh,[o("small",null,"依赖: "+y(E.dependencies.join(", ")),1)])):G("",!0)]))),128))])])):G("",!0),l.value.recommendations?(h(),v("div",Th,[g[17]||(g[17]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),Y(" 建议")],-1)),o("ul",Mh,[(h(!0),v(de,null,ge(l.value.recommendations,(E,P)=>(h(),v("li",{key:P},y(E),1))),128))])])):G("",!0)])])):G("",!0)]),o("div",Ah,[!i.value&&!l.value?(h(),v("button",{key:0,type:"button",onClick:g[2]||(g[2]=E=>m.$emit("close")),class:"futuristic-btn-ghost"}," 取消 ")):G("",!0),!i.value&&!l.value?(h(),v("button",{key:1,onClick:f,class:"futuristic-btn-primary",disabled:!r.value.trim()},[...g[18]||(g[18]=[o("span",{class:"mr-1"},null,-1),Y(" 开始 AI 规划 ",-1)])],8,Eh)):G("",!0),l.value?(h(),v("button",{key:2,onClick:C,class:"futuristic-btn-primary",disabled:a.value},[a.value?(h(),v("div",Nh)):(h(),v("svg",Ph,[...g[19]||(g[19]=[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])),Y(" "+y(a.value?"应用中...":"应用规划"),1)],8,jh)):G("",!0),l.value?(h(),v("button",{key:3,onClick:N,class:"futuristic-btn-ghost",disabled:a.value}," 重新规划 ",8,Lh)):G("",!0),o("button",{onClick:g[3]||(g[3]=E=>m.$emit("close")),class:"futuristic-btn-ghost",disabled:a.value}," 取消 ",8,Ih)])])])]))}}),Oh=Oe(Bh,[["__scopeId","data-v-43e06d13"]]),Dh={class:"project-selector"},zh={class:"selector-header"},Rh={class:"selector-controls"},Fh={class:"project-dropdown"},Vh=["value"],Hh=["disabled"],Uh={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},qh={key:1,class:"loading-spinner-small mr-1"},Kh={key:0,class:"project-info-card"},Wh={class:"project-details"},Gh={class:"project-name"},Jh={key:0,class:"project-description"},Xh={class:"project-meta"},Yh={class:"meta-item"},Zh={class:"meta-item"},Qh={class:"project-actions"},ev=Fe({__name:"ProjectSelector",props:{projects:{},currentProject:{}},emits:["project-selected","create-project","project-deleted","project-updated"],setup(e,{emit:t}){const s=e,n=t,r=O(s.currentProject?.id||""),i=O(!1),a=O(!1),l=O(!1);console.log("ProjectSelector initialized, showAiModal:",a.value),Re(()=>s.currentProject,$=>{r.value=$?.id||""});const u=()=>{if(r.value){const $=s.projects.find(_=>_.id===r.value);$&&n("project-selected",$)}},d=$=>{i.value=!1,n("project-updated",$),n("project-selected",$),S("项目更新成功","success")},c=async()=>{if(s.currentProject&&confirm(`确定要删除项目 "${s.currentProject.name}" 吗？此操作不可撤销。`))try{await ie.delete(`/api/projects/${s.currentProject.id}`),S("项目删除成功","success"),n("project-deleted",s.currentProject.id)}catch($){console.error("删除项目失败:",$),S("删除项目失败","error")}},f=()=>{a.value=!0},C=()=>{a.value=!1,S("AI规划已成功应用","success"),window.dispatchEvent(new CustomEvent("reload-tasks"))},N=$=>new Date($).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),S=($,_="info")=>{const m=new CustomEvent("setting-notification",{detail:{message:$,type:_}});window.dispatchEvent(m)};return($,_)=>(h(),v("div",Dh,[o("div",zh,[_[8]||(_[8]=o("h2",{class:"futuristic-title"},"项目管理",-1)),o("div",Rh,[o("div",Fh,[he(o("select",{"onUpdate:modelValue":_[0]||(_[0]=m=>r.value=m),onChange:u,class:"futuristic-select"},[_[5]||(_[5]=o("option",{value:"",disabled:""},"选择项目",-1)),(h(!0),v(de,null,ge($.projects,m=>(h(),v("option",{key:m.id,value:m.id},y(m.name)+" ("+y(m.task_count||0)+" 个任务) ",9,Vh))),128))],544),[[et,r.value]])]),o("button",{onClick:_[1]||(_[1]=m=>$.$emit("create-project")),class:"futuristic-btn-primary create-btn",title:"创建新项目"},[..._[6]||(_[6]=[o("span",{class:"mr-1"},"+",-1),Y(" 新建项目 ",-1)])]),$.currentProject?(h(),v("button",{key:0,onClick:f,class:"futuristic-btn-secondary ai-btn",disabled:l.value,title:"AI智能规划项目任务"},[l.value?(h(),v("div",qh)):(h(),v("svg",Uh,[..._[7]||(_[7]=[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},null,-1)])])),Y(" "+y(l.value?"规划中...":"AI规划"),1)],8,Hh)):G("",!0)])]),$.currentProject?(h(),v("div",Kh,[o("div",Wh,[o("h3",Gh,y($.currentProject.name),1),$.currentProject.description?(h(),v("p",Jh,y($.currentProject.description),1)):G("",!0),o("div",Xh,[o("span",Yh,[_[9]||(_[9]=o("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0V6a2 2 0 012-2h4a2 2 0 012 2v1m-6 0h6m-6 0l-.5 8.5A2 2 0 0013.5 21h-3A2 2 0 018.5 18.5L8 7z"})],-1)),Y(" 创建于 "+y(N($.currentProject.created_at)),1)]),o("span",Zh,[_[10]||(_[10]=o("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 7h.01M9 16h.01M9 12h.01m3-5h3m-3 4h3m-3 4h3"})],-1)),Y(" "+y($.currentProject.task_count||0)+" 个任务 ",1)])])]),o("div",Qh,[o("button",{onClick:_[2]||(_[2]=m=>i.value=!0),class:"futuristic-btn-ghost",title:"编辑项目"},[..._[11]||(_[11]=[o("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Y(" 编辑 ",-1)])]),o("button",{onClick:c,class:"futuristic-btn-danger",title:"删除项目"},[..._[12]||(_[12]=[o("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 删除 ",-1)])])])])):G("",!0),i.value&&$.currentProject?(h(),Ie(nh,{key:1,project:$.currentProject,onClose:_[3]||(_[3]=m=>i.value=!1),onProjectUpdated:d},null,8,["project"])):G("",!0),a.value&&$.currentProject?(h(),Ie(Oh,{key:2,project:$.currentProject,onClose:_[4]||(_[4]=m=>a.value=!1),onPlanningApplied:C},null,8,["project"])):G("",!0)]))}}),tv=Oe(ev,[["__scopeId","data-v-1afe141c"]]),sv={class:"modal-header"},ov={class:"form-group"},nv={class:"form-group"},rv={class:"char-count"},iv={class:"form-row"},av={class:"form-group"},lv={class:"form-group"},cv={class:"modal-footer"},uv=["disabled"],dv=["disabled"],fv={key:0,class:"mr-1"},pv={key:1,class:"loading-spinner-small mr-1"},hv=Fe({__name:"EditTaskModal",props:{task:{}},emits:["close","task-updated"],setup(e,{emit:t}){const s=e,n=t,r=O(!1),i=yt({title:"",description:"",status:"todo",priority:"medium"});Je(()=>{i.title=s.task.title,i.description=s.task.description||"",i.status=s.task.status,i.priority=s.task.priority});const a=async()=>{if(!i.title.trim()){u("请输入任务标题","error");return}try{r.value=!0;const d={...s.task,title:i.title.trim(),description:i.description.trim()||null,status:i.status,priority:i.priority,updated_at:new Date().toISOString()},c=await ie.put(`/api/tasks/${s.task.id}`,d);n("task-updated",c.data),u("任务更新成功","success")}catch(d){console.error("更新任务失败:",d),u("更新任务失败，请稍后重试","error")}finally{r.value=!1}},l=d=>{d.target===d.currentTarget&&n("close")},u=(d,c="info")=>{const f=new CustomEvent("setting-notification",{detail:{message:d,type:c}});window.dispatchEvent(f)};return(d,c)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:l},[o("div",{class:"modal-content",onClick:c[6]||(c[6]=ze(()=>{},["stop"]))},[o("div",sv,[c[7]||(c[7]=o("h3",{class:"modal-title"},"编辑任务",-1)),o("button",{onClick:c[0]||(c[0]=f=>d.$emit("close")),class:"close-btn"}," ✕ ")]),o("form",{onSubmit:ze(a,["prevent"]),class:"modal-body"},[o("div",ov,[c[8]||(c[8]=o("label",{for:"edit-task-title",class:"form-label"},"任务标题 *",-1)),he(o("input",{id:"edit-task-title","onUpdate:modelValue":c[1]||(c[1]=f=>i.title=f),type:"text",class:"futuristic-input",placeholder:"输入任务标题",required:"",maxlength:"200"},null,512),[[Ae,i.title]])]),o("div",nv,[c[9]||(c[9]=o("label",{for:"edit-task-description",class:"form-label"},"任务描述",-1)),he(o("textarea",{id:"edit-task-description","onUpdate:modelValue":c[2]||(c[2]=f=>i.description=f),class:"futuristic-textarea",placeholder:"详细描述任务内容和要求（可选）",rows:"4",maxlength:"1000"},null,512),[[Ae,i.description]]),o("div",rv,y(i.description.length)+"/1000 ",1)]),o("div",iv,[o("div",av,[c[11]||(c[11]=o("label",{for:"edit-task-status",class:"form-label"},"状态",-1)),he(o("select",{id:"edit-task-status","onUpdate:modelValue":c[3]||(c[3]=f=>i.status=f),class:"futuristic-select"},[...c[10]||(c[10]=[o("option",{value:"todo"},"📋 待办",-1),o("option",{value:"in_progress"},"🔄 进行中",-1),o("option",{value:"done"},"✅ 已完成",-1)])],512),[[et,i.status]])]),o("div",lv,[c[13]||(c[13]=o("label",{for:"edit-task-priority",class:"form-label"},"优先级",-1)),he(o("select",{id:"edit-task-priority","onUpdate:modelValue":c[4]||(c[4]=f=>i.priority=f),class:"futuristic-select"},[...c[12]||(c[12]=[o("option",{value:"low"},"🟢 低优先级",-1),o("option",{value:"medium"},"🟡 中优先级",-1),o("option",{value:"high"},"🔴 高优先级",-1)])],512),[[et,i.priority]])])]),o("div",cv,[o("button",{type:"button",onClick:c[5]||(c[5]=f=>d.$emit("close")),class:"futuristic-btn-ghost",disabled:r.value}," 取消 ",8,uv),o("button",{type:"submit",class:"futuristic-btn-primary",disabled:r.value||!i.title.trim()},[r.value?(h(),v("div",pv)):(h(),v("span",fv,"💾")),Y(" "+y(r.value?"保存中...":"保存更改"),1)],8,dv)])],32)])])]))}}),vv=Oe(hv,[["__scopeId","data-v-c7ee8546"]]),mv={class:"modal-header"},gv={class:"modal-body"},yv={key:0,class:"enhance-intro"},_v={class:"current-task"},bv={class:"task-preview"},wv={key:0},kv={key:1,class:"no-description"},xv={class:"form-group"},Cv={class:"char-count"},$v={key:1,class:"enhancing-progress"},Sv={class:"ai-thinking"},Tv={class:"thinking-text"},Mv={class:"progress-bar"},Av={key:2,class:"enhance-result"},Ev={class:"result-header"},jv={class:"result-stats"},Pv={class:"stat-item"},Nv={class:"stat-item"},Lv={class:"stat-item"},Iv={class:"result-content"},Bv={key:0,class:"section"},Ov={class:"enhanced-description"},Dv={key:1,class:"section"},zv={class:"subtask-list"},Rv={class:"subtask-header"},Fv={class:"subtask-number"},Vv={class:"subtask-time"},Hv={class:"subtask-description"},Uv={key:2,class:"section"},qv={class:"tips-list"},Kv={key:3,class:"section"},Wv={class:"resources-list"},Gv={class:"resource-type"},Jv={class:"resource-name"},Xv={class:"resource-description"},Yv={class:"modal-footer"},Zv=["disabled"],Qv={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},em={key:1,class:"loading-spinner-small mr-1"},tm=["disabled"],sm=Fe({__name:"AiEnhanceModal",props:{task:{}},emits:["close","task-enhanced"],setup(e,{emit:t}){const s=e,n=t,r=O(""),i=O(!1),a=O(!1),l=O(null),u=O(0),d=O("正在分析任务内容..."),c=["正在分析任务内容...","识别关键步骤和依赖...","评估复杂度和时间需求...","生成子任务分解方案...","搜索相关资源和工具...","优化实施建议..."],f=async()=>{i.value=!0,u.value=0;const _=setInterval(()=>{if(u.value<90){u.value+=Math.random()*12;const m=Math.floor(u.value/100*c.length);d.value=c[Math.min(m,c.length-1)]}},600);try{const m=await ie.post("/api/ai/enhance-task",{task_id:s.task.id,task_title:s.task.title,task_description:s.task.description,additional_context:r.value.trim()});clearInterval(_),u.value=100,setTimeout(()=>{l.value=m.data,i.value=!1},500)}catch(m){clearInterval(_),i.value=!1,console.error("AI 增强失败:",m),l.value={enhanced_description:`${s.task.title}是一个重要的任务，需要系统性的方法来完成。建议将其分解为多个可管理的子任务，并按优先级顺序执行。在实施过程中，应该注意质量控制和进度跟踪，确保最终交付符合预期目标。`,subtasks:[{title:"需求分析和规划",description:"详细分析任务需求，制定实施计划和时间表",estimated_time:"1-2小时"},{title:"准备工作和资源收集",description:"收集必要的工具、资料和资源，搭建工作环境",estimated_time:"30-60分钟"},{title:"核心实施",description:"执行任务的主要工作内容，完成核心功能",estimated_time:"2-4小时"},{title:"测试和验证",description:"对完成的工作进行测试和质量检查",estimated_time:"30-60分钟"},{title:"优化和完善",description:"根据测试结果进行优化和最终完善",estimated_time:"30分钟"}],estimated_time:"4-8小时",difficulty:"中等",implementation_tips:["建议采用迭代式开发方法，分阶段完成","在开始前确保所有依赖和前置条件都已满足","定期保存工作进度，避免意外丢失","遇到问题时及时寻求帮助或查阅相关文档","完成后进行充分的测试和验证"],resources:[{type:"📚 文档",name:"最佳实践指南",description:"相关领域的最佳实践和经验总结"},{type:"工具",name:"项目管理工具",description:"用于任务跟踪和进度管理的工具"},{type:"👥 社区",name:"技术论坛",description:"可以寻求帮助和交流经验的社区平台"}]},$("AI 增强完成（使用模拟数据）","info")}},C=async()=>{if(!l.value){$("没有可应用的增强结果","error");return}try{a.value=!0;const _={...s.task,description:l.value.enhanced_description||s.task.description,updated_at:new Date().toISOString()},m=await ie.put(`/api/tasks/${s.task.id}`,_);if(l.value.subtasks&&l.value.subtasks.length>0)for(const g of l.value.subtasks)await ie.post("/api/tasks",{project_id:s.task.project_id,title:`${s.task.title} - ${g.title}`,description:g.description,priority:"medium",status:"todo"});n("task-enhanced",m.data),$("任务增强应用成功","success")}catch(_){console.error("应用增强失败:",_),$("应用增强失败，请稍后重试","error")}finally{a.value=!1}},N=()=>{l.value=null,r.value="",u.value=0},S=_=>{_.target===_.currentTarget&&n("close")},$=(_,m="info")=>{const g=new CustomEvent("setting-notification",{detail:{message:_,type:m}});window.dispatchEvent(g)};return(_,m)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:S},[o("div",{class:"modal-content",onClick:m[3]||(m[3]=ze(()=>{},["stop"]))},[o("div",mv,[m[4]||(m[4]=o("h3",{class:"modal-title"},[o("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})]),Y(" AI 任务增强")],-1)),o("button",{onClick:m[0]||(m[0]=g=>_.$emit("close")),class:"close-btn"}," ✕ ")]),o("div",gv,[!i.value&&!l.value?(h(),v("div",yv,[m[7]||(m[7]=o("svg",{class:"w-8 h-8 ai-icon",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),m[8]||(m[8]=o("h4",null,"AI 智能任务增强",-1)),m[9]||(m[9]=o("p",null,"AI 将为您的任务提供智能增强，包括：",-1)),m[10]||(m[10]=o("ul",{class:"feature-list"},[o("li",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),Y(" 任务描述优化和细化")]),o("li",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),Y(" 子任务自动分解")]),o("li",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),Y(" 时间估算和难度评估")]),o("li",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),Y(" 实施建议和最佳实践")]),o("li",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})]),Y(" 相关资源和工具推荐")])],-1)),o("div",_v,[m[5]||(m[5]=o("h5",null,"当前任务",-1)),o("div",bv,[o("h6",null,y(_.task.title),1),_.task.description?(h(),v("p",wv,y(_.task.description),1)):(h(),v("p",kv,"暂无描述"))])]),o("div",xv,[m[6]||(m[6]=o("label",{for:"enhance-context",class:"form-label"},"补充信息（可选）",-1)),he(o("textarea",{id:"enhance-context","onUpdate:modelValue":m[1]||(m[1]=g=>r.value=g),class:"futuristic-textarea",placeholder:"请提供任何额外的上下文信息、特殊要求或约束条件...",rows:"3",maxlength:"500"},null,512),[[Ae,r.value]]),o("div",Cv,y(r.value.length)+"/500 ",1)])])):G("",!0),i.value?(h(),v("div",$v,[o("div",Sv,[m[11]||(m[11]=o("div",{class:"thinking-animation"},[o("svg",{class:"w-6 h-6 sparkle-icon",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),o("div",{class:"thinking-dots"},[o("span"),o("span"),o("span")])],-1)),m[12]||(m[12]=o("h4",null,"AI 正在增强您的任务...",-1)),o("p",Tv,y(d.value),1),o("div",Mv,[o("div",{class:"progress-fill",style:He({width:u.value+"%"})},null,4)])])])):G("",!0),l.value?(h(),v("div",Av,[o("div",Ev,[m[16]||(m[16]=o("h4",null,[o("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),Y(" AI 增强结果")],-1)),o("div",jv,[o("span",Pv,[m[13]||(m[13]=o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)),Y(" "+y(l.value.subtasks?.length||0)+" 个子任务",1)]),o("span",Nv,[m[14]||(m[14]=o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Y(" "+y(l.value.estimated_time||"待估算"),1)]),o("span",Lv,[m[15]||(m[15]=o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),o("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1)),Y(" "+y(l.value.difficulty||"中等")+"难度",1)])])]),o("div",Iv,[l.value.enhanced_description?(h(),v("div",Bv,[m[17]||(m[17]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),o("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),Y(" 优化描述")],-1)),o("div",Ov,y(l.value.enhanced_description),1)])):G("",!0),l.value.subtasks&&l.value.subtasks.length>0?(h(),v("div",Dv,[m[18]||(m[18]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),Y(" 子任务分解")],-1)),o("div",zv,[(h(!0),v(de,null,ge(l.value.subtasks,(g,E)=>(h(),v("div",{key:E,class:"subtask-item"},[o("div",Rv,[o("span",Fv,y(E+1),1),o("h6",null,y(g.title),1),o("span",Vv,y(g.estimated_time||"30分钟"),1)]),o("p",Hv,y(g.description),1)]))),128))])])):G("",!0),l.value.implementation_tips?(h(),v("div",Uv,[m[19]||(m[19]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),Y(" 实施建议")],-1)),o("ul",qv,[(h(!0),v(de,null,ge(l.value.implementation_tips,(g,E)=>(h(),v("li",{key:E},y(g),1))),128))])])):G("",!0),l.value.resources?(h(),v("div",Kv,[m[20]||(m[20]=o("h5",null,[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"})]),Y(" 推荐资源")],-1)),o("div",Wv,[(h(!0),v(de,null,ge(l.value.resources,(g,E)=>(h(),v("div",{key:E,class:"resource-item"},[o("span",Gv,y(g.type),1),o("span",Jv,y(g.name),1),o("span",Xv,y(g.description),1)]))),128))])])):G("",!0)])])):G("",!0)]),o("div",Yv,[!i.value&&!l.value?(h(),v("button",{key:0,type:"button",onClick:m[2]||(m[2]=g=>_.$emit("close")),class:"futuristic-btn-ghost"}," 取消 ")):G("",!0),!i.value&&!l.value?(h(),v("button",{key:1,onClick:f,class:"futuristic-btn-primary"},[...m[21]||(m[21]=[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),Y(" 开始 AI 增强 ",-1)])])):G("",!0),l.value?(h(),v("button",{key:2,onClick:C,class:"futuristic-btn-primary",disabled:a.value},[a.value?(h(),v("div",em)):(h(),v("svg",Qv,[...m[22]||(m[22]=[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])),Y(" "+y(a.value?"应用中...":"应用增强"),1)],8,Zv)):G("",!0),l.value?(h(),v("button",{key:3,onClick:N,class:"futuristic-btn-ghost",disabled:a.value}," 重新增强 ",8,tm)):G("",!0)])])])]))}}),om=Oe(sm,[["__scopeId","data-v-8b98e106"]]),nm={class:"task-header"},rm={class:"task-priority"},im={class:"priority-text"},am={class:"task-actions"},lm=["disabled"],cm={key:0,class:"w-4 h-4 inline",fill:"currentColor",viewBox:"0 0 20 20"},um={key:1,class:"loading-spinner-tiny"},dm={class:"task-content"},fm={class:"task-title"},pm={key:0,class:"task-description"},hm={class:"task-footer"},vm={class:"task-meta"},mm={class:"meta-item"},gm={key:0,class:"meta-item"},ym={class:"status-actions"},_m=Fe({__name:"TaskCard",props:{task:{}},emits:["task-updated","task-deleted","drag-start"],setup(e,{emit:t}){const s=e,n=t,r=O(!1),i=O(!1),a=O(!1),l=O(!1),u=O(null),d=P=>{r.value=!0,n("drag-start",s.task),P.dataTransfer&&(P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",s.task.id.toString()))},c=()=>{r.value=!1},f=P=>{const j={...s.task,status:P,updated_at:new Date().toISOString()};n("task-updated",j)},C=P=>{i.value=!1,n("task-updated",P)},N=()=>{confirm(`确定要删除任务 "${s.task.title}" 吗？`)&&n("task-deleted",s.task.id)},S=async()=>{try{l.value=!0;const P=await ie.post(`/api/tasks/${s.task.id}/enhance`,{action:"breakdown",task:s.task});u.value=P.data,a.value=!0}catch(P){console.error("AI增强失败:",P),E("AI增强失败，请稍后重试","error")}finally{l.value=!1}},$=P=>{const j={...s.task,title:P.enhanced_title||s.task.title,description:P.enhanced_description||s.task.description,updated_at:new Date().toISOString()};n("task-updated",j),a.value=!1,E("AI增强已应用","success")},_=P=>({low:"🟢",medium:"🟡",high:"🔴"})[P]||"⚪",m=P=>({low:"低",medium:"中",high:"高"})[P]||P,g=P=>new Date(P).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}),E=(P,j="info")=>{const A=new CustomEvent("setting-notification",{detail:{message:P,type:j}});window.dispatchEvent(A)};return(P,j)=>(h(),v("div",{class:ne(["task-card",[`priority-${P.task.priority}`,`status-${P.task.status}`,{dragging:r.value}]]),draggable:"true",onDragstart:d,onDragend:c},[o("div",nm,[o("div",rm,[o("span",{class:ne(["priority-indicator",`priority-${P.task.priority}`])},y(_(P.task.priority)),3),o("span",im,y(m(P.task.priority)),1)]),o("div",am,[o("button",{onClick:S,class:"action-btn ai-btn",disabled:l.value,title:"AI增强任务"},[l.value?(h(),v("div",um)):(h(),v("svg",cm,[...j[6]||(j[6]=[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"},null,-1)])]))],8,lm),o("button",{onClick:j[0]||(j[0]=A=>i.value=!0),class:"action-btn edit-btn",title:"编辑任务"},[...j[7]||(j[7]=[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])]),o("button",{onClick:N,class:"action-btn delete-btn",title:"删除任务"},[...j[8]||(j[8]=[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])])])]),o("div",dm,[o("h4",fm,y(P.task.title),1),P.task.description?(h(),v("p",pm,y(P.task.description),1)):G("",!0)]),o("div",hm,[o("div",vm,[o("span",mm,[j[9]||(j[9]=o("span",{class:"icon"},[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})])],-1)),Y(" "+y(g(P.task.created_at)),1)]),P.task.updated_at!==P.task.created_at?(h(),v("span",gm,[j[10]||(j[10]=o("span",{class:"icon"},[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})])],-1)),Y(" "+y(g(P.task.updated_at)),1)])):G("",!0)]),o("div",ym,[P.task.status!=="todo"?(h(),v("button",{key:0,onClick:j[1]||(j[1]=A=>f("todo")),class:"status-btn todo-btn",title:"移至待办"},[...j[11]||(j[11]=[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)])])):G("",!0),P.task.status!=="in_progress"?(h(),v("button",{key:1,onClick:j[2]||(j[2]=A=>f("in_progress")),class:"status-btn progress-btn",title:"移至进行中"},[...j[12]||(j[12]=[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"})],-1)])])):G("",!0),P.task.status!=="done"?(h(),v("button",{key:2,onClick:j[3]||(j[3]=A=>f("done")),class:"status-btn done-btn",title:"标记完成"},[...j[13]||(j[13]=[o("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):G("",!0)])]),i.value?(h(),Ie(vv,{key:0,task:P.task,onClose:j[4]||(j[4]=A=>i.value=!1),onTaskUpdated:C},null,8,["task"])):G("",!0),a.value?(h(),Ie(om,{key:1,task:P.task,enhancement:u.value,onClose:j[5]||(j[5]=A=>a.value=!1),onApplyEnhancement:$},null,8,["task","enhancement"])):G("",!0)],34))}}),ln=Oe(_m,[["__scopeId","data-v-670f7b41"]]),bm={class:"modal-header"},wm={class:"form-group"},km={class:"form-group"},xm={class:"char-count"},Cm={class:"form-row"},$m={class:"form-group"},Sm={class:"form-group"},Tm={class:"form-group"},Mm={class:"checkbox-group"},Am={class:"checkbox-label"},Em={class:"modal-footer"},jm=["disabled"],Pm=["disabled"],Nm={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},Lm={key:1,class:"loading-spinner-small mr-1"},Im=Fe({__name:"CreateTaskModal",props:{project:{}},emits:["close","task-created"],setup(e,{emit:t}){const s=e,n=t,r=O(!1),i=yt({title:"",description:"",status:"todo",priority:"medium",useAiEnhance:!1}),a=async()=>{if(!i.title.trim()){u("请输入任务标题","error");return}try{r.value=!0;const d={title:i.title.trim(),description:i.description.trim()||null,status:i.status,priority:i.priority,project_id:s.project.id},f=(await ie.post("/api/tasks",d)).data;if(i.useAiEnhance)try{const N=(await ie.post(`/api/tasks/${f.id}/enhance`,{action:"breakdown",task:f})).data;if(N.enhanced_title||N.enhanced_description){const S={...f,title:N.enhanced_title||f.title,description:N.enhanced_description||f.description},$=await ie.put(`/api/tasks/${f.id}`,S);u("任务创建成功，AI增强已应用","success"),n("task-created",$.data)}else u("任务创建成功","success"),n("task-created",f)}catch(C){console.error("AI增强失败:",C),u("任务创建成功，但AI增强失败","info"),n("task-created",f)}else u("任务创建成功","success"),n("task-created",f)}catch(d){console.error("创建任务失败:",d),u("创建任务失败，请稍后重试","error")}finally{r.value=!1}},l=d=>{d.target===d.currentTarget&&n("close")},u=(d,c="info")=>{const f=new CustomEvent("setting-notification",{detail:{message:d,type:c}});window.dispatchEvent(f)};return(d,c)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:l},[o("div",{class:"modal-content",onClick:c[7]||(c[7]=ze(()=>{},["stop"]))},[o("div",bm,[c[8]||(c[8]=o("h3",{class:"modal-title"},"创建新任务",-1)),o("button",{onClick:c[0]||(c[0]=f=>d.$emit("close")),class:"close-btn"}," ✕ ")]),o("form",{onSubmit:ze(a,["prevent"]),class:"modal-body"},[o("div",wm,[c[9]||(c[9]=o("label",{for:"task-title",class:"form-label"},"任务标题 *",-1)),he(o("input",{id:"task-title","onUpdate:modelValue":c[1]||(c[1]=f=>i.title=f),type:"text",class:"futuristic-input",placeholder:"输入任务标题",required:"",maxlength:"200"},null,512),[[Ae,i.title]])]),o("div",km,[c[10]||(c[10]=o("label",{for:"task-description",class:"form-label"},"任务描述",-1)),he(o("textarea",{id:"task-description","onUpdate:modelValue":c[2]||(c[2]=f=>i.description=f),class:"futuristic-textarea",placeholder:"详细描述任务内容和要求（可选）",rows:"4",maxlength:"1000"},null,512),[[Ae,i.description]]),o("div",xm,y(i.description.length)+"/1000 ",1)]),o("div",Cm,[o("div",$m,[c[12]||(c[12]=o("label",{for:"task-status",class:"form-label"},"状态",-1)),he(o("select",{id:"task-status","onUpdate:modelValue":c[3]||(c[3]=f=>i.status=f),class:"futuristic-select"},[...c[11]||(c[11]=[o("option",{value:"todo"},"待办",-1),o("option",{value:"in_progress"},"进行中",-1),o("option",{value:"done"},"已完成",-1)])],512),[[et,i.status]])]),o("div",Sm,[c[14]||(c[14]=o("label",{for:"task-priority",class:"form-label"},"优先级",-1)),he(o("select",{id:"task-priority","onUpdate:modelValue":c[4]||(c[4]=f=>i.priority=f),class:"futuristic-select"},[...c[13]||(c[13]=[o("option",{value:"low"},"🟢 低优先级",-1),o("option",{value:"medium"},"🟡 中优先级",-1),o("option",{value:"high"},"🔴 高优先级",-1)])],512),[[et,i.priority]])])]),o("div",Tm,[o("div",Mm,[o("label",Am,[he(o("input",{"onUpdate:modelValue":c[5]||(c[5]=f=>i.useAiEnhance=f),type:"checkbox",class:"futuristic-checkbox"},null,512),[[Ks,i.useAiEnhance]]),c[15]||(c[15]=o("span",{class:"checkbox-text"},[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})]),Y(" 创建后使用AI增强任务 ")],-1))])]),c[16]||(c[16]=o("p",{class:"help-text"}," AI将自动优化任务描述，提供执行建议和子任务分解 ",-1))]),o("div",Em,[o("button",{type:"button",onClick:c[6]||(c[6]=f=>d.$emit("close")),class:"futuristic-btn-ghost",disabled:r.value}," 取消 ",8,jm),o("button",{type:"submit",class:"futuristic-btn-primary",disabled:r.value||!i.title.trim()},[r.value?(h(),v("div",Lm)):(h(),v("svg",Nm,[...c[17]||(c[17]=[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])),Y(" "+y(r.value?"创建中...":"创建任务"),1)],8,Pm)])],32)])])]))}}),Bm=Oe(Im,[["__scopeId","data-v-1c32f59f"]]),Om={class:"kanban-board"},Dm={class:"board-header"},zm={class:"board-title"},Rm={class:"kanban-columns"},Fm={class:"kanban-column"},Vm={class:"column-header todo"},Hm={class:"column-title"},Um={class:"task-count"},qm={key:0,class:"empty-column"},Km={class:"kanban-column"},Wm={class:"column-header in-progress"},Gm={class:"column-title"},Jm={class:"task-count"},Xm={key:0,class:"empty-column"},Ym={class:"kanban-column"},Zm={class:"column-header done"},Qm={class:"column-title"},eg={class:"task-count"},tg={key:0,class:"empty-column"},sg=Fe({__name:"KanbanBoard",props:{project:{},tasks:{}},emits:["task-updated","task-created","task-deleted"],setup(e,{emit:t}){const s=e,n=t,r=O(!1),i=O(null),a=be(()=>s.tasks.filter(_=>_.status==="todo")),l=be(()=>s.tasks.filter(_=>_.status==="in_progress")),u=be(()=>s.tasks.filter(_=>_.status==="done")),d=_=>{i.value=_},c=_=>{_.preventDefault()},f=_=>{_.preventDefault(),_.currentTarget.classList.add("drag-over")},C=(_,m)=>{if(_.preventDefault(),_.currentTarget.classList.remove("drag-over"),i.value&&i.value.status!==m){const E={...i.value,status:m,updated_at:new Date().toISOString()};n("task-updated",E),$(`任务已移动到${S(m)}`,"success")}i.value=null},N=_=>{n("task-created",_),r.value=!1},S=_=>({todo:"待办",in_progress:"进行中",done:"已完成"})[_]||_,$=(_,m="info")=>{const g=new CustomEvent("setting-notification",{detail:{message:_,type:m}});window.dispatchEvent(g)};return(_,m)=>(h(),v("div",Om,[o("div",Dm,[o("h3",zm,y(_.project.name)+" - 任务看板",1),o("button",{onClick:m[0]||(m[0]=g=>r.value=!0),class:"futuristic-btn-primary"},[...m[11]||(m[11]=[o("span",{class:"mr-1"},"+",-1),Y(" 添加任务 ",-1)])])]),o("div",Rm,[o("div",Fm,[o("div",Vm,[o("h4",Hm,[m[12]||(m[12]=o("svg",{class:"w-5 h-5 column-icon",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)),m[13]||(m[13]=Y(" 待办 ",-1)),o("span",Um,y(a.value.length),1)])]),o("div",{class:"column-content",onDrop:m[3]||(m[3]=g=>C(g,"todo")),onDragover:c,onDragenter:f},[(h(!0),v(de,null,ge(a.value,g=>(h(),Ie(ln,{key:g.id,task:g,onTaskUpdated:m[1]||(m[1]=E=>_.$emit("task-updated",E)),onTaskDeleted:m[2]||(m[2]=E=>_.$emit("task-deleted",E)),onDragStart:d},null,8,["task"]))),128)),a.value.length===0?(h(),v("div",qm,[...m[14]||(m[14]=[o("p",null,"暂无待办任务",-1)])])):G("",!0)],32)]),o("div",Km,[o("div",Wm,[o("h4",Gm,[m[15]||(m[15]=o("svg",{class:"w-5 h-5 column-icon",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"})],-1)),m[16]||(m[16]=Y(" 进行中 ",-1)),o("span",Jm,y(l.value.length),1)])]),o("div",{class:"column-content",onDrop:m[6]||(m[6]=g=>C(g,"in_progress")),onDragover:c,onDragenter:f},[(h(!0),v(de,null,ge(l.value,g=>(h(),Ie(ln,{key:g.id,task:g,onTaskUpdated:m[4]||(m[4]=E=>_.$emit("task-updated",E)),onTaskDeleted:m[5]||(m[5]=E=>_.$emit("task-deleted",E)),onDragStart:d},null,8,["task"]))),128)),l.value.length===0?(h(),v("div",Xm,[...m[17]||(m[17]=[o("p",null,"暂无进行中任务",-1)])])):G("",!0)],32)]),o("div",Ym,[o("div",Zm,[o("h4",Qm,[m[18]||(m[18]=o("svg",{class:"w-5 h-5 column-icon",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),m[19]||(m[19]=Y(" 已完成 ",-1)),o("span",eg,y(u.value.length),1)])]),o("div",{class:"column-content",onDrop:m[9]||(m[9]=g=>C(g,"done")),onDragover:c,onDragenter:f},[(h(!0),v(de,null,ge(u.value,g=>(h(),Ie(ln,{key:g.id,task:g,onTaskUpdated:m[7]||(m[7]=E=>_.$emit("task-updated",E)),onTaskDeleted:m[8]||(m[8]=E=>_.$emit("task-deleted",E)),onDragStart:d},null,8,["task"]))),128)),u.value.length===0?(h(),v("div",tg,[...m[20]||(m[20]=[o("p",null,"暂无已完成任务",-1)])])):G("",!0)],32)])]),r.value?(h(),Ie(Bm,{key:0,project:_.project,onClose:m[10]||(m[10]=g=>r.value=!1),onTaskCreated:N},null,8,["project"])):G("",!0)]))}}),og=Oe(sg,[["__scopeId","data-v-96ec8ed9"]]),ng={class:"modal-header"},rg={class:"form-group"},ig={class:"form-group"},ag={class:"char-count"},lg={class:"form-group"},cg={class:"checkbox-group"},ug={class:"checkbox-label"},dg={class:"modal-footer"},fg=["disabled"],pg=["disabled"],hg={key:0,class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},vg={key:1,class:"loading-spinner-small mr-1"},mg=Fe({__name:"CreateProjectModal",emits:["close","project-created"],setup(e,{emit:t}){const s=t,n=O(!1),r=yt({name:"",description:"",useAiPlanning:!0}),i=async()=>{if(!r.name.trim()){l("请输入项目名称","error");return}try{n.value=!0;const d=(await ie.post("/api/projects",{name:r.name.trim(),description:r.description.trim()||null})).data;if(r.useAiPlanning)try{await ie.post(`/api/projects/${d.id}/ai-planning`,{project_name:d.name,project_description:d.description}),l("项目创建成功，AI已生成初始任务","success")}catch(c){console.error("AI规划失败:",c),l("项目创建成功，但AI规划失败","info")}else l("项目创建成功","success");s("project-created",d)}catch(u){console.error("创建项目失败:",u),l("创建项目失败，请稍后重试","error")}finally{n.value=!1}},a=u=>{u.target===u.currentTarget&&s("close")},l=(u,d="info")=>{const c=new CustomEvent("setting-notification",{detail:{message:u,type:d}});window.dispatchEvent(c)};return(u,d)=>(h(),Ie(xs,{to:"body"},[o("div",{class:"modal-overlay",onClick:a},[o("div",{class:"modal-content",onClick:d[5]||(d[5]=ze(()=>{},["stop"]))},[o("div",ng,[d[6]||(d[6]=o("h3",{class:"modal-title"},"创建新项目",-1)),o("button",{onClick:d[0]||(d[0]=c=>u.$emit("close")),class:"close-btn"}," ✕ ")]),o("form",{onSubmit:ze(i,["prevent"]),class:"modal-body"},[o("div",rg,[d[7]||(d[7]=o("label",{for:"project-name",class:"form-label"},"项目名称 *",-1)),he(o("input",{id:"project-name","onUpdate:modelValue":d[1]||(d[1]=c=>r.name=c),type:"text",class:"futuristic-input",placeholder:"输入项目名称",required:"",maxlength:"100"},null,512),[[Ae,r.name]])]),o("div",ig,[d[8]||(d[8]=o("label",{for:"project-description",class:"form-label"},"项目描述",-1)),he(o("textarea",{id:"project-description","onUpdate:modelValue":d[2]||(d[2]=c=>r.description=c),class:"futuristic-textarea",placeholder:"描述项目的目标和范围（可选）",rows:"4",maxlength:"500"},null,512),[[Ae,r.description]]),o("div",ag,y(r.description.length)+"/500 ",1)]),o("div",lg,[o("div",cg,[o("label",ug,[he(o("input",{"onUpdate:modelValue":d[3]||(d[3]=c=>r.useAiPlanning=c),type:"checkbox",class:"futuristic-checkbox"},null,512),[[Ks,r.useAiPlanning]]),d[9]||(d[9]=o("span",{class:"checkbox-text"},[o("svg",{class:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})]),Y(" 使用AI智能规划初始任务 ")],-1))])]),d[10]||(d[10]=o("p",{class:"help-text"}," AI将根据项目名称和描述自动生成合理的初始任务列表 ",-1))]),o("div",dg,[o("button",{type:"button",onClick:d[4]||(d[4]=c=>u.$emit("close")),class:"futuristic-btn-ghost",disabled:n.value}," 取消 ",8,fg),o("button",{type:"submit",class:"futuristic-btn-primary",disabled:n.value||!r.name.trim()},[n.value?(h(),v("div",vg)):(h(),v("svg",hg,[...d[11]||(d[11]=[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])),Y(" "+y(n.value?"创建中...":"创建项目"),1)],8,pg)])],32)])])]))}}),gg=Oe(mg,[["__scopeId","data-v-c9a8f37d"]]),yg={class:"project-view"},_g={class:"mb-6"},bg={key:0,class:"kanban-container"},wg={key:1,class:"empty-state"},kg={class:"futuristic-card text-center p-12 max-w-md mx-auto"},xg={key:3,class:"loading-overlay"},Cg=Fe({__name:"ProjectView",setup(e){const t=O([]),s=O(null),n=O([]),r=O(!1),i=O(!1),a=async()=>{try{r.value=!0;const g=await ie.get("/api/projects");t.value=g.data,t.value.length>0&&!s.value&&(s.value=t.value[0])}catch(g){console.error("加载项目失败:",g),_("加载项目失败","error")}finally{r.value=!1}},l=async g=>{try{r.value=!0;const E=await ie.get(`/api/projects/${g}/tasks`);n.value=E.data}catch(E){console.error("加载任务失败:",E),_("加载任务失败","error")}finally{r.value=!1}},u=g=>{s.value=g},d=()=>{i.value=!0},c=g=>{t.value=t.value.filter(E=>E.id!==g),s.value?.id===g&&(t.value.length>0?s.value=t.value[0]:(s.value=null,n.value=[]))},f=g=>{const E=t.value.findIndex(P=>P.id===g.id);E!==-1&&(t.value[E]=g),s.value?.id===g.id&&(s.value=g)},C=async g=>{t.value.unshift(g),s.value=g,g.id?await l(g.id):n.value=[],i.value=!1},N=async g=>{try{const E=await ie.put(`/api/tasks/${g.id}`,g),P=n.value.findIndex(j=>j.id===g.id);P!==-1&&(n.value[P]=E.data),_("任务更新成功","success")}catch(E){console.error("更新任务失败:",E),_("更新任务失败","error"),s.value&&await l(s.value.id)}},S=g=>{if(n.value.push(g),s.value){s.value.task_count=n.value.length;const E=t.value.findIndex(P=>P.id===s.value.id);E!==-1&&(t.value[E].task_count=n.value.length)}},$=async g=>{try{if(await ie.delete(`/api/tasks/${g}`),n.value=n.value.filter(E=>E.id!==g),s.value){s.value.task_count=n.value.length;const E=t.value.findIndex(P=>P.id===s.value.id);E!==-1&&(t.value[E].task_count=n.value.length)}_("任务删除成功","success")}catch(E){console.error("删除任务失败:",E),_("删除任务失败","error")}},_=(g,E="info")=>{const P=new CustomEvent("setting-notification",{detail:{message:g,type:E}});window.dispatchEvent(P)};Re(s,g=>{g?l(g.id):n.value=[]});const m=()=>{s.value&&l(s.value.id)};return Je(()=>{a(),window.addEventListener("reload-tasks",m)}),Ut(()=>{window.removeEventListener("reload-tasks",m)}),(g,E)=>(h(),v("div",yg,[o("div",_g,[Ce(tv,{projects:t.value,"current-project":s.value,onProjectSelected:u,onCreateProject:d,onProjectDeleted:c,onProjectUpdated:f},null,8,["projects","current-project"])]),s.value?(h(),v("div",bg,[Ce(og,{project:s.value,tasks:n.value,onTaskUpdated:N,onTaskCreated:S,onTaskDeleted:$},null,8,["project","tasks"])])):(h(),v("div",wg,[o("div",kg,[E[3]||(E[3]=Zt('<svg class="w-24 h-24 mb-4 text-cyber-primary/60" fill="currentColor" viewBox="0 0 20 20" data-v-65fa0066><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" data-v-65fa0066></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" data-v-65fa0066></path></svg><h2 class="futuristic-title mb-4" data-v-65fa0066>开始您的项目管理</h2><p class="futuristic-subtitle mb-6" data-v-65fa0066>创建您的第一个项目，让AI帮助您规划任务</p>',3)),o("button",{onClick:E[0]||(E[0]=P=>i.value=!0),class:"futuristic-btn-primary px-6 py-3"},[...E[2]||(E[2]=[o("svg",{class:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),Y(" 创建新项目 ",-1)])])])])),i.value?(h(),Ie(gg,{key:2,onClose:E[1]||(E[1]=P=>i.value=!1),onProjectCreated:C})):G("",!0),r.value?(h(),v("div",xg,[...E[4]||(E[4]=[o("div",{class:"loading-spinner"},null,-1)])])):G("",!0)]))}}),$g=Oe(Cg,[["__scopeId","data-v-65fa0066"]]),Sg={class:"h-full flex"},Tg={class:"w-72 border-r border-cyber-primary/30 bg-gradient-to-b from-cyber-primary/5 to-transparent"},Mg={class:"p-6"},Ag={class:"futuristic-header mb-8"},Eg={class:"futuristic-title-medium"},jg={class:"futuristic-subtitle"},Pg={class:"space-y-3"},Ng=["onClick"],Lg=["innerHTML"],Ig={class:"font-semibold futuristic-title"},Bg={class:"flex-1 overflow-y-auto cyber-scrollbar"},Og={class:"p-8"},Dg={key:0,class:"space-y-8"},zg={class:"futuristic-card bg-gradient-to-br from-blue-500/10 to-transparent"},Rg={class:"futuristic-header mb-6"},Fg={class:"flex items-center space-x-3"},Vg={class:"futuristic-title-small"},Hg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ug={class:"block futuristic-subtitle mb-3"},qg=["value"],Kg={class:"futuristic-card bg-gradient-to-br from-green-500/10 to-transparent"},Wg={class:"futuristic-header mb-6"},Gg={class:"flex items-center space-x-3"},Jg={class:"futuristic-title-small"},Xg={class:"space-y-6"},Yg={class:"relative"},Zg=["checked"],Qg={class:"futuristic-title group-hover:text-green-400 transition-colors"},e4={key:0,class:"futuristic-card bg-cyber-dark/30"},t4={class:"block futuristic-subtitle mb-3"},s4={class:"futuristic-card bg-gradient-to-br from-purple-500/10 to-transparent"},o4={class:"futuristic-header mb-6"},n4={class:"flex items-center space-x-3"},r4={class:"futuristic-title-small"},i4={class:"space-y-6"},a4={class:"relative"},l4=["checked"],c4={class:"futuristic-title group-hover:text-purple-400 transition-colors"},u4={class:"relative"},d4=["checked"],f4={class:"futuristic-title group-hover:text-purple-400 transition-colors"},p4={key:1,class:"space-y-8"},h4={class:"futuristic-card bg-gradient-to-br from-pink-500/10 to-transparent"},v4={class:"futuristic-header mb-6"},m4={class:"flex items-center space-x-3"},g4={class:"futuristic-title-small"},y4={class:"p-4 rounded-xl border-2 border-pink-400/50 bg-gradient-to-br from-pink-500/10 to-purple-500/10 shadow-lg shadow-pink-500/10 mb-6"},_4={class:"text-center"},b4={class:"futuristic-icon-container mb-3 mx-auto"},w4={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 118.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},x4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},C4={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},$4={class:"futuristic-title text-sm mb-1"},S4={class:"futuristic-subtitle text-xs"},T4={class:"space-y-4"},M4=["onClick"],A4={class:"flex items-center space-x-4"},E4={class:"futuristic-icon-container flex-shrink-0"},j4={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},P4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 118.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},N4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},L4={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},I4={class:"flex-1"},B4={class:"futuristic-title text-sm mb-1"},O4={class:"futuristic-subtitle text-xs"},D4={key:0,class:"flex-shrink-0"},z4={class:"futuristic-card bg-gradient-to-br from-cyan-500/10 to-transparent"},R4={class:"mb-8"},F4={class:"futuristic-title mb-2"},V4={class:"text-sm text-cyan-400/70"},H4={class:"text-xs opacity-75"},U4={class:"mb-6"},q4={class:"flex space-x-1 p-1 bg-cyber-dark/20 rounded-lg"},K4={class:"futuristic-title mb-4"},W4={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},G4=["onClick"],J4=["src","alt"],X4=["src"],Y4={class:"mt-2 text-center"},Z4={class:"futuristic-subtitle text-xs truncate"},Q4=["onClick"],ey={class:"futuristic-card bg-gradient-to-br from-orange-500/10 to-transparent"},ty={class:"futuristic-header mb-6"},sy={class:"flex items-center space-x-3"},oy={class:"futuristic-title-small"},ny={class:"space-y-6"},ry={class:"block futuristic-subtitle mb-3"},iy=["value"],ay={class:"block futuristic-subtitle mb-3"},ly={class:"relative"},cy={class:"futuristic-card bg-cyber-dark/30"},uy={class:"flex items-start space-x-4"},dy={class:"flex-shrink-0 mt-1"},fy={class:"relative"},py=["checked"],hy={key:0,class:"mt-6 pt-6 border-t border-cyber-primary/20"},vy={class:"space-y-4"},my={key:0},gy={class:"relative"},yy=["type"],_y={class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},by={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},wy={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},ky={key:2,class:"space-y-8"},xy={class:"futuristic-card bg-gradient-to-br from-red-500/10 to-transparent"},Cy={class:"futuristic-header mb-6"},$y={class:"flex items-center space-x-3"},Sy={class:"futuristic-title-small"},Ty={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},My={class:"block futuristic-subtitle mb-3"},Ay={class:"mt-2 text-xs futuristic-subtitle"},Ey={class:"block futuristic-subtitle mb-3"},jy={class:"mt-2 text-xs futuristic-subtitle"},Py={class:"block futuristic-subtitle mb-3"},Ny={class:"mt-2 text-xs futuristic-subtitle"},Ly={class:"block futuristic-subtitle mb-3"},Iy={class:"mt-2 text-xs futuristic-subtitle"},By={class:"futuristic-card bg-gradient-to-br from-orange-500/10 to-transparent"},Oy={class:"futuristic-header mb-6"},Dy={class:"flex items-center space-x-3"},zy={class:"futuristic-title-small"},Ry={class:"space-y-6"},Fy={class:"relative"},Vy=["checked"],Hy={class:"futuristic-title group-hover:text-orange-400 transition-colors"},Uy={class:"relative"},qy=["checked"],Ky={class:"futuristic-title group-hover:text-orange-400 transition-colors"},Wy={key:3,class:"space-y-8"},Gy={class:"futuristic-header mb-6"},Jy={class:"flex items-center justify-between"},Xy={class:"flex items-center space-x-3"},Yy={class:"futuristic-title-small"},Zy={class:"futuristic-subtitle text-sm"},Qy={class:"flex items-center space-x-2"},e_={key:0,class:"flex items-center space-x-2 text-green-400"},t_={class:"text-sm font-medium"},s_={key:1,class:"flex items-center space-x-2 text-gray-400"},o_={class:"text-sm font-medium"},n_={class:"space-y-6"},r_={class:"block futuristic-subtitle mb-3"},i_={class:"relative"},a_=["onUpdate:modelValue","type","placeholder"],l_={class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c_={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},u_={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},d_={class:"block futuristic-subtitle mb-3"},f_=["onUpdate:modelValue"],p_=["value"],h_={class:"flex items-center space-x-4"},v_=["onClick","disabled"],m_=["onClick"],g_=["onClick"],y_={class:"futuristic-card bg-gradient-to-br from-purple-500/10 to-transparent"},__={class:"futuristic-header mb-4"},b_={class:"flex items-center space-x-3"},w_={class:"futuristic-title-small"},k_={class:"flex items-center space-x-4 p-4 bg-cyber-dark/30 rounded-xl"},x_={class:"futuristic-title"},C_={class:"futuristic-subtitle"},$_={class:"futuristic-card bg-gradient-to-br from-orange-500/10 to-transparent"},S_={class:"space-y-6"},T_={class:"futuristic-card bg-cyber-dark/30"},M_={class:"flex items-start space-x-4"},A_={class:"flex-shrink-0 mt-1"},E_={class:"relative"},j_=["checked"],P_={key:4,class:"space-y-8"},N_={class:"futuristic-card bg-gradient-to-br from-emerald-500/10 to-transparent"},L_={class:"futuristic-header mb-6"},I_={class:"flex items-center space-x-3"},B_={class:"futuristic-title-small"},O_={class:"space-y-6"},D_={class:"futuristic-card bg-cyber-dark/30"},z_={class:"futuristic-subtitle mb-4"},R_={class:"flex items-center space-x-4"},F_={class:"futuristic-subtitle"},V_={class:"futuristic-card bg-gradient-to-br from-red-500/10 to-transparent border-red-500/30"},H_={class:"futuristic-header mb-6"},U_={class:"flex items-center space-x-3"},q_={class:"futuristic-title-small text-red-400"},K_={class:"space-y-6"},W_={class:"futuristic-card bg-red-900/20 border border-red-500/30"},G_={class:"flex items-start space-x-4"},J_={class:"flex-1"},X_={class:"futuristic-title text-red-400 mb-2"},Y_={class:"futuristic-subtitle mb-4"},Z_={key:5,class:"space-y-8"},Q_={class:"futuristic-card bg-gradient-to-br from-indigo-500/10 to-transparent text-center"},eb={class:"futuristic-title-small mb-4"},tb={class:"futuristic-subtitle mb-6"},sb={class:"futuristic-subtitle mb-8 max-w-2xl mx-auto"},ob={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},nb={class:"futuristic-card bg-cyber-dark/30"},rb={class:"futuristic-title mb-2"},ib={class:"futuristic-card bg-cyber-dark/30"},ab={class:"futuristic-title mb-2"},lb={class:"futuristic-card bg-cyber-dark/30"},cb={class:"futuristic-title mb-2"},ub={class:"flex justify-center space-x-4"},db={class:"border-t border-cyber-primary/30 bg-gradient-to-r from-cyber-primary/5 to-transparent p-8 mt-8"},fb={class:"flex items-center justify-center mb-6"},pb={key:0,class:"flex items-center space-x-3 px-4 py-2 rounded-lg bg-blue-500/10 border border-blue-500/30"},hb={class:"text-blue-400 text-sm font-medium"},vb={class:"relative"},mb={key:0,class:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-ping"},gb={class:"text-green-400 text-sm font-medium"},yb={key:0,class:"text-green-300/70 ml-1"},_b={key:2,class:"flex items-center space-x-3 px-4 py-2 rounded-lg bg-red-500/10 border border-red-500/30"},bb={class:"text-red-400 text-sm font-medium"},wb={key:3,class:"flex items-center space-x-3 px-4 py-2 rounded-lg bg-cyan-500/10 border border-cyan-500/30"},kb={class:"text-cyan-400 text-sm font-medium"},xb={class:"flex justify-center items-center space-x-4"},Cb={class:"flex space-x-3"},$b=["disabled"],Sb=["disabled"],Tb=Fe({__name:"Settings",setup(e){const t=O({theme:"dark",language:"zh-CN",autoSave:!0,autoSaveInterval:30,fontSize:14,fontFamily:"Orbitron",apiProviders:{openrouter:{name:"OpenRouter",apiKey:"",isConnected:!1,models:["GPT-5 Chat","Claude Sonnet 4","Deepseek V3","Deepseek R1","Gemini"],selectedModel:"GPT-5 Chat"}},currentProvider:"openrouter",enableNotifications:!0,enableSounds:!0,dataExport:!1,aiFileOperationsEnabled:!1,aiWebSearchEnabled:!1,aiSearchEngine:"duckduckgo",serperApiKey:""}),s=O(!1),n=O(!1);O(!1);const r=O("general"),i=O(x.getLanguage()),a=O("idle"),l=O(null),u=O(!1),d=O({}),c=O({}),f=O([]),C=O(null),N=O(null),S=O(!1),{currentTheme:$,isDarkMode:_}=Ro(),m=O(_.value?"dark":"light");Re(_,async k=>{const p=k?"dark":"light";console.log(`[SETTINGS] Theme changed to ${p}`),setTimeout(async()=>{m.value=p,console.log(`[SETTINGS] Background tab synchronized to ${p}, loading background...`),await W()},50)}),Re(m,async(k,p)=>{k!==p&&(console.log(`[SETTINGS] Background tab changed from ${p} to ${k}`),await W())});const g=be(()=>{console.log("filteredBackgroundFiles computed:"),console.log("activeBackgroundTab.value:",m.value),console.log("backgroundFiles.value:",f.value);const k=f.value.filter(p=>(console.log(`File ${p.name}: theme=${p.theme}, matches=${!p.theme||p.theme===m.value}`),p.theme?p.theme===m.value:!0));return console.log("filtered result:",k),k}),E=be(()=>(i.value,[{id:"general",label:x.t("general_settings"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'},{id:"appearance",label:x.t("appearance_settings"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg>'},{id:"pomodoro",label:x.t("pomodoro_settings"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'},{id:"ai",label:x.t("ai_settings"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>'},{id:"data",label:x.t("data_management"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>'},{id:"about",label:x.t("about"),icon:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'}]));be(()=>(i.value,{generalSettings:x.t("general_settings"),appearanceSettings:x.t("appearance_settings"),aiSettings:x.t("ai_settings"),dataManagement:x.t("data_management"),resetSettings:x.t("reset_settings")}));const P=be(()=>(i.value,[{value:"dark",label:x.t("dark_theme"),description:x.t("dark_theme_cyber")},{value:"light",label:x.t("light_theme"),description:x.t("light_theme_clean")},{value:"auto",label:x.t("auto_theme"),description:x.t("auto_theme_system")}])),j=[{value:"zh-CN",label:"简体中文"},{value:"en-US",label:"English"}],A=be(()=>(i.value,[{value:"Orbitron",label:x.t("orbitron_font_cyber")},{value:"Fira Code",label:x.t("fira_code_programming")},{value:"system-ui",label:x.t("system_font_default")}])),F=be(()=>(i.value,[{key:"openrouter",name:"OpenRouter",description:x.t("openrouter_provider_desc"),models:["GPT-5 Chat","Claude Sonnet 4","Deepseek V3","Deepseek R1","Gemini"]}])),K=async()=>{s.value=!0;try{const k=await _e.loadSettings();if(k){k.apiProviders||(k.apiProviders={});const p={openrouter:{name:"OpenRouter",apiKey:"",isConnected:!1,models:["GPT-5 Chat","Claude Sonnet 4","Deepseek V3","Deepseek R1","Gemini"],selectedModel:"GPT-5 Chat"}};Object.keys(p).forEach(b=>{k.apiProviders[b]?k.apiProviders[b]={...p[b],...k.apiProviders[b]}:k.apiProviders[b]=p[b]}),Object.assign(t.value,k),d.value=JSON.parse(JSON.stringify(k)),c.value=JSON.parse(JSON.stringify(k))}}catch(k){console.error(x.t("loading_failed"),k)}finally{s.value=!1}},L=async()=>{if(console.log("resetToOriginal called"),console.log("originalSettings:",d.value),console.log("current settings before reset:",t.value),Object.keys(d.value).length>0){ae=!0;try{const k=JSON.parse(JSON.stringify(d.value));console.log("original to restore:",k);const p=t.value.theme;Object.keys(k).forEach(U=>{U!=="theme"&&(typeof k[U]=="object"&&k[U]!==null&&!Array.isArray(k[U])?Object.assign(t.value[U],k[U]):t.value[U]=k[U])}),t.value.theme=p,console.log("settings after reset:",t.value),await Et();const b={...k};delete b.theme,_e.settings={..._e.settings,...b},_e.applySettings(),M(x.t("reset_to_original_success"),"success")}finally{setTimeout(()=>{ae=!1,console.log("isResetting flag cleared")},100)}}else console.log("No original settings to restore"),M(x.t("no_original_settings"),"warning")},J=async()=>{if(confirm(x.t("confirm_factory_reset"))){ae=!0,fe("saving");try{if((await fetch("/api/settings/factory-reset",{method:"POST",headers:{"Content-Type":"application/json"}})).ok){const p=t.value.theme;await K(),t.value.theme=p,await _e.updateSetting("theme",p),d.value={},M(x.t("factory_reset_success"),"success"),fe("saved")}else throw new Error("Factory reset failed")}catch(k){console.error(x.t("factory_reset_failed"),k),M(x.t("factory_reset_failed"),"error"),fe("error")}finally{setTimeout(()=>{ae=!1},200)}}};let ae=!1,oe=!0;Re(t,async(k,p)=>{if(!(ae||oe)){Object.keys(d.value).length===0&&p&&(d.value=JSON.parse(JSON.stringify(p)),console.log("Original settings recorded:",d.value));try{fe("saving"),(await _e.saveSettings(k)).success?(fe("saved"),c.value=JSON.parse(JSON.stringify(k))):fe("error")}catch(b){console.error("Auto-save failed:",b),fe("error")}}},{deep:!0}),Re(()=>t.value.language,(k,p)=>{ae||oe||(!d.value.language&&p&&(d.value.language=p),k!==x.getLanguage()&&(x.setLanguage(k),_e.setSetting("language",k,fe)))}),Re(()=>t.value.apiProviders,(k,p)=>{ae||oe||(!d.value.apiProviders&&p&&(d.value.apiProviders=JSON.parse(JSON.stringify(p))),_e.setSetting("apiProviders.openrouter",k.openrouter,fe),_e.settings.apiProviders={...k},_e.applySettings())},{deep:!0}),Re(()=>t.value.currentProvider,(k,p)=>{ae||oe||(!d.value.currentProvider&&p&&(d.value.currentProvider=p),_e.setSetting("currentProvider",k,fe),_e.settings.currentProvider=k,_e.applySettings())});let me=!1;const Ee=async()=>{const k=!t.value.autoSave;t.value.autoSave=k;try{await _e.updateSetting("autoSave",k),fe("saved")}catch(p){console.error("Failed to update autoSave:",p),t.value.autoSave=!k,fe("error")}},De=async()=>{const k=!t.value.enableNotifications;t.value.enableNotifications=k;try{await _e.updateSetting("enableNotifications",k),fe("saved")}catch(p){console.error("Failed to update enableNotifications:",p),t.value.enableNotifications=!k,fe("error")}},ee=async()=>{const k=!t.value.enableSounds;t.value.enableSounds=k;try{await _e.updateSetting("enableSounds",k),fe("saved")}catch(p){console.error("Failed to update enableSounds:",p),t.value.enableSounds=!k,fe("error")}},R=async()=>{const k=!t.value.aiFileOperationsEnabled;t.value.aiFileOperationsEnabled=k;try{await _e.updateSetting("aiFileOperationsEnabled",k),fe("saved")}catch(p){console.error("Failed to update aiFileOperationsEnabled:",p),t.value.aiFileOperationsEnabled=!k,fe("error")}},B=async()=>{const k=!t.value.aiWebSearchEnabled;t.value.aiWebSearchEnabled=k;try{await _e.updateSetting("aiWebSearchEnabled",k),fe("saved")}catch(p){console.error("Failed to update aiWebSearchEnabled:",p),t.value.aiWebSearchEnabled=!k,fe("error")}},xe=async()=>{const k=!t.value.pomodoroNotificationsEnabled;t.value.pomodoroNotificationsEnabled=k;try{await _e.updateSetting("pomodoroNotificationsEnabled",k),fe("saved")}catch(p){console.error("Failed to update pomodoroNotificationsEnabled:",p),t.value.pomodoroNotificationsEnabled=!k,fe("error")}},Ue=async()=>{const k=!t.value.pomodoroSoundsEnabled;t.value.pomodoroSoundsEnabled=k;try{await _e.updateSetting("pomodoroSoundsEnabled",k),fe("saved")}catch(p){console.error("Failed to update pomodoroSoundsEnabled:",p),t.value.pomodoroSoundsEnabled=!k,fe("error")}},Ve=async k=>{me=!0;try{t.value.theme=k,await _e.updateSetting("theme",k);const p=P.value.find(b=>b.value===k)?.label||k;M(`${x.t("theme_changed_to","主题已切换为")} ${p}`,"success"),fe("saved")}catch(p){console.error("Failed to update theme:",p),fe("error"),M(x.t("theme_change_failed","主题切换失败"),"error")}finally{setTimeout(()=>{me=!1},100)}},ce=()=>{window.open("https://github.com/your-repo/ai-notebook/blob/main/README.md","_blank")},V=()=>{window.open("https://github.com/your-repo/ai-notebook","_blank")},H=async()=>{try{const k=await fetch("/api/export");if(k.ok){const p=await k.blob(),b=window.URL.createObjectURL(p),U=document.createElement("a");U.href=b,U.download=`ai-notepad-backup-${je.toISOString(je.now()).split("T")[0]}.json`,U.click(),window.URL.revokeObjectURL(b),M(x.t("data_exported"),"success")}}catch(k){console.error(x.t("data_export_failed"),k),M(x.t("data_export_failed"),"error")}},re=async()=>{if(confirm(x.t("confirm_clear_data")))try{(await fetch("/api/clear",{method:"DELETE"})).ok&&(M(x.t("data_cleared"),"success"),setTimeout(()=>{window.location.reload()},1e3))}catch(k){console.error(x.t("data_clear_failed"),k),M(x.t("data_clear_failed"),"error")}},$e=async k=>{const p=t.value.apiProviders[k];if(!p.apiKey){M(x.t("api_key_required_first"),"error");return}try{if((await fetch("/api/test-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:k,apiKey:p.apiKey,model:p.selectedModel})})).ok)p.isConnected=!0,M(`${p.name} ${x.t("api_connection_success")}`,"success");else throw new Error(x.t("connection_failed"))}catch(b){console.error(x.t("api_test_failed"),b),p.isConnected=!1,M(`${p.name} ${x.t("connection_failed")}`,"error")}},le=k=>{const p=t.value.apiProviders[k];p.isConnected=!1,p.apiKey="",M(`${p.name} ${x.t("api_disconnection_success")}`,"success")},M=(k,p)=>{const b=new CustomEvent("setting-notification",{detail:{message:k,type:p}});window.dispatchEvent(b),console.log(`${p}: ${k}`)},te=k=>{const b=Date.now()-k;if(b<6e4)return x.t("just_now");if(b<36e5){const U=Math.floor(b/6e4);return x.t("minutes_ago").replace("{0}",U.toString())}else{const U=Math.floor(b/36e5);return x.t("hours_ago").replace("{0}",U.toString())}},fe=k=>{a.value=k,k==="saved"&&(l.value=Date.now(),u.value=!0,setTimeout(()=>{u.value=!1},1e3))},ts=()=>{console.log("[FRONTEND] triggerFileUpload called"),console.log("[FRONTEND] fileInput.value:",N.value),N.value?.click(),console.log("[FRONTEND] File input clicked")},w=async k=>{console.log("[FRONTEND] File upload triggered");const p=k.target,b=p.files;if(console.log("[FRONTEND] Files selected:",b?.length||0),!b||b.length===0){console.log("[FRONTEND] No files selected");return}if(S.value){console.log("[FRONTEND] Upload already in progress");return}S.value=!0,console.log("[FRONTEND] Starting upload process");const U=new AbortController,Z=setTimeout(()=>{U.abort(),M("上传超时，请检查网络连接","error")},3e5);try{for(const Q of b){if(console.log(`[FRONTEND] Processing file: ${Q.name}, type: ${Q.type}, size: ${Q.size}`),!Q.type.startsWith("image/")&&!Q.type.startsWith("video/")){console.log(`[FRONTEND] File type not supported: ${Q.type}`),M(`文件 ${Q.name} 格式不支持`,"error");continue}if(Q.size>50*1024*1024){console.log(`[FRONTEND] File too large: ${Q.size} bytes`),M(`文件 ${Q.name} 过大，请选择小于50MB的文件`,"error");continue}console.log(`[FRONTEND] Creating FormData for theme: ${m.value}`);const ue=new FormData;ue.append("file",Q),ue.append("theme",m.value),console.log("[FRONTEND] Sending upload request to backend");const ve=await fetch("/api/backgrounds/upload",{method:"POST",body:ue,signal:U.signal});if(console.log(`[FRONTEND] Upload response status: ${ve.status}`),ve.ok){const ke=await ve.json();console.log("[FRONTEND] Upload successful:",ke);const Se=m.value==="light"?"浅色主题":"深色主题";M(`文件 ${Q.name} 已上传到${Se}背景`,"success")}else{const ke=await ve.text();throw console.log(`[FRONTEND] Upload failed: ${ve.status} - ${ke}`),new Error(`上传失败: ${ve.statusText}`)}}}catch(Q){console.error("文件上传失败:",Q),Q.name==="AbortError"?M("上传已取消或超时","warning"):Q.message.includes("Failed to fetch")?M("网络连接失败，请检查网络设置","error"):Q.message.includes("status")?M(`服务器错误: ${Q.message}`,"error"):M(x.t("file_upload_failed","文件上传失败"),"error")}finally{clearTimeout(Z),S.value=!1,p&&(p.value="");try{await q()}catch(Q){console.error("重新加载背景文件列表失败:",Q)}}},T=async(k,p)=>{if(C.value===k.id){console.log("[SETTINGS] 背景已选中，跳过重复操作");return}C.value=k.id;const b=_.value?"dark":"light",U=p||b;console.log("[SETTINGS] ===== 开始选择背景 ====="),console.log(`[SETTINGS] 背景ID: ${k.id}`),console.log(`[SETTINGS] 目标主题: ${U}`),console.log(`[SETTINGS] 当前主题标签页: ${m.value}`),console.log(`[SETTINGS] 当前系统主题: ${b}`),se(k);const Z=new AbortController,Q=setTimeout(()=>{Z.abort(),M("背景设置保存超时","warning")},1e4);try{const ue={backgroundId:k.id,theme:U};console.log("[SETTINGS] 准备发送保存请求:",ue);const ve=await fetch("/api/settings/background",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue),signal:Z.signal});if(clearTimeout(Q),console.log(`[SETTINGS] 保存响应状态: ${ve.status}`),ve.ok){const ke=await ve.json();console.log("[SETTINGS] 保存响应结果:",ke),M(`${U}主题背景设置已保存`,"success")}else{const ke=await ve.text();console.error(`[SETTINGS] 保存失败: ${ve.status} - ${ke}`),M("背景设置保存失败","error"),z(U)}}catch(ue){clearTimeout(Q),ue.name==="AbortError"?(console.error("[SETTINGS] 背景设置保存超时:",ue),M("背景设置保存超时","warning")):(console.error("[SETTINGS] 自动保存背景设置失败:",ue),M("背景设置保存失败","error")),z(U)}console.log("[SETTINGS] ===== 背景选择完成 =====")},z=async k=>{C.value=null,window.dispatchEvent(new CustomEvent("clear-background"));const p=k||m.value;console.log(`[SETTINGS] 选择默认背景，目标主题: ${p}`);try{(await fetch("/api/settings/background",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backgroundId:null,theme:p})})).ok&&M(`${p}主题已恢复默认背景`,"success")}catch(b){console.error("自动保存默认背景设置失败:",b)}},X=async k=>{if(S.value){console.log("[DELETE] 删除操作已在进行中");return}if(!confirm("确定要删除这个背景文件吗？此操作不可恢复。"))return;S.value=!0;const p=new AbortController,b=setTimeout(()=>{p.abort(),M("删除操作超时","warning")},3e4);try{const U=await fetch(`/api/backgrounds/${k}`,{method:"DELETE",signal:p.signal});if(clearTimeout(b),U.ok){const Z=await U.json();console.log("[DELETE] 删除成功:",Z);try{await q()}catch(Q){console.error("重新加载背景文件列表失败:",Q)}C.value===k&&await z(m.value);try{const Q=await fetch(`/api/settings/background?theme=${m.value}`,{signal:p.signal});Q.ok&&(await Q.json()).backgroundId===k&&await z(m.value)}catch(Q){console.error("检查当前背景设置失败:",Q)}M(x.t("background_delete_success","背景文件删除成功"),"success")}else{const Z=await U.text();throw new Error(`删除失败: ${Z}`)}}catch(U){U.name==="AbortError"?(console.error("[DELETE] 删除操作超时:",U),M("删除操作超时","warning")):(console.error("删除背景文件失败:",U),M(x.t("background_delete_failed","删除背景文件失败"),"error"))}finally{clearTimeout(b),S.value=!1}},q=async()=>{try{const k=new AbortController,p=setTimeout(()=>k.abort(),1e4),b=await fetch("/api/backgrounds",{signal:k.signal});if(clearTimeout(p),b.ok){const U=await b.json();f.value=U.map(Z=>({...Z,url:Z.url.startsWith("http")?Z.url:`${Z.url}`}))}else console.error("加载背景文件失败:",b.status,b.statusText)}catch(k){k.name==="AbortError"?console.error("加载背景文件超时"):console.error("加载背景文件失败:",k)}},W=async()=>{try{const k=_.value?"dark":"light",p=await fetch(`/api/settings/background?theme=${k}`);if(p.ok){const b=await p.json();if(console.log(`[SETTINGS] 当前${k}主题背景设置:`,b),b.backgroundId){C.value=b.backgroundId;const U=f.value.find(Z=>Z.id===b.backgroundId);U&&se(U)}else window.dispatchEvent(new CustomEvent("clear-background"))}}catch(k){console.error("加载当前背景设置失败:",k)}},se=k=>{const p=new CustomEvent("apply-background",{detail:{file:k}});window.dispatchEvent(p)};return Je(async()=>{await K(),await q(),await W(),setTimeout(()=>{oe=!1},100);const k=_e.addListener(b=>{if(!oe&&!ae&&!me&&Object.keys(b).some(Z=>JSON.stringify(t.value[Z])!==JSON.stringify(b[Z]))){console.log("Updating settings from service:",b);const Z=me;me=!0,Object.assign(t.value,b),setTimeout(()=>{me=Z},50)}}),p=x.addListener(b=>{i.value=b});window.settingsCleanupFunctions={removeSettingsListener:k,removeLanguageListener:p}}),Ut(()=>{console.log("Settings component unmounting, cleaning up listeners"),window.settingsCleanupFunctions&&(window.settingsCleanupFunctions.removeSettingsListener(),window.settingsCleanupFunctions.removeLanguageListener(),delete window.settingsCleanupFunctions)}),(k,p)=>(h(),v("div",Sg,[o("div",Tg,[o("div",Mg,[o("div",Ag,[o("h2",Eg,y(I(x).t("system_settings")),1),o("div",jg,y(I(x).t("configure_ai_notebook")),1)]),o("nav",Pg,[(h(!0),v(de,null,ge(E.value,b=>(h(),v("button",{key:b.id,onClick:U=>r.value=b.id,class:ne(["w-full flex items-center space-x-4 p-4 rounded-xl transition-all duration-300 text-left group",r.value===b.id?"futuristic-btn-active scale-105":"hover:bg-cyber-primary/10 border border-cyber-primary/20 hover:border-cyber-primary/40 hover:scale-102"])},[o("div",{class:"futuristic-icon-container group-hover:scale-110 transition-transform",innerHTML:b.icon},null,8,Lg),o("span",Ig,y(b.label),1)],10,Ng))),128))])])]),o("div",Bg,[o("div",Og,[r.value==="general"?(h(),v("div",Dg,[o("div",zg,[o("div",Rg,[o("div",Fg,[p[15]||(p[15]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("h3",Vg,y(I(x).t("language_region")),1)])]),o("div",Hg,[o("div",null,[o("label",Ug,y(I(x).t("interface_language")),1),he(o("select",{"onUpdate:modelValue":p[0]||(p[0]=b=>t.value.language=b),class:"futuristic-input w-full"},[(h(),v(de,null,ge(j,b=>o("option",{key:b.value,value:b.value},y(b.label),9,qg)),64))],512),[[et,t.value.language]])])])]),o("div",Kg,[o("div",Wg,[o("div",Gg,[p[16]||(p[16]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})])],-1)),o("h3",Jg,y(I(x).t("auto_save")),1)])]),o("div",Xg,[o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(Ee,["prevent"])},[o("div",Yg,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.autoSave,readonly:""},null,8,Zg),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.autoSave?"bg-green-500/20 border-green-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.autoSave?"translate-x-6 from-green-400 to-emerald-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)]),o("span",Qg,y(I(x).t("enable_auto_save")),1)]),t.value.autoSave?(h(),v("div",e4,[o("label",t4,y(I(x).t("auto_save_interval_seconds")),1),he(o("input",{"onUpdate:modelValue":p[1]||(p[1]=b=>t.value.autoSaveInterval=b),type:"number",min:"10",max:"300",class:"futuristic-input w-40"},null,512),[[Ae,t.value.autoSaveInterval,void 0,{number:!0}]])])):G("",!0)])]),o("div",s4,[o("div",o4,[o("div",n4,[p[17]||(p[17]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM4.828 4.828A4 4 0 015.5 4H9v1a3 3 0 006 0V4h3.5c.276 0 .526.111.707.293l2.5 2.5c.182.181.293.431.293.707V10a3 3 0 01-3 3v1a3 3 0 01-3 3H9a3 3 0 01-3-3v-1a3 3 0 01-3-3V7.5c0-.276.111-.526.293-.707l2.5-2.5z"})])],-1)),o("h3",r4,y(I(x).t("notification_settings")),1)])]),o("div",i4,[o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(De,["prevent"])},[o("div",a4,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.enableNotifications,readonly:""},null,8,l4),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.enableNotifications?"bg-purple-500/20 border-purple-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.enableNotifications?"translate-x-6 from-purple-400 to-pink-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)]),o("span",c4,y(I(x).t("enable_desktop_notifications")),1)]),o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(ee,["prevent"])},[o("div",u4,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.enableSounds,readonly:""},null,8,d4),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.enableSounds?"bg-purple-500/20 border-purple-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.enableSounds?"translate-x-6 from-purple-400 to-pink-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)]),o("span",f4,y(I(x).t("enable_sound_effects")),1)])])])])):r.value==="appearance"?(h(),v("div",p4,[o("div",h4,[o("div",v4,[o("div",m4,[p[18]||(p[18]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})])],-1)),o("h3",g4,y(I(x).t("theme_settings","主题设置")),1)])]),o("div",y4,[o("div",_4,[o("div",b4,[(h(),v("svg",w4,[I($)==="dark"?(h(),v("path",k4)):I($)==="light"?(h(),v("path",x4)):(h(),v("path",C4))]))]),o("div",$4,y(I(x).t("current_theme","当前主题")),1),o("div",S4,y(P.value.find(b=>b.value===I($))?.label||I(x).t("dark_theme")),1)])]),o("div",T4,[(h(!0),v(de,null,ge(P.value,b=>(h(),v("div",{key:b.value,class:"relative cursor-pointer group",onClick:U=>Ve(b.value)},[o("div",{class:ne(["p-4 rounded-xl border-2 transition-all duration-300",t.value.theme===b.value?"border-pink-400 bg-gradient-to-br from-pink-500/20 to-purple-500/20 shadow-lg shadow-pink-500/25":"border-pink-400/30 bg-gradient-to-br from-pink-500/5 to-purple-500/5 hover:border-pink-400/60 hover:shadow-md hover:shadow-pink-500/10"])},[o("div",A4,[o("div",E4,[(h(),v("svg",j4,[b.value==="dark"?(h(),v("path",P4)):b.value==="light"?(h(),v("path",N4)):(h(),v("path",L4))]))]),o("div",I4,[o("div",B4,y(b.label),1),o("div",O4,y(b.description),1)]),t.value.theme===b.value?(h(),v("div",D4,[...p[19]||(p[19]=[o("div",{class:"w-6 h-6 rounded-full bg-gradient-to-r from-pink-400 to-purple-400 flex items-center justify-center"},[o("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])])):G("",!0)])],2)],8,M4))),128))])]),o("div",z4,[p[29]||(p[29]=Zt('<div class="futuristic-header mb-6" data-v-65db7a2b><div class="flex items-center space-x-3" data-v-65db7a2b><div class="futuristic-icon-container" data-v-65db7a2b><svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-65db7a2b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-65db7a2b></path></svg></div><h3 class="futuristic-title-small" data-v-65db7a2b>背景管理</h3></div></div>',1)),o("div",R4,[o("div",{class:"border-2 border-dashed border-cyan-400/30 rounded-xl p-8 text-center hover:border-cyan-400/60 transition-colors cursor-pointer",onClick:ts},[p[22]||(p[22]=o("div",{class:"futuristic-icon-container mb-4 mx-auto"},[o("svg",{class:"w-12 h-12 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),o("div",F4," 上传"+y(m.value==="light"?"浅色主题":"深色主题")+"背景文件 ",1),p[23]||(p[23]=o("div",{class:"futuristic-subtitle mb-4"},"支持图片、视频和GIF文件",-1)),o("div",V4,[p[20]||(p[20]=Y(" 点击选择文件或拖拽文件到此处",-1)),p[21]||(p[21]=o("br",null,null,-1)),o("span",H4,"文件将被分类到"+y(m.value==="light"?"浅色主题":"深色主题")+"背景中",1)]),o("input",{ref_key:"fileInput",ref:N,type:"file",accept:"image/*,video/*,.gif",multiple:"",class:"hidden",onChange:w},null,544)])]),o("div",U4,[o("div",q4,[o("button",{onClick:p[2]||(p[2]=b=>m.value="light"),class:ne(["flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",m.value==="light"?"bg-gradient-to-r from-cyan-400/20 to-blue-400/20 text-cyan-300 shadow-lg shadow-cyan-400/25":"text-cyan-400/70 hover:text-cyan-300 hover:bg-cyan-400/10"])},[...p[24]||(p[24]=[o("div",{class:"flex items-center justify-center space-x-2"},[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),o("span",null,"浅色主题背景")],-1)])],2),o("button",{onClick:p[3]||(p[3]=b=>m.value="dark"),class:ne(["flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",m.value==="dark"?"bg-gradient-to-r from-purple-400/20 to-pink-400/20 text-purple-300 shadow-lg shadow-purple-400/25":"text-purple-400/70 hover:text-purple-300 hover:bg-purple-400/10"])},[...p[25]||(p[25]=[o("div",{class:"flex items-center justify-center space-x-2"},[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),o("span",null,"深色主题背景")],-1)])],2)])]),o("div",null,[o("h4",K4,y(m.value==="light"?"浅色主题背景选择":"深色主题背景选择"),1),o("div",W4,[o("div",{class:"relative group cursor-pointer",onClick:p[4]||(p[4]=b=>z(m.value))},[o("div",{class:ne(["aspect-video rounded-lg overflow-hidden border-2 transition-all duration-300 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",C.value===null?"border-cyan-400 shadow-lg shadow-cyan-400/25":"border-cyber-primary/30 hover:border-cyan-400/60"])},[...p[26]||(p[26]=[o("div",{class:"text-center text-white"},[o("svg",{class:"w-8 h-8 mx-auto mb-2 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]),o("div",{class:"text-xs font-medium"},"默认背景")],-1)])],2),p[27]||(p[27]=o("div",{class:"mt-2 text-center"},[o("div",{class:"futuristic-subtitle text-xs"},"系统默认")],-1))]),(h(!0),v(de,null,ge(g.value,b=>(h(),v("div",{key:b.id,class:"relative group cursor-pointer",onClick:U=>T(b,m.value)},[o("div",{class:ne(["aspect-video rounded-lg overflow-hidden border-2 transition-all duration-300",C.value===b.id?"border-cyan-400 shadow-lg shadow-cyan-400/25":"border-cyber-primary/30 hover:border-cyan-400/60"])},[b.type.startsWith("image")?(h(),v("img",{key:0,src:b.url,alt:b.name,class:"w-full h-full object-cover"},null,8,J4)):b.type.startsWith("video")?(h(),v("video",{key:1,src:b.url,class:"w-full h-full object-cover",muted:""},null,8,X4)):G("",!0),p[28]||(p[28]=o("div",{class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[o("div",{class:"text-white text-sm font-medium"},"预览")],-1))],2),o("div",Y4,[o("div",Z4,y(b.name),1)]),o("button",{onClick:ze(U=>X(b.id),["stop"]),class:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity"}," × ",8,Q4)],8,G4))),128))])])]),o("div",ey,[o("div",ty,[o("div",sy,[p[30]||(p[30]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),o("h3",oy,y(I(x).t("font_settings")),1)])]),o("div",ny,[o("div",null,[o("label",ry,y(I(x).t("font_family")),1),he(o("select",{"onUpdate:modelValue":p[5]||(p[5]=b=>t.value.fontFamily=b),class:"futuristic-input w-full"},[(h(!0),v(de,null,ge(A.value,b=>(h(),v("option",{key:b.value,value:b.value},y(b.label),9,iy))),128))],512),[[et,t.value.fontFamily]])]),o("div",null,[o("label",ay,y(I(x).t("font_size_px",{size:t.value.fontSize})),1),o("div",ly,[he(o("input",{"onUpdate:modelValue":p[6]||(p[6]=b=>t.value.fontSize=b),type:"range",min:"12",max:"20",step:"1",class:"w-full h-2 bg-cyber-dark/50 rounded-lg appearance-none cursor-pointer slider"},null,512),[[Ae,t.value.fontSize,void 0,{number:!0}]]),p[31]||(p[31]=o("div",{class:"flex justify-between text-xs futuristic-subtitle mt-2"},[o("span",null,"12px"),o("span",null,"16px"),o("span",null,"20px")],-1))])]),o("div",cy,[o("div",uy,[o("div",dy,[o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(B,["prevent"])},[o("div",fy,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.aiWebSearchEnabled,readonly:""},null,8,py),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.aiWebSearchEnabled?"bg-cyan-500/20 border-cyan-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.aiWebSearchEnabled?"translate-x-6 from-cyan-400 to-blue-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)])])]),p[32]||(p[32]=o("div",{class:"flex-1"},[o("div",{class:"futuristic-title text-sm mb-2"},"启用AI网络搜索功能"),o("div",{class:"futuristic-subtitle text-xs leading-relaxed"},[Y(" 开启后，AI助手将能够自动检测搜索意图并执行网络搜索，获取最新信息。 "),o("span",{class:"text-cyan-400"},"支持实时信息查询，如新闻、天气、股价等。"),Y(" 关闭后，AI助手将仅使用训练数据回答问题。 ")])],-1))]),t.value.aiWebSearchEnabled?(h(),v("div",hy,[o("div",vy,[o("div",null,[p[34]||(p[34]=o("label",{class:"block futuristic-subtitle mb-3"},"搜索引擎",-1)),he(o("select",{"onUpdate:modelValue":p[7]||(p[7]=b=>t.value.aiSearchEngine=b),class:"futuristic-input w-full"},[...p[33]||(p[33]=[o("option",{value:"duckduckgo"},"DuckDuckGo (免费)",-1),o("option",{value:"serper"},"Google via Serper (需要API密钥)",-1)])],512),[[et,t.value.aiSearchEngine]])]),t.value.aiSearchEngine==="serper"?(h(),v("div",my,[p[35]||(p[35]=o("label",{class:"block futuristic-subtitle mb-3"},"Serper API密钥",-1)),o("div",gy,[he(o("input",{"onUpdate:modelValue":p[8]||(p[8]=b=>t.value.serperApiKey=b),type:k.showSerperKey?"text":"password",placeholder:"输入Serper API密钥",class:"futuristic-input w-full pr-12"},null,8,yy),[[Fr,t.value.serperApiKey]]),o("button",{onClick:p[9]||(p[9]=b=>k.showSerperKey=!k.showSerperKey),class:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded-lg hover:bg-cyber-primary/20 transition-colors"},[(h(),v("svg",_y,[k.showSerperKey?(h(),v("path",by)):(h(),v("path",wy))]))])]),p[36]||(p[36]=o("div",{class:"mt-2 text-xs futuristic-subtitle"},[Y(" 获取API密钥: "),o("a",{href:"https://serper.dev",target:"_blank",class:"text-cyan-400 hover:text-cyan-300"},"https://serper.dev")],-1))])):G("",!0)])])):G("",!0)])])])])):r.value==="pomodoro"?(h(),v("div",ky,[o("div",xy,[o("div",Cy,[o("div",$y,[p[37]||(p[37]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("h3",Sy,y(I(x).t("pomodoro_timer_settings")),1)])]),o("div",Ty,[o("div",null,[o("label",My,y(I(x).t("work_duration_minutes")),1),he(o("input",{"onUpdate:modelValue":p[10]||(p[10]=b=>t.value.pomodoroWorkDuration=b),type:"number",min:"1",max:"60",class:"futuristic-input w-full"},null,512),[[Ae,t.value.pomodoroWorkDuration,void 0,{number:!0}]]),o("div",Ay,y(I(x).t("recommended_25_minutes")),1)]),o("div",null,[o("label",Ey,y(I(x).t("short_break_duration_minutes")),1),he(o("input",{"onUpdate:modelValue":p[11]||(p[11]=b=>t.value.pomodoroShortBreak=b),type:"number",min:"1",max:"30",class:"futuristic-input w-full"},null,512),[[Ae,t.value.pomodoroShortBreak,void 0,{number:!0}]]),o("div",jy,y(I(x).t("recommended_5_minutes")),1)]),o("div",null,[o("label",Py,y(I(x).t("long_break_duration_minutes")),1),he(o("input",{"onUpdate:modelValue":p[12]||(p[12]=b=>t.value.pomodoroLongBreak=b),type:"number",min:"1",max:"60",class:"futuristic-input w-full"},null,512),[[Ae,t.value.pomodoroLongBreak,void 0,{number:!0}]]),o("div",Ny,y(I(x).t("recommended_15_minutes")),1)]),o("div",null,[o("label",Ly,y(I(x).t("long_break_interval")),1),he(o("input",{"onUpdate:modelValue":p[13]||(p[13]=b=>t.value.pomodoroLongBreakInterval=b),type:"number",min:"2",max:"10",class:"futuristic-input w-full"},null,512),[[Ae,t.value.pomodoroLongBreakInterval,void 0,{number:!0}]]),o("div",Iy,y(I(x).t("work_sessions_before_long_break")),1)])])]),o("div",By,[o("div",Oy,[o("div",Dy,[p[38]||(p[38]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})])],-1)),o("h3",zy,y(I(x).t("notification_settings")),1)])]),o("div",Ry,[o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(xe,["prevent"])},[o("div",Fy,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.pomodoroNotificationsEnabled,readonly:""},null,8,Vy),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.pomodoroNotificationsEnabled?"bg-orange-500/20 border-orange-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.pomodoroNotificationsEnabled?"translate-x-6 from-orange-400 to-red-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)]),o("span",Hy,y(I(x).t("enable_desktop_notifications")),1)]),o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(Ue,["prevent"])},[o("div",Uy,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.pomodoroSoundsEnabled,readonly:""},null,8,qy),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.pomodoroSoundsEnabled?"bg-orange-500/20 border-orange-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.pomodoroSoundsEnabled?"translate-x-6 from-orange-400 to-red-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)]),o("span",Ky,y(I(x).t("enable_sound_notifications")),1)])])])])):r.value==="ai"?(h(),v("div",Wy,[(h(!0),v(de,null,ge(F.value,b=>(h(),v("div",{key:b.key,class:"futuristic-card bg-gradient-to-br from-cyan-500/10 to-transparent"},[o("div",Gy,[o("div",Jy,[o("div",Xy,[p[39]||(p[39]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),o("div",null,[o("h3",Yy,y(b.name),1),o("p",Zy,y(b.description),1)])]),o("div",Qy,[t.value.apiProviders[b.key]?.isConnected?(h(),v("div",e_,[p[40]||(p[40]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",t_,y(I(x).t("connected")),1)])):(h(),v("div",s_,[p[41]||(p[41]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",o_,y(I(x).t("disconnected")),1)]))])])]),o("div",n_,[o("div",null,[o("label",r_,y(I(x).t("api_key")),1),o("div",i_,[he(o("input",{"onUpdate:modelValue":U=>t.value.apiProviders[b.key].apiKey=U,type:n.value?"text":"password",placeholder:I(x).t("enter_api_key_placeholder",{provider:b.name}),class:"futuristic-input w-full pr-12"},null,8,a_),[[Fr,t.value.apiProviders[b.key].apiKey]]),o("button",{onClick:p[14]||(p[14]=U=>n.value=!n.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded-lg hover:bg-cyber-primary/20 transition-colors"},[(h(),v("svg",l_,[n.value?(h(),v("path",c_)):(h(),v("path",u_))]))])])]),o("div",null,[o("label",d_,y(I(x).t("ai_model")),1),he(o("select",{"onUpdate:modelValue":U=>t.value.apiProviders[b.key].selectedModel=U,class:"futuristic-input w-full"},[(h(!0),v(de,null,ge(b.models,U=>(h(),v("option",{key:U,value:U},y(U),9,p_))),128))],8,f_),[[et,t.value.apiProviders[b.key].selectedModel]])]),o("div",h_,[t.value.apiProviders[b.key]?.isConnected?(h(),v("button",{key:1,onClick:U=>le(b.key),class:"futuristic-btn-danger flex items-center space-x-2"},[p[43]||(p[43]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),o("span",null,y(I(x).t("disconnect_api")),1)],8,m_)):(h(),v("button",{key:0,onClick:U=>$e(b.key),disabled:!t.value.apiProviders[b.key]?.apiKey,class:"futuristic-btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[p[42]||(p[42]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),o("span",null,y(I(x).t("connect_api")),1)],8,v_)),t.value.apiProviders[b.key]?.isConnected?(h(),v("button",{key:2,onClick:U=>t.value.currentProvider=b.key,class:ne(["futuristic-btn flex items-center space-x-2",t.value.currentProvider===b.key?"futuristic-btn-active":"border border-cyber-primary/40 hover:border-cyan-400/60"])},[p[44]||(p[44]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),o("span",null,y(t.value.currentProvider===b.key?I(x).t("currently_using"):I(x).t("set_as_default")),1)],10,g_)):G("",!0)])])]))),128)),o("div",y_,[o("div",__,[o("div",b_,[p[45]||(p[45]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),o("h3",w_,y(I(x).t("current_active_ai")),1)])]),o("div",k_,[p[46]||(p[46]=o("div",{class:"w-3 h-3 bg-green-400 rounded-full animate-pulse"},null,-1)),o("div",null,[o("div",x_,y(t.value.apiProviders[t.value.currentProvider].name),1),o("div",C_,y(I(x).t("model_colon",{model:t.value.apiProviders[t.value.currentProvider].selectedModel})),1)])])]),o("div",$_,[p[48]||(p[48]=Zt('<div class="futuristic-header mb-6" data-v-65db7a2b><div class="flex items-center space-x-3" data-v-65db7a2b><div class="futuristic-icon-container" data-v-65db7a2b><svg class="w-6 h-6 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-65db7a2b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" data-v-65db7a2b></path></svg></div><h3 class="futuristic-title-small" data-v-65db7a2b>AI权限设置</h3></div></div>',1)),o("div",S_,[o("div",T_,[o("div",M_,[o("div",A_,[o("label",{class:"flex items-center space-x-4 cursor-pointer group",onClick:ze(R,["prevent"])},[o("div",E_,[o("input",{type:"checkbox",class:"sr-only",checked:t.value.aiFileOperationsEnabled,readonly:""},null,8,j_),o("div",{class:ne(["w-12 h-6 rounded-full border-2 transition-all duration-300 cursor-pointer",t.value.aiFileOperationsEnabled?"bg-orange-500/20 border-orange-400":"bg-cyber-primary/20 border-cyber-primary/40"])},[o("div",{class:ne(["w-4 h-4 rounded-full bg-gradient-to-r transition-all duration-300 mt-0.5 pointer-events-none",t.value.aiFileOperationsEnabled?"translate-x-6 from-orange-400 to-red-400":"translate-x-0.5 from-cyber-primary to-blue-400"])},null,2)],2)])])]),p[47]||(p[47]=o("div",{class:"flex-1"},[o("div",{class:"futuristic-title text-sm mb-2"},"启用AI文件操作功能"),o("div",{class:"futuristic-subtitle text-xs leading-relaxed"},[Y(" 开启后，AI助手将能够执行文件操作指令，如读取、创建、修改和删除文件。 "),o("span",{class:"text-orange-400"},"注意：此功能具有一定风险，请谨慎使用。"),Y(" 关闭后，AI助手将仅限于页面操作，如创建笔记和待办事项。 ")])],-1))])])])])])):r.value==="data"?(h(),v("div",P_,[o("div",N_,[o("div",L_,[o("div",I_,[p[49]||(p[49]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])],-1)),o("h3",B_,y(I(x).t("data_export")),1)])]),o("div",O_,[o("div",D_,[o("p",z_,y(I(x).t("export_all_data_info")),1),o("div",R_,[o("button",{onClick:H,class:"futuristic-btn-primary flex items-center space-x-2"},[p[50]||(p[50]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),o("span",null,y(I(x).t("export_data_btn")),1)]),o("div",F_,y(I(x).t("last_export_never")),1)])])])]),o("div",V_,[o("div",H_,[o("div",U_,[p[51]||(p[51]=o("div",{class:"futuristic-icon-container"},[o("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),o("h3",q_,y(I(x).t("danger_zone")),1)])]),o("div",K_,[o("div",W_,[o("div",G_,[p[53]||(p[53]=o("div",{class:"futuristic-icon-container bg-red-500/20"},[o("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),o("div",J_,[o("h4",X_,y(I(x).t("clear_all_data_btn")),1),o("p",Y_,y(I(x).t("clear_all_data_warning")),1),o("button",{onClick:re,class:"futuristic-btn-danger flex items-center space-x-2"},[p[52]||(p[52]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),o("span",null,y(I(x).t("clear_all_data_btn")),1)])])])])])])])):G("",!0),r.value==="about"?(h(),v("div",Z_,[o("div",Q_,[p[62]||(p[62]=o("div",{class:"futuristic-icon-container mx-auto mb-6 w-20 h-20"},[o("svg",{class:"w-12 h-12 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),o("h3",eb,y(I(x).t("ai_smart_notebook")),1),o("div",tb,y(I(x).t("version"))+" 1.0.0",1),o("p",sb,y(I(x).t("app_description_full")),1),o("div",ob,[o("div",nb,[p[54]||(p[54]=o("div",{class:"futuristic-icon-container mb-3"},[o("svg",{class:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})])],-1)),o("div",rb,y(I(x).t("developer")),1),p[55]||(p[55]=o("div",{class:"futuristic-subtitle"},"AI Assistant",-1))]),o("div",ib,[p[56]||(p[56]=o("div",{class:"futuristic-icon-container mb-3"},[o("svg",{class:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),o("div",ab,y(I(x).t("tech_stack")),1),p[57]||(p[57]=o("div",{class:"futuristic-subtitle"},"Vue.js + Flask",-1))]),o("div",lb,[p[58]||(p[58]=o("div",{class:"futuristic-icon-container mb-3"},[o("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),o("div",cb,y(I(x).t("license")),1),p[59]||(p[59]=o("div",{class:"futuristic-subtitle"},"MIT License",-1))])]),o("div",ub,[o("button",{onClick:ce,class:"futuristic-btn-secondary flex items-center space-x-2"},[p[60]||(p[60]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,y(I(x).t("help_docs")),1)]),o("button",{onClick:V,class:"futuristic-btn-secondary flex items-center space-x-2"},[p[61]||(p[61]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)),o("span",null,y(I(x).t("github_repo")),1)])])])])):G("",!0),o("div",db,[o("div",fb,[a.value==="saving"?(h(),v("div",pb,[p[63]||(p[63]=o("div",{class:"relative"},[o("svg",{class:"w-5 h-5 text-blue-400 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),o("span",hb,y(I(x).t("auto_saving")),1)])):a.value==="saved"?(h(),v("div",{key:1,class:ne(["flex items-center space-x-3 px-4 py-2 rounded-lg bg-green-500/10 border border-green-500/30 transition-all duration-300",{"scale-105":u.value}])},[o("div",vb,[p[64]||(p[64]=o("svg",{class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),u.value?(h(),v("div",mb)):G("",!0)]),o("span",gb,[Y(y(I(x).t("auto_saved"))+" ",1),l.value?(h(),v("span",yb,y(te(l.value)),1)):G("",!0)])],2)):a.value==="error"?(h(),v("div",_b,[p[65]||(p[65]=o("div",{class:"relative"},[o("svg",{class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("span",bb,y(I(x).t("auto_save_error")),1)])):(h(),v("div",wb,[p[66]||(p[66]=o("div",{class:"relative"},[o("svg",{class:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),o("div",{class:"absolute -top-1 -right-1 w-2 h-2 bg-cyan-400 rounded-full animate-pulse"})],-1)),o("span",kb,y(I(x).t("auto_save_enabled")),1)]))]),o("div",xb,[o("div",Cb,[o("button",{onClick:L,class:"futuristic-btn-secondary flex items-center space-x-2",disabled:!d.value||Object.keys(d.value).length===0},[p[67]||(p[67]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)),o("span",null,y(I(x).t("reset_options")),1)],8,$b),o("button",{onClick:J,class:"futuristic-btn-danger flex items-center space-x-2",disabled:a.value==="saving"},[p[68]||(p[68]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),o("span",null,y(a.value==="saving"?I(x).t("resetting"):I(x).t("factory_reset")),1)],8,Sb)])])])])])]))}}),Mb=Oe(Tb,[["__scopeId","data-v-65db7a2b"]]),Ab={class:"ai-assistant-page"},Eb={class:"dynamic-background"},jb={class:"floating-particles"},Pb={class:"sidebar-header"},Nb={class:"flex items-center justify-between"},Lb={key:0,class:"text-lg font-bold text-white"},Ib={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Bb=["d"],Ob={key:0,class:"topics-list"},Db={key:0,class:"topics-toolbar"},zb={class:"toolbar-left"},Rb={class:"checkbox-container"},Fb=["checked"],Vb={key:0,class:"selected-count"},Hb={class:"toolbar-right"},Ub={class:"topics-container"},qb={class:"topic-checkbox"},Kb={class:"checkbox-container"},Wb=["checked","onChange"],Gb=["onClick"],Jb={class:"topic-title"},Xb={class:"topic-preview"},Yb={class:"topic-time"},Zb={class:"topic-actions"},Qb=["onClick"],ew=["onClick"],tw={key:1,class:"pagination"},sw=["disabled"],ow={class:"pagination-info"},nw={class:"page-info"},rw={class:"total-info"},iw=["disabled"],aw={key:2,class:"empty-state"},lw={class:"main-content"},cw={class:"toolbar"},uw={class:"flex items-center justify-between"},dw={class:"flex items-center space-x-4"},fw={key:0,class:"text-gray-400 text-sm"},pw={class:"model-selector"},hw=["value"],vw={key:0,class:"welcome-message"},mw={class:"text-center py-16"},gw={class:"example-questions"},yw={class:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto"},_w=["onClick"],bw={class:"text-left"},ww={class:"font-medium text-white mb-1"},kw={class:"text-sm text-gray-400"},xw={key:1,class:"messages-list"},Cw={class:"message-avatar"},$w={key:0,class:"user-avatar"},Sw={key:1,class:"assistant-avatar"},Tw={class:"message-content"},Mw={class:"message-bubble"},Aw={class:"message-text"},Ew={class:"message-time"},jw={key:0,class:"message-item assistant-message"},Pw={class:"input-area"},Nw={class:"input-container"},Lw=["disabled"],Iw=["disabled"],Bw=Fe({__name:"AIAssistantPage",emits:["close"],setup(e){const t=O(!1),s=O(null),n=O([]),r=O(""),i=O(!1),a=O("openai/gpt-5-chat"),l=O(),u=O(),d=O(1),c=O(10),f=O(new Set),C=[{id:"openai/gpt-5-chat",name:"GPT-5",provider:"openrouter"},{id:"anthropic/claude-sonnet-4",name:"Claude Sonnet 4",provider:"openrouter"},{id:"google/gemini-2.5-pro-preview",name:"Gemini Pro Preview 2.5",provider:"openrouter"},{id:"deepseek/deepseek-chat-v3.1:free",name:"Deepseek V3.1",provider:"openrouter"},{id:"deepseek/deepseek-r1-0528:free",name:"Deepseek R1",provider:"openrouter"}],N=[{id:"1",title:"笔记管理",question:"请帮我创建一个关于项目规划的笔记"},{id:"2",title:"待办事项",question:"请帮我列出所有待办事项"},{id:"3",title:"文件操作",question:"请帮我查看当前目录的文件"},{id:"4",title:"代码助手",question:"请帮我解释这段代码的功能"}],S=be(()=>Math.ceil(n.value.length/c.value)),$=be(()=>{const V=(d.value-1)*c.value,H=V+c.value;return n.value.slice(V,H)}),_=be(()=>f.value.size>0),m=be(()=>$.value.length>0&&$.value.every(V=>f.value.has(V.id))),g=be(()=>n.value.find(V=>V.id===s.value)),E=be(()=>g.value?.messages||[]),P=()=>{t.value=!t.value},j=async()=>{const V={id:Date.now().toString(),title:"新对话",updatedAt:je.now(),messages:[]};n.value.unshift(V),s.value=V.id,await Ve(V),await Et(),u.value?.focus()},A=V=>{s.value=V,me()},F=async V=>{const H=n.value.find($e=>$e.id===V);if(!H)return;const re=prompt("请输入新的话题名称:",H.title);re&&re.trim()&&(H.title=re.trim(),H.updatedAt=je.now(),await Ve(H))},K=async V=>{confirm("确定要删除这个话题吗？")&&(await ce(V),n.value=n.value.filter(H=>H.id!==V),localStorage.setItem("ai-assistant-topics",JSON.stringify(n.value)),s.value===V&&(s.value=n.value.length>0?n.value[0].id:null))},L=async V=>{g.value||await j(),r.value=V,await Et(),J()},J=async()=>{if(!r.value.trim()||i.value)return;g.value||await j();const V={id:Date.now().toString(),role:"user",content:r.value.trim(),timestamp:je.now()};g.value.messages.push(V),g.value.lastMessage=V.content,g.value.updatedAt=je.now(),await Ve(g.value);const H=r.value.trim();r.value="",u.value&&(u.value.style.height="auto"),i.value=!0,me();try{g.value.messages.length===1&&await ae(g.value.id,H);const re=await Ke.sendMessage(H,a.value);if(re.success){const $e={id:(Date.now()+1).toString(),role:"assistant",content:re.message,timestamp:je.now()};g.value.messages.push($e),g.value.lastMessage=re.message,g.value.updatedAt=je.now(),await Ve(g.value)}else throw new Error(re.error||"发送消息失败")}catch(re){console.error("发送消息失败:",re);const $e={id:(Date.now()+2).toString(),role:"assistant",content:"抱歉，发送消息时出现错误，请稍后重试。",timestamp:je.now()};g.value.messages.push($e)}finally{i.value=!1,me()}},ae=async(V,H)=>{try{const re=await Ke.generateTopicName(H);if(re.success&&re.topicName){const $e=n.value.find(le=>le.id===V);$e&&($e.title=re.topicName)}}catch(re){console.error("自动命名话题失败:",re)}},oe=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),J()),Et(()=>{u.value&&(u.value.style.height="auto",u.value.style.height=u.value.scrollHeight+"px")})},me=()=>{Et(()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)})},Ee=V=>{const H=je.now(),re=new Date(V),$e=H.getTime()-re.getTime(),le=Math.floor($e/6e4),M=Math.floor($e/36e5),te=Math.floor($e/864e5);return le<1?"刚刚":le<60?`${le}分钟前`:M<24?`${M}小时前`:te<7?`${te}天前`:re.toLocaleDateString()},De=V=>{V>=1&&V<=S.value&&(d.value=V,f.value.clear())},ee=V=>{f.value.has(V)?f.value.delete(V):f.value.add(V)},R=()=>{m.value?$.value.forEach(V=>{f.value.delete(V.id)}):$.value.forEach(V=>{f.value.add(V.id)})},B=async()=>{if(f.value.size===0||!confirm(`确定要删除选中的 ${f.value.size} 个话题吗？此操作不可撤销。`))return;const V=Array.from(f.value);for(const H of V){await ce(H);const re=n.value.findIndex($e=>$e.id===H);re!==-1&&n.value.splice(re,1),s.value===H&&(s.value=null)}f.value.clear(),d.value>S.value&&S.value>0&&(d.value=S.value),localStorage.setItem("ai-assistant-topics",JSON.stringify(n.value))},xe=async()=>{if(n.value.length!==0&&confirm(`确定要清空所有 ${n.value.length} 个话题吗？此操作不可撤销。`)){for(const V of n.value)await ce(V.id);n.value=[],f.value.clear(),s.value=null,d.value=1,localStorage.setItem("ai-assistant-topics",JSON.stringify([]))}},Ue=async()=>{try{const V=await Ke.getTopics();if(V.success)n.value=V.topics||[],localStorage.setItem("ai-assistant-topics",JSON.stringify(n.value));else{console.error("加载话题失败:",V.error);const H=localStorage.getItem("ai-assistant-topics");H&&(n.value=JSON.parse(H))}}catch(V){console.error("加载话题失败:",V);const H=localStorage.getItem("ai-assistant-topics");H&&(n.value=JSON.parse(H))}},Ve=async V=>{try{let H;return V.id&&n.value.find(re=>re.id===V.id)?H=await Ke.updateTopic(V.id,V):(H=await Ke.createTopic(V),H.success&&H.topic&&(V.id=H.topic.id)),H.success||(console.error("保存话题失败:",H.error),localStorage.setItem("ai-assistant-topics",JSON.stringify(n.value))),H}catch(H){return console.error("保存话题失败:",H),localStorage.setItem("ai-assistant-topics",JSON.stringify(n.value)),{success:!1,error:H.message||"保存话题失败"}}},ce=async V=>{try{const H=await Ke.deleteTopic(V);H.success||console.error("删除话题失败:",H.error)}catch(H){console.error("删除话题失败:",H)}};return Re(s,()=>{me()}),Re(()=>n.value.length,()=>{d.value>S.value&&S.value>0&&(d.value=S.value)}),Je(async()=>{await Ue()}),(V,H)=>(h(),v("div",Ab,[o("div",Eb,[H[5]||(H[5]=o("div",{class:"gradient-orb orb-1"},null,-1)),H[6]||(H[6]=o("div",{class:"gradient-orb orb-2"},null,-1)),H[7]||(H[7]=o("div",{class:"gradient-orb orb-3"},null,-1)),o("div",jb,[(h(),v(de,null,ge(20,re=>o("div",{key:re,class:"particle",style:He({"--delay":Math.random()*10+"s","--duration":Math.random()*20+10+"s","--x":Math.random()*100+"%","--y":Math.random()*100+"%"})},null,4)),64))])]),o("div",{class:ne(["sidebar",{collapsed:t.value}])},[o("div",Pb,[o("div",Nb,[t.value?G("",!0):(h(),v("h2",Lb,"对话话题")),o("button",{onClick:P,class:"sidebar-toggle-btn"},[(h(),v("svg",Ib,[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:t.value?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"},null,8,Bb)]))])]),t.value?G("",!0):(h(),v("button",{key:0,onClick:j,class:"new-topic-btn"},[...H[8]||(H[8]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Y(" 新建对话 ",-1)])]))]),t.value?G("",!0):(h(),v("div",Ob,[n.value.length>0?(h(),v("div",Db,[o("div",zb,[o("label",Rb,[o("input",{type:"checkbox",checked:m.value,onChange:R,class:"checkbox"},null,40,Fb),H[9]||(H[9]=o("span",{class:"checkmark"},null,-1)),H[10]||(H[10]=o("span",{class:"checkbox-label"},"全选",-1))]),_.value?(h(),v("span",Vb," 已选择 "+y(f.value.size)+" 个话题 ",1)):G("",!0)]),o("div",Hb,[_.value?(h(),v("button",{key:0,onClick:B,class:"batch-action-btn danger"},[...H[11]||(H[11]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 删除选中 ",-1)])])):G("",!0),o("button",{onClick:xe,class:"batch-action-btn danger"},[...H[12]||(H[12]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 清空全部 ",-1)])])])])):G("",!0),o("div",Ub,[(h(!0),v(de,null,ge($.value,re=>(h(),v("div",{key:re.id,class:ne(["topic-item","group",{active:s.value===re.id,selected:f.value.has(re.id)}])},[o("div",qb,[o("label",Kb,[o("input",{type:"checkbox",checked:f.value.has(re.id),onChange:$e=>ee(re.id),onClick:H[0]||(H[0]=ze(()=>{},["stop"])),class:"checkbox"},null,40,Wb),H[13]||(H[13]=o("span",{class:"checkmark"},null,-1))])]),o("div",{class:"topic-content",onClick:$e=>A(re.id)},[o("h3",Jb,y(re.title),1),o("p",Xb,y(re.lastMessage||"暂无消息"),1),o("span",Yb,y(Ee(re.updatedAt)),1)],8,Gb),o("div",Zb,[o("button",{onClick:ze($e=>F(re.id),["stop"]),class:"action-btn"},[...H[14]||(H[14]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Qb),o("button",{onClick:ze($e=>K(re.id),["stop"]),class:"action-btn danger"},[...H[15]||(H[15]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ew)])],2))),128))]),S.value>1?(h(),v("div",tw,[o("button",{onClick:H[1]||(H[1]=re=>De(d.value-1)),disabled:d.value===1,class:"pagination-btn"},[...H[16]||(H[16]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,sw),o("div",ow,[o("span",nw,y(d.value)+" / "+y(S.value),1),o("span",rw,"共 "+y(n.value.length)+" 个话题",1)]),o("button",{onClick:H[2]||(H[2]=re=>De(d.value+1)),disabled:d.value===S.value,class:"pagination-btn"},[...H[17]||(H[17]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,iw)])):G("",!0),n.value.length===0?(h(),v("div",aw,[...H[18]||(H[18]=[Zt('<div class="text-center py-8" data-v-bc56e439><svg class="w-12 h-12 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bc56e439><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" data-v-bc56e439></path></svg><p class="text-gray-400 text-sm" data-v-bc56e439>还没有对话话题</p><p class="text-gray-500 text-xs mt-1" data-v-bc56e439>点击&quot;新建对话&quot;开始</p></div>',1)])])):G("",!0)]))],2),o("div",lw,[o("div",cw,[o("div",uw,[o("div",dw,[H[19]||(H[19]=o("h1",{class:"text-xl font-bold text-white"},"AI 助手",-1)),g.value?(h(),v("span",fw,y(g.value.title),1)):G("",!0)]),o("div",pw,[he(o("select",{"onUpdate:modelValue":H[3]||(H[3]=re=>a.value=re),class:"model-select"},[(h(),v(de,null,ge(C,re=>o("option",{key:re.id,value:re.id},y(re.name),9,hw)),64))],512),[[et,a.value]])])])]),o("div",{class:"messages-container",ref_key:"messagesContainer",ref:l},[g.value?(h(),v("div",xw,[(h(!0),v(de,null,ge(E.value,re=>(h(),v("div",{key:re.id,class:ne(["message-item",re.role==="user"?"user-message":"assistant-message"])},[o("div",Cw,[re.role==="user"?(h(),v("div",$w,[...H[24]||(H[24]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])])):(h(),v("div",Sw,[...H[25]||(H[25]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)])]))]),o("div",Tw,[o("div",Mw,[o("p",Aw,y(re.content),1),o("span",Ew,y(Ee(re.timestamp)),1)])])],2))),128)),i.value?(h(),v("div",jw,[...H[26]||(H[26]=[Zt('<div class="message-avatar" data-v-bc56e439><div class="assistant-avatar" data-v-bc56e439><svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bc56e439><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-bc56e439></path></svg></div></div><div class="message-content" data-v-bc56e439><div class="message-bubble loading" data-v-bc56e439><div class="typing-indicator" data-v-bc56e439><div class="typing-dot" data-v-bc56e439></div><div class="typing-dot" data-v-bc56e439></div><div class="typing-dot" data-v-bc56e439></div></div></div></div>',2)])])):G("",!0)])):(h(),v("div",vw,[o("div",mw,[H[21]||(H[21]=o("svg",{class:"w-24 h-24 mb-6 text-cyber-primary",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1)),H[22]||(H[22]=o("h2",{class:"text-2xl font-bold text-white mb-4"},"欢迎使用 AI 助手",-1)),H[23]||(H[23]=o("p",{class:"text-gray-400 mb-8"},"选择一个话题开始对话，或创建新的对话话题",-1)),o("div",gw,[H[20]||(H[20]=o("h3",{class:"text-lg font-semibold text-white mb-4"},"试试这些问题：",-1)),o("div",yw,[(h(),v(de,null,ge(N,re=>o("button",{key:re.id,onClick:$e=>L(re.question),class:"example-question-btn"},[o("div",bw,[o("div",ww,y(re.title),1),o("div",kw,y(re.question),1)])],8,_w)),64))])])])]))],512),o("div",Pw,[o("div",Nw,[he(o("textarea",{"onUpdate:modelValue":H[4]||(H[4]=re=>r.value=re),onKeydown:oe,disabled:i.value,placeholder:"输入您的问题或指令...",class:"message-input",rows:"1",ref_key:"messageInput",ref:u},null,40,Lw),[[Ae,r.value]]),o("button",{onClick:J,class:"send-btn",disabled:!r.value.trim()||i.value},[...H[27]||(H[27]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,Iw)])])])]))}}),qa=Oe(Bw,[["__scopeId","data-v-bc56e439"]]),Ow={class:"floating-ai-assistant"},Dw={class:"ai-ball-main"},zw={class:"particle-effect"},Rw={class:"panel-header"},Fw={class:"flex items-center space-x-2"},Vw=["title"],Hw={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Uw={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qw={key:0,class:"welcome-message"},Kw={class:"text-sm whitespace-pre-wrap"},Ww={class:"text-xs opacity-70 mt-1 block"},Gw={key:1,class:"flex justify-start"},Jw={class:"model-info"},Xw={class:"flex items-center justify-center space-x-2 text-purple-300/70 text-xs"},Yw={key:0,class:"operations-panel"},Zw={class:"ops-tabs"},Qw=["onClick"],e3={key:0,class:"ops-content"},t3={class:"ops-grid"},s3={key:1,class:"ops-content"},o3={class:"ops-grid"},n3={key:2,class:"ops-content"},r3={class:"ops-grid"},i3={key:3,class:"ops-content"},a3={class:"ops-grid"},l3={class:"input-area"},c3={class:"input-controls"},u3={class:"model-selector"},d3=["value"],f3={class:"input-container"},p3=["disabled"],h3=["disabled"],v3={key:0,class:"ai-assistant-fullpage"},m3=Fe({__name:"FloatingAIAssistant",setup(e){const t=O(),s=O(),n=O(!1),r=O(!1),i=O(!1),a=O(""),l=O([]),u=O("openai/gpt-5-chat"),d=O(!1),c=O("file"),f=O(null),C=O([]),N=O("compact"),S=O(!1),$=yt({x:window.innerWidth-100,y:window.innerHeight-100}),_=yt({x:0,y:0}),m=yt({x:0,y:0}),g=yt({x:0,y:0,time:0}),E=O(!1),P=le=>{const M=le*60*Math.PI/180,te=15,fe=Math.cos(M)*te,ts=Math.sin(M)*te;return{transform:`translate(${fe}px, ${ts}px)`,animationDelay:`${le*.1}s`}},j=[{value:"openai/gpt-5-chat",label:"GPT-5",provider:"openrouter"},{value:"anthropic/claude-sonnet-4",label:"Claude Sonnet 4",provider:"openrouter"},{value:"google/gemini-2.5-pro-preview",label:"Gemini Pro Preview 2.5",provider:"openrouter"},{value:"deepseek/deepseek-chat-v3.1:free",label:"Deepseek V3.1",provider:"openrouter"},{value:"deepseek/deepseek-r1-0528:free",label:"Deepseek R1",provider:"openrouter"}],A=async()=>{try{const le=await fetch("/api/settings");if(le.ok){const M=await le.json(),te=[];return M.apiProviders?.openrouter?.isConnected&&te.push(...j.filter(fe=>fe.provider==="openrouter")),te.length>0?te:j}}catch(le){console.error("获取可用模型失败:",le)}return j},F=O(j),K=[{key:"file",label:"文件",icon:"svg"},{key:"note",label:"笔记",icon:"svg"},{key:"todo",label:"待办",icon:"svg"},{key:"settings",label:"设置",icon:"svg"}],L=le=>{if(n.value)return;le.preventDefault();const M="touches"in le?le.touches[0].clientX:le.clientX,te="touches"in le?le.touches[0].clientY:le.clientY;g.x=M,g.y=te,g.time=Date.now(),E.value=!1,m.x=M-$.x,m.y=te-$.y,document.addEventListener("mousemove",J),document.addEventListener("mouseup",ae),document.addEventListener("touchmove",J),document.addEventListener("touchend",ae)},J=le=>{const M="touches"in le?le.touches[0].clientX:le.clientX,te="touches"in le?le.touches[0].clientY:le.clientY,fe=Math.abs(M-g.x),ts=Math.abs(te-g.y);Math.sqrt(fe*fe+ts*ts)>5&&!r.value&&(r.value=!0,E.value=!0),r.value&&($.x=Math.max(0,Math.min(window.innerWidth-64,M-m.x)),$.y=Math.max(0,Math.min(window.innerHeight-64,te-m.y)))},ae=()=>{setTimeout(()=>{r.value=!1},10),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",ae),document.removeEventListener("touchmove",J),document.removeEventListener("touchend",ae)},oe=()=>{if(r.value||E.value){E.value=!1;return}Date.now()-g.time>300||(n.value?Ee():me())},me=()=>{n.value=!0,De()},Ee=()=>{n.value=!1},De=()=>{const le=Math.min(420,window.innerWidth-40),M=Math.min(600,window.innerHeight-40);let te=$.x-le+64,fe=$.y;te=Math.max(20,Math.min(window.innerWidth-le-20,te)),fe=Math.max(20,Math.min(window.innerHeight-M-20,fe)),_.x=te,_.y=fe},ee=async()=>{if(!a.value.trim()||i.value)return;f.value||await V();const le={role:"user",content:a.value,timestamp:je.now()};l.value.push(le);const M=a.value;a.value="",f.value&&await Ke.addMessageToTopic(f.value,{role:"user",content:M,timestamp:je.now()}),await Et(),xe(),i.value=!0;try{const te=await Ke.chat(l.value,u.value,!0),fe={role:"assistant",content:te.success?te.response:"抱歉，我现在无法回答您的问题。",timestamp:je.now()};l.value.push(fe),f.value&&(await Ke.addMessageToTopic(f.value,{role:"assistant",content:fe.content,timestamp:je.now()}),l.value.length===2&&await H(M)),await Et(),xe()}catch(te){console.error("AI聊天失败:",te);const fe={role:"assistant",content:"抱歉，发生了错误，请稍后再试。",timestamp:je.now()};l.value.push(fe)}finally{i.value=!1}},R=()=>{d.value=!d.value},B=(le,M)=>{a.value=M,d.value=!1,Et(()=>{const te=document.querySelector(".message-input");te&&te.focus()})},xe=()=>{s.value&&(s.value.scrollTop=s.value.scrollHeight)},Ue=le=>je.formatTime(le,"zh-CN"),Ve=()=>{$.x=Math.max(0,Math.min(window.innerWidth-64,$.x)),$.y=Math.max(0,Math.min(window.innerHeight-64,$.y)),n.value&&De()},ce=async()=>{const le=await A();F.value=le,le.length>0&&!le.find(M=>M.value===u.value)&&(u.value=le[0].value)},V=async()=>{const le={id:Date.now().toString(),title:"新对话",description:"",lastMessage:"",createdAt:je.now(),updatedAt:je.now(),messages:[]};try{const M=await Ke.createTopic(le);M.success&&M.topic?(le.id=M.topic.id,C.value.unshift(le),f.value=le.id):(C.value.unshift(le),f.value=le.id,localStorage.setItem("ai-assistant-topics",JSON.stringify(C.value)))}catch(M){console.error("创建话题失败:",M),C.value.unshift(le),f.value=le.id,localStorage.setItem("ai-assistant-topics",JSON.stringify(C.value))}},H=async le=>{if(f.value)try{const M=await Ke.generateTopicName(le);if(M.success&&M.topicName){const te=C.value.find(fe=>fe.id===f.value);te&&(te.title=M.topicName,te.updatedAt=je.now(),await Ke.updateTopic(f.value,{title:M.topicName,updatedAt:je.now()}))}}catch(M){console.error("自动命名话题失败:",M)}},re=()=>{N.value==="compact"?(N.value="full",S.value=!0,n.value=!1):(N.value="compact",S.value=!1)},$e=()=>{N.value="compact",S.value=!1};return Je(()=>{window.addEventListener("resize",Ve),ce()}),Ut(()=>{window.removeEventListener("resize",Ve),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",ae),document.removeEventListener("touchmove",J),document.removeEventListener("touchend",ae)}),(le,M)=>(h(),v(de,null,[o("div",Ow,[Ce(us,{name:"ball"},{default:Jt(()=>[n.value?G("",!0):(h(),v("div",{key:0,ref_key:"floatingBall",ref:t,class:ne(["ai-floating-ball",{dragging:r.value}]),style:He({left:$.x+"px",top:$.y+"px"}),onMousedown:L,onClick:oe,onTouchstart:L},[M[24]||(M[24]=o("div",{class:"outer-ring animate-pulse-ring"},null,-1)),M[25]||(M[25]=o("div",{class:"outer-ring animate-pulse-ring",style:{"animation-delay":"0.5s"}},null,-1)),o("div",Dw,[o("div",zw,[(h(),v(de,null,ge(6,te=>o("div",{class:"particle",key:te,style:He(P(te))},null,4)),64))]),M[22]||(M[22]=o("div",{class:"ai-icon"},[o("svg",{class:"w-8 h-8",viewBox:"0 0 24 24",fill:"none"},[o("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),o("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),o("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"})])],-1)),M[23]||(M[23]=o("div",{class:"status-indicator"},[o("div",{class:"status-dot animate-pulse"})],-1))])],38))]),_:1}),Ce(us,{name:"panel"},{default:Jt(()=>[n.value?(h(),v("div",{key:0,class:"ai-panel glass-effect",style:He({left:_.x+"px",top:_.y+"px"})},[o("div",Rw,[M[29]||(M[29]=o("div",{class:"flex items-center space-x-3"},[o("div",{class:"relative"},[o("div",{class:"w-4 h-4 bg-gradient-to-r from-green-400 to-cyan-400 rounded-full animate-pulse"}),o("div",{class:"absolute inset-0 w-4 h-4 bg-green-400 rounded-full animate-ping opacity-30"})]),o("div",null,[o("h3",{class:"font-bold text-white text-lg"},"AI智能助手"),o("p",{class:"text-xs text-purple-300/70"},"Neural Network v2.0")])],-1)),o("div",Fw,[o("button",{onClick:re,class:"view-mode-btn group",title:N.value==="compact"?"切换到完整页面":"返回紧凑模式"},[N.value==="compact"?(h(),v("svg",Hw,[...M[26]||(M[26]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"},null,-1)])])):(h(),v("svg",Uw,[...M[27]||(M[27]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"},null,-1)])]))],8,Vw),o("button",{onClick:Ee,class:"close-btn group"},[...M[28]||(M[28]=[o("svg",{class:"w-5 h-5 transition-transform group-hover:rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),o("div",{class:"messages-container",ref_key:"messagesContainer",ref:s},[l.value.length===0?(h(),v("div",qw,[...M[30]||(M[30]=[o("div",{class:"text-center py-8"},[o("div",{class:"relative mb-6"},[o("div",{class:"w-16 h-16 mx-auto bg-gradient-to-br from-purple-500 to-cyan-500 rounded-full flex items-center justify-center animate-glow"},[o("svg",{class:"w-8 h-8 text-white animate-pulse",viewBox:"0 0 24 24",fill:"none"},[o("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),o("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),o("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"})])]),o("div",{class:"absolute inset-0 w-16 h-16 mx-auto bg-purple-500 rounded-full animate-ping opacity-20"})]),o("h4",{class:"text-xl font-bold bg-gradient-to-r from-purple-400 to-cyan-400 bg-clip-text text-transparent mb-3"}," AI助手已激活 "),o("p",{class:"text-purple-300/80 text-sm leading-relaxed"},[Y(" 我是您的智能助手，可以帮助您："),o("br"),Y(" 管理笔记内容 • 处理待办事项 • 操作文件 • 调整设置 ")]),o("div",{class:"mt-6 flex justify-center space-x-2"},[o("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),o("div",{class:"w-2 h-2 bg-cyan-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}}),o("div",{class:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{"animation-delay":"0.4s"}})])],-1)])])):G("",!0),(h(!0),v(de,null,ge(l.value,(te,fe)=>(h(),v("div",{key:fe,class:ne(["flex",te.role==="user"?"justify-end":"justify-start"])},[o("div",{class:ne(["max-w-xs lg:max-w-md px-4 py-2 rounded-lg",te.role==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white"])},[o("p",Kw,y(te.content),1),o("span",Ww,y(Ue(te.timestamp)),1)],2)],2))),128)),i.value?(h(),v("div",Gw,[...M[31]||(M[31]=[o("div",{class:"bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg"},[o("div",{class:"flex items-center space-x-1"},[o("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),o("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),o("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})])],-1)])])):G("",!0)],512),o("div",Jw,[o("div",Xw,[M[32]||(M[32]=o("div",{class:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},null,-1)),o("span",null,"当前模型: "+y(u.value),1)])]),d.value?(h(),v("div",Yw,[o("div",Zw,[(h(),v(de,null,ge(K,te=>o("button",{key:te.key,onClick:fe=>c.value=te.key,class:ne(["tab-btn",{active:c.value===te.key}])},[(h(),Ie(Xl(te.icon),{class:"w-4 h-4"})),Y(" "+y(te.label),1)],10,Qw)),64)),o("button",{onClick:M[0]||(M[0]=te=>d.value=!1),class:"close-tab-btn"},[...M[33]||(M[33]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),c.value==="file"?(h(),v("div",e3,[o("div",t3,[o("button",{onClick:M[1]||(M[1]=te=>B("read","请读取文件: ")),class:"op-btn"},[...M[34]||(M[34]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Y(" 读取文件 ",-1)])]),o("button",{onClick:M[2]||(M[2]=te=>B("write","请写入文件: ")),class:"op-btn"},[...M[35]||(M[35]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Y(" 写入文件 ",-1)])]),o("button",{onClick:M[3]||(M[3]=te=>B("create","请创建文件: ")),class:"op-btn"},[...M[36]||(M[36]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Y(" 创建文件 ",-1)])]),o("button",{onClick:M[4]||(M[4]=te=>B("list","请列出目录: ")),class:"op-btn"},[...M[37]||(M[37]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})],-1),Y(" 列出目录 ",-1)])]),o("button",{onClick:M[5]||(M[5]=te=>B("delete","请删除文件: ")),class:"op-btn danger"},[...M[38]||(M[38]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 删除文件 ",-1)])])])])):G("",!0),c.value==="note"?(h(),v("div",s3,[o("div",o3,[o("button",{onClick:M[6]||(M[6]=te=>B("create-note","请创建笔记: ")),class:"op-btn"},[...M[39]||(M[39]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Y(" 创建笔记 ",-1)])]),o("button",{onClick:M[7]||(M[7]=te=>B("edit-note","请编辑笔记: ")),class:"op-btn"},[...M[40]||(M[40]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Y(" 编辑笔记 ",-1)])]),o("button",{onClick:M[8]||(M[8]=te=>B("search-note","请搜索笔记: ")),class:"op-btn"},[...M[41]||(M[41]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),Y(" 搜索笔记 ",-1)])]),o("button",{onClick:M[9]||(M[9]=te=>B("list-notes","请列出所有笔记")),class:"op-btn"},[...M[42]||(M[42]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),Y(" 列出笔记 ",-1)])]),o("button",{onClick:M[10]||(M[10]=te=>B("delete-note","请删除笔记: ")),class:"op-btn danger"},[...M[43]||(M[43]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 删除笔记 ",-1)])])])])):G("",!0),c.value==="todo"?(h(),v("div",n3,[o("div",r3,[o("button",{onClick:M[11]||(M[11]=te=>B("create-todo","请创建待办事项: ")),class:"op-btn"},[...M[44]||(M[44]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Y(" 创建待办 ",-1)])]),o("button",{onClick:M[12]||(M[12]=te=>B("complete-todo","请完成待办事项: ")),class:"op-btn"},[...M[45]||(M[45]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Y(" 完成待办 ",-1)])]),o("button",{onClick:M[13]||(M[13]=te=>B("list-todos","请列出所有待办事项")),class:"op-btn"},[...M[46]||(M[46]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),Y(" 列出待办 ",-1)])]),o("button",{onClick:M[14]||(M[14]=te=>B("generate-todos","请根据我的笔记生成待办事项")),class:"op-btn special"},[...M[47]||(M[47]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),Y(" AI生成 ",-1)])]),o("button",{onClick:M[15]||(M[15]=te=>B("delete-todo","请删除待办事项: ")),class:"op-btn danger"},[...M[48]||(M[48]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y(" 删除待办 ",-1)])])])])):G("",!0),c.value==="settings"?(h(),v("div",i3,[o("div",a3,[o("button",{onClick:M[16]||(M[16]=te=>B("change-theme","请切换主题为: ")),class:"op-btn"},[...M[49]||(M[49]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})],-1),Y(" 切换主题 ",-1)])]),o("button",{onClick:M[17]||(M[17]=te=>B("change-language","请切换语言为: ")),class:"op-btn"},[...M[50]||(M[50]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})],-1),Y(" 切换语言 ",-1)])]),o("button",{onClick:M[18]||(M[18]=te=>B("view-settings","请显示当前设置")),class:"op-btn"},[...M[51]||(M[51]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Y(" 查看设置 ",-1)])]),o("button",{onClick:M[19]||(M[19]=te=>B("update-settings","请更新设置: ")),class:"op-btn"},[...M[52]||(M[52]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Y(" 更新设置 ",-1)])])])])):G("",!0)])):G("",!0),o("div",l3,[o("div",c3,[o("div",u3,[he(o("select",{"onUpdate:modelValue":M[20]||(M[20]=te=>u.value=te),class:"model-select"},[(h(!0),v(de,null,ge(F.value,te=>(h(),v("option",{key:te.value,value:te.value},y(te.label),9,d3))),128))],512),[[et,u.value]])]),o("button",{onClick:R,class:ne(["operations-toggle-btn",{active:d.value}])},[...M[53]||(M[53]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})],-1)])],2)]),o("div",f3,[he(o("input",{"onUpdate:modelValue":M[21]||(M[21]=te=>a.value=te),onKeypress:zo(ee,["enter"]),disabled:i.value,placeholder:"输入您的问题或文件操作指令...",class:"message-input"},null,40,p3),[[Ae,a.value]]),o("button",{onClick:ee,class:"send-btn group",disabled:!a.value.trim()||i.value},[...M[54]||(M[54]=[o("svg",{class:"w-5 h-5 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,h3)])])],4)):G("",!0)]),_:1})]),Ce(us,{name:"fullpage"},{default:Jt(()=>[S.value?(h(),v("div",v3,[Ce(qa,{onClose:$e})])):G("",!0)]),_:1})],64))}}),g3=Oe(m3,[["__scopeId","data-v-895c5f54"]]),y3={class:"timer-display"},_3={class:"timer-circle-container"},b3=["stroke"],w3=["stroke","stroke-dashoffset"],k3={class:"timer-center"},x3={class:"minutes"},C3={class:"seconds"},$3={class:"timer-label"},S3={key:0,class:"pulse-indicator"},T3={class:"progress-info"},M3={class:"progress-percentage"},ni=400,ri=12,cn=180,A3=Fe({__name:"TimerDisplay",props:{timeLeft:{},totalTime:{},isRunning:{type:Boolean},sessionType:{}},setup(e){const t=e,s=2*Math.PI*cn,n=be(()=>t.totalTime===0?0:(t.totalTime-t.timeLeft)/t.totalTime*100),r=be(()=>{const f=n.value/100;return s*(1-f)}),i=be(()=>Math.floor(t.timeLeft/60).toString().padStart(2,"0")),a=be(()=>(t.timeLeft%60).toString().padStart(2,"0")),l=be(()=>{switch(t.sessionType){case"work":return"专注工作";case"short_break":return"短休息";case"long_break":return"长休息";default:return"专注工作"}}),u=be(()=>{const f=t.timeLeft/t.totalTime*100;return f<=20&&f>0}),d=be(()=>"rgba(255, 255, 255, 0.1)"),c=be(()=>{if(u.value)return"url(#warningGradient)";switch(t.sessionType){case"work":return"url(#workGradient)";case"short_break":return"url(#shortBreakGradient)";case"long_break":return"url(#longBreakGradient)";default:return"url(#workGradient)"}});return be(()=>{if(u.value)return"#ff6b6b";switch(t.sessionType){case"work":return"#00f5ff";case"short_break":return"#7c3aed";case"long_break":return"#10b981";default:return"#00f5ff"}}),be(()=>{if(u.value)return"#ff8e8e";switch(t.sessionType){case"work":return"#ff00ff";case"short_break":return"#a855f7";case"long_break":return"#34d399";default:return"#ff00ff"}}),(f,C)=>(h(),v("div",y3,[o("div",_3,[(h(),v("svg",{class:ne(["timer-circle",{running:f.isRunning}]),width:ni,height:ni,viewBox:"0 0 400 400"},[o("circle",{cx:"200",cy:"200",r:cn,fill:"none",stroke:d.value,"stroke-width":ri,class:"timer-background"},null,8,b3),o("circle",{cx:"200",cy:"200",r:cn,fill:"none",stroke:c.value,"stroke-width":ri,"stroke-dasharray":s,"stroke-dashoffset":r.value,class:ne(["timer-progress",{"timer-running":f.isRunning,"timer-warning":u.value}]),"stroke-linecap":"round",transform:"rotate(-90 200 200)"},null,10,w3),C[0]||(C[0]=Zt('<defs data-v-2e048159><filter id="glow" x="-50%" y="-50%" width="200%" height="200%" data-v-2e048159><feGaussianBlur stdDeviation="3" result="coloredBlur" data-v-2e048159></feGaussianBlur><feMerge data-v-2e048159><feMergeNode in="coloredBlur" data-v-2e048159></feMergeNode><feMergeNode in="SourceGraphic" data-v-2e048159></feMergeNode></feMerge></filter><linearGradient id="workGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-2e048159><stop offset="0%" stop-color="#00f5ff" data-v-2e048159></stop><stop offset="100%" stop-color="#ff00ff" data-v-2e048159></stop></linearGradient><linearGradient id="shortBreakGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-2e048159><stop offset="0%" stop-color="#7c3aed" data-v-2e048159></stop><stop offset="100%" stop-color="#a855f7" data-v-2e048159></stop></linearGradient><linearGradient id="longBreakGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-2e048159><stop offset="0%" stop-color="#10b981" data-v-2e048159></stop><stop offset="100%" stop-color="#34d399" data-v-2e048159></stop></linearGradient><linearGradient id="warningGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-2e048159><stop offset="0%" stop-color="#ff6b6b" data-v-2e048159></stop><stop offset="100%" stop-color="#ff8e8e" data-v-2e048159></stop></linearGradient></defs>',1))],2)),o("div",k3,[o("div",{class:ne(["timer-time",{warning:u.value}])},[o("span",x3,y(i.value),1),C[1]||(C[1]=o("span",{class:"separator"},":",-1)),o("span",C3,y(a.value),1)],2),o("div",$3,y(l.value),1),f.isRunning?(h(),v("div",S3,[...C[2]||(C[2]=[o("div",{class:"pulse-dot"},null,-1)])])):G("",!0)])]),o("div",T3,[o("div",M3,y(Math.round(n.value))+"% ",1),C[3]||(C[3]=o("div",{class:"progress-label"}," 已完成 ",-1))])]))}}),E3=Oe(A3,[["__scopeId","data-v-2e048159"]]);class j3{constructor(){this.baseURL="/api/pomodoro"}async recordSession(t){try{const s=await fetch(`${this.baseURL}/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("记录番茄钟会话失败:",s),s}}async getStats(t="today"){try{const s=await fetch(`${this.baseURL}/stats?period=${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("获取番茄钟统计数据失败:",s),s}}async getSessions(t={}){try{const s=new URLSearchParams;t.taskId&&s.append("task_id",t.taskId),t.page&&s.append("page",t.page),t.limit&&s.append("limit",t.limit);const n=`${this.baseURL}/sessions${s.toString()?"?"+s.toString():""}`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(s){throw console.error("获取番茄钟会话历史失败:",s),s}}async getTodayStats(){return(await this.getStats("today")).today||{completedSessions:0,totalMinutes:0}}async getWeekStats(){return(await this.getStats("week")).week||{completedSessions:0,totalMinutes:0}}async getTaskSessions(t,s=1,n=10){return await this.getSessions({taskId:t,page:s,limit:n})}formatSessionData(t,s,n=null){return{duration_minutes:Math.max(1,Math.ceil(t/60)),session_type:s,task_id:n}}calculateCompletionRate(t,s){if(s===0)return 0;const n=s-t;return Math.round(n/s*100)}shouldRecordSession(t,s){return this.calculateCompletionRate(t,s)>=25}getSessionTypeLabel(t){return{work:"专注工作",short_break:"短休息",long_break:"长休息"}[t]||"未知类型"}getSessionTypeIcon(t){return{work:'<svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',short_break:'<svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>',long_break:'<svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>'}[t]||'<svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'}formatTime(t){const s=Math.floor(t/60),n=t%60;return`${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}formatDuration(t){if(t<60)return`${t}分钟`;{const s=Math.floor(t/60),n=t%60;return n>0?`${s}小时${n}分钟`:`${s}小时`}}async getTodayPomodoroCount(){try{return(await this.getTodayStats()).completedSessions||0}catch(t){return console.error("获取今日番茄钟数量失败:",t),0}}async getWeekPomodoroCount(){try{return(await this.getWeekStats()).completedSessions||0}catch(t){return console.error("获取本周番茄钟数量失败:",t),0}}async getAverageFocusTime(){try{const s=(await this.getSessions({limit:50})).sessions?.filter(r=>r.session_type==="work")||[];if(s.length===0)return 0;const n=s.reduce((r,i)=>r+i.duration_minutes,0);return Math.round(n/s.length)}catch(t){return console.error("计算平均专注时长失败:",t),0}}}const ao=new j3,P3={class:"futuristic-card mb-8"},N3={class:"timer-container mb-8"},L3={class:"session-info text-center mt-6"},I3={class:"session-type-badge"},B3=["innerHTML"],O3={class:"session-label"},D3={class:"cycle-info mt-2"},z3={class:"futuristic-subtitle"},R3={class:"controls-container"},F3={class:"flex justify-center space-x-4"},V3={class:"flex items-center space-x-2"},H3=["innerHTML"],U3=["disabled"],q3={key:0,class:"futuristic-card mb-8"},K3={class:"task-selection"},W3={class:"mb-4"},G3=["value"],J3={key:0,class:"selected-task-info"},X3={class:"futuristic-card bg-gradient-to-br from-cyber-primary/10 to-transparent p-4"},Y3={class:"flex items-center space-x-3"},Z3={class:"futuristic-title-small"},Q3={class:"futuristic-subtitle text-sm"},ek={class:"futuristic-card"},tk={class:"stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},sk={class:"stat-card"},ok={class:"stat-value"},nk={class:"stat-card"},rk={class:"stat-value"},ik={class:"stat-card"},ak={class:"stat-value"},lk={class:"stat-card"},ck={class:"stat-value"},uk={key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},dk={class:"futuristic-card max-w-md w-full mx-4"},fk={class:"text-center mb-6"},pk=["innerHTML"],hk={class:"futuristic-title-medium mb-2"},vk={class:"futuristic-subtitle"},mk={class:"flex justify-center space-x-4"},gk=Fe({__name:"PomodoroView",props:{selectedTask:{}},setup(e){const t=e,s=O(!1),n=O(0),r=O(0),i=O(!1),a=O("work"),l=O(1),u=O(""),d=O(!1),c=O([]),f=O({completedSessions:0,totalMinutes:0}),C=O({completedSessions:0,totalMinutes:0}),N=O(25),S=O(5),$=O(15),_=O(4);let m=null;const g=be(()=>c.value.find(ce=>ce.id===u.value)),E=async()=>{await _e.loadSettings(),N.value=parseInt(_e.getSetting("pomodoro_work_duration")||"25"),S.value=parseInt(_e.getSetting("pomodoro_short_break_duration")||"5"),$.value=parseInt(_e.getSetting("pomodoro_long_break_duration")||"15"),_.value=parseInt(_e.getSetting("pomodoro_cycles_before_long_break")||"4"),L()},P=async()=>{try{const ce=await Rt.getTodos();c.value=ce.filter(V=>!V.completed)}catch(ce){console.error("加载任务失败:",ce)}},j=async()=>{try{const[ce,V]=await Promise.all([ao.getTodayStats(),ao.getWeekStats()]);f.value=ce,C.value=V}catch(ce){console.error("加载统计数据失败:",ce)}},A=()=>{i.value?K():F()},F=()=>{n.value<=0&&L(),i.value=!0,m=setInterval(()=>{n.value--,n.value<=0&&ae()},1e3)},K=()=>{i.value=!1,m&&(clearInterval(m),m=null)},L=()=>{switch(K(),a.value){case"work":n.value=N.value*60,r.value=N.value*60;break;case"short_break":n.value=S.value*60,r.value=S.value*60;break;case"long_break":n.value=$.value*60,r.value=$.value*60;break}},J=()=>{ae()},ae=async()=>{K();try{const ce=r.value-n.value,V=ao.formatSessionData(ce,a.value,a.value==="work"&&u.value||null);await ao.recordSession(V),console.log("会话记录成功"),j()}catch(ce){console.error("记录会话失败:",ce)}_e.getSetting("pomodoro_sounds")==="true"&&Ee(),_e.getSetting("pomodoro_notifications")==="true"&&De(),d.value=!0},oe=()=>{a.value==="work"?l.value>=_.value?(a.value="long_break",l.value=1):(a.value="short_break",l.value++):a.value="work",L(),me(),F()},me=()=>{d.value=!1},Ee=()=>{try{const ce=new(window.AudioContext||window.webkitAudioContext),V=ce.createOscillator(),H=ce.createGain();V.connect(H),H.connect(ce.destination),a.value==="work"?(V.frequency.setValueAtTime(880,ce.currentTime),V.frequency.setValueAtTime(1100,ce.currentTime+.1),V.frequency.setValueAtTime(880,ce.currentTime+.2)):(V.frequency.setValueAtTime(660,ce.currentTime),V.frequency.setValueAtTime(440,ce.currentTime+.1),V.frequency.setValueAtTime(660,ce.currentTime+.2)),H.gain.setValueAtTime(.3,ce.currentTime),H.gain.exponentialRampToValueAtTime(.01,ce.currentTime+.3),V.start(ce.currentTime),V.stop(ce.currentTime+.3)}catch(ce){console.warn("音效播放失败:",ce)}},De=()=>{try{if(!("Notification"in window)){console.warn("此浏览器不支持桌面通知");return}const ce="番茄时钟",V=Ue(),H="/favicon.ico";if(Notification.permission==="granted"){const re=new Notification(ce,{body:V,icon:H,tag:"pomodoro-timer",requireInteraction:!1,silent:!1});setTimeout(()=>{re.close()},3e3)}else Notification.permission!=="denied"&&Notification.requestPermission().then(re=>{if(re==="granted"){const $e=new Notification(ce,{body:V,icon:H,tag:"pomodoro-timer",requireInteraction:!1,silent:!1});setTimeout(()=>{$e.close()},3e3)}})}catch(ce){console.warn("桌面通知显示失败:",ce)}},ee=()=>{switch(a.value){case"work":return'<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>';case"short_break":return'<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.5 3H6c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h12.5c.83 0 1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5zM18 19H6V5h12v14z"/><path d="M6.5 17.5h11v-1h-11v1zm0-2.5h11v-1h-11v1zm0-2.5h11v-1h-11v1z"/></svg>';case"long_break":return'<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';default:return'<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>'}},R=()=>{switch(a.value){case"work":return"专注工作";case"short_break":return"短休息";case"long_break":return"长休息";default:return"专注工作"}},B=()=>{switch(a.value){case"work":return'<svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';case"short_break":return'<svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>';case"long_break":return'<svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24"><path d="M4.5 10.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5.224.5.5-.224.5-.5.5zm15 0c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5.224.5.5-.224.5-.5.5zm-4.5 0c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5.224.5.5-.224.5-.5.5zm-5 0c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5.224.5.5-.224.5-.5.5zm-5 0c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5.224.5.5-.224.5-.5.5z"/></svg>';default:return'<svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>'}},xe=()=>{switch(a.value){case"work":return"专注完成！";case"short_break":return"休息结束！";case"long_break":return"长休息结束！";default:return"完成！"}},Ue=()=>{switch(a.value){case"work":return"恭喜你完成了一个专注时段，是时候休息一下了！";case"short_break":return"短暂的休息让你重新充满活力，继续加油！";case"long_break":return"充分的休息后，你已经准备好迎接新的挑战！";default:return"做得很好！"}},Ve=()=>a.value==="work"?l.value>=_.value?"长休息":"短休息":"专注工作";return Je(async()=>{await E(),await P(),await j(),t.selectedTask?.id&&(u.value=t.selectedTask.id),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),setTimeout(()=>{s.value=!0},100)}),Re(()=>t.selectedTask,ce=>{ce?.id&&(u.value=ce.id)},{immediate:!0}),Ut(()=>{m&&clearInterval(m)}),Re(()=>_e.settings,()=>{E()},{deep:!0}),(ce,V)=>(h(),v("div",{class:ne(["pomodoro-view",{"page-loaded":s.value}])},[o("div",P3,[V[3]||(V[3]=o("div",{class:"futuristic-header mb-6"},[o("h2",{class:"futuristic-title-medium"},"番茄时钟"),o("div",{class:"futuristic-subtitle"},"专注工作，高效休息")],-1)),o("div",N3,[Ce(E3,{"time-left":n.value,"total-time":r.value,"is-running":i.value,"session-type":a.value},null,8,["time-left","total-time","is-running","session-type"]),o("div",L3,[o("div",I3,[o("span",{class:"session-icon",innerHTML:ee()},null,8,B3),o("span",O3,y(R()),1)]),o("div",D3,[o("span",z3,"第 "+y(l.value)+" / "+y(_.value)+" 个工作周期",1)])])]),o("div",R3,[o("div",F3,[o("button",{onClick:A,class:ne(["futuristic-btn-primary px-8 py-3 text-lg font-semibold",i.value?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"])},[o("div",V3,[o("span",{innerHTML:i.value?"<svg class='w-5 h-5' fill='currentColor' viewBox='0 0 24 24'><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>":"<svg class='w-5 h-5' fill='currentColor' viewBox='0 0 24 24'><path d='M8 5v14l11-7z'/></svg>"},null,8,H3),o("span",null,y(i.value?"暂停":"开始"),1)])],2),o("button",{onClick:L,class:"futuristic-btn-secondary px-6 py-3",disabled:i.value},[...V[1]||(V[1]=[o("div",{class:"flex items-center space-x-2"},[o("span",null,[o("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})])]),o("span",null,"重置")],-1)])],8,U3),o("button",{onClick:J,class:"futuristic-btn-secondary px-6 py-3"},[...V[2]||(V[2]=[o("div",{class:"flex items-center space-x-2"},[o("span",null,[o("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})])]),o("span",null,"跳过")],-1)])])])])]),a.value==="work"?(h(),v("div",q3,[V[6]||(V[6]=o("div",{class:"futuristic-header mb-4"},[o("h3",{class:"futuristic-title-small"},"关联任务"),o("div",{class:"futuristic-subtitle"},"选择要专注完成的任务")],-1)),o("div",K3,[o("div",W3,[he(o("select",{"onUpdate:modelValue":V[0]||(V[0]=H=>u.value=H),class:"futuristic-input w-full"},[V[4]||(V[4]=o("option",{value:""},"不关联任务",-1)),(h(!0),v(de,null,ge(c.value,H=>(h(),v("option",{key:H.id,value:H.id},y(H.content),9,G3))),128))],512),[[et,u.value]])]),g.value?(h(),v("div",J3,[o("div",X3,[o("div",Y3,[V[5]||(V[5]=o("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),o("div",null,[o("div",Z3,y(g.value.content),1),o("div",Q3,y(g.value.description||"暂无描述"),1)])])])])):G("",!0)])])):G("",!0),o("div",ek,[V[15]||(V[15]=o("div",{class:"futuristic-header mb-6"},[o("h3",{class:"futuristic-title-small"},"专注统计"),o("div",{class:"futuristic-subtitle"},"今日和本周的专注数据")],-1)),o("div",tk,[o("div",sk,[V[7]||(V[7]=o("div",{class:"stat-icon"},[o("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})])],-1)),o("div",ok,y(f.value.completedSessions),1),V[8]||(V[8]=o("div",{class:"stat-label"},"今日完成",-1))]),o("div",nk,[V[9]||(V[9]=o("div",{class:"stat-icon"},[o("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})])],-1)),o("div",rk,y(f.value.totalMinutes),1),V[10]||(V[10]=o("div",{class:"stat-label"},"今日专注(分钟)",-1))]),o("div",ik,[V[11]||(V[11]=o("div",{class:"stat-icon"},[o("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"})])],-1)),o("div",ak,y(C.value.completedSessions),1),V[12]||(V[12]=o("div",{class:"stat-label"},"本周完成",-1))]),o("div",lk,[V[13]||(V[13]=o("div",{class:"stat-icon"},[o("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"})])],-1)),o("div",ck,y(C.value.totalMinutes),1),V[14]||(V[14]=o("div",{class:"stat-label"},"本周专注(分钟)",-1))])])]),d.value?(h(),v("div",uk,[o("div",dk,[o("div",fk,[o("div",{class:"text-6xl mb-4",innerHTML:B()},null,8,pk),o("h3",hk,y(xe()),1),o("p",vk,y(Ue()),1)]),o("div",mk,[o("button",{onClick:oe,class:"futuristic-btn-primary px-6 py-2"}," 开始"+y(Ve()),1),o("button",{onClick:me,class:"futuristic-btn-secondary px-6 py-2"}," 稍后开始 ")])])])):G("",!0)],2))}}),yk=Oe(gk,[["__scopeId","data-v-23fa6303"]]),_k={name:"ThemeToggle",setup(){const{isDarkMode:e,toggleTheme:t,themeColors:s}=Ro();return{isDarkMode:e,toggleTheme:t,themeColors:s,getParticleStyle:r=>{const i=r*60*Math.PI/180,a=25,l=Math.cos(i)*a,u=Math.sin(i)*a;return{"--x":`${l}px`,"--y":`${u}px`,"--delay":`${r*.1}s`}}}}},bk={class:"theme-toggle-container"},wk=["title"],kk={class:"toggle-track"},xk={class:"icon-container"},Ck={key:0,class:"icon sun-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},$k={key:1,class:"icon moon-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},Sk={class:"particles"};function Tk(e,t,s,n,r,i){return h(),v("div",bk,[o("button",{onClick:t[0]||(t[0]=(...a)=>n.toggleTheme&&n.toggleTheme(...a)),class:ne(["theme-toggle-btn",{"dark-mode":n.isDarkMode}]),title:n.isDarkMode?"切换到白天模式":"切换到夜晚模式"},[o("div",kk,[o("div",{class:ne(["toggle-thumb",{active:n.isDarkMode}])},[o("div",xk,[n.isDarkMode?(h(),v("svg",$k,[...t[2]||(t[2]=[o("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(h(),v("svg",Ck,[...t[1]||(t[1]=[Zt('<circle cx="12" cy="12" r="5" data-v-0d793c10></circle><line x1="12" y1="1" x2="12" y2="3" data-v-0d793c10></line><line x1="12" y1="21" x2="12" y2="23" data-v-0d793c10></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-0d793c10></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-0d793c10></line><line x1="1" y1="12" x2="3" y2="12" data-v-0d793c10></line><line x1="21" y1="12" x2="23" y2="12" data-v-0d793c10></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-0d793c10></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-0d793c10></line>',9)])]))])],2)]),o("div",Sk,[(h(),v(de,null,ge(6,a=>o("div",{class:"particle",key:a,style:He(n.getParticleStyle(a))},null,4)),64))])],10,wk)])}const Mk=Oe(_k,[["render",Tk],["__scopeId","data-v-0d793c10"]]),Ak={key:0,class:"fixed inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center z-50"},Ek={class:"text-center relative"},jk={class:"text-xl text-purple-300 opacity-80 mb-8 font-light"},Pk=["data-theme"],Nk={class:"fixed top-0 right-0 z-50 p-4"},Lk={class:"flex items-center space-x-3"},Ik={class:"relative z-20 min-h-screen"},Bk={class:"container mx-auto px-6 py-8"},Ok={class:"mb-8 text-left"},Dk={class:"futuristic-title-large mb-2"},zk={class:"futuristic-subtitle"},Rk={class:"max-w-7xl mx-auto"},Fk={key:6,class:"flex items-center justify-center min-h-[400px]"},Vk=Fe({__name:"App",setup(e){const t=O("notes"),s=O(!0),n=O(null),r=be(()=>_e.settings.theme||"dark"),{actualTheme:i,isDarkMode:a}=Ro(),l=()=>{const g=document.getElementById("settings-notifications");if(g){const E=j=>{const{message:A,type:F}=j.detail;P(A,F)},P=(j,A="info")=>{const F=document.createElement("div");F.className=`settings-notification settings-notification-${A}`,F.innerHTML=`
        <div class="notification-content">
          <span class="notification-message">${j}</span>
          <button class="notification-close" onclick="this.parentElement.parentElement.remove()">×</button>
        </div>
      `,g.appendChild(F),setTimeout(()=>{F.parentElement&&F.remove()},3e3)};return window.addEventListener("setting-notification",E),()=>{window.removeEventListener("setting-notification",E)}}};Je(async()=>{await _e.loadSettings(),await u(),_e.addListener(()=>{});const g=F=>{const{file:K}=F.detail;c(K)},E=()=>{f()};window.addEventListener("apply-background",g),window.addEventListener("clear-background",E);const P=l(),j=F=>{$.value=F},A=x.addListener(j);setTimeout(()=>{s.value=!1},2e3),window.appCleanupFunctions={cleanupNotifications:P,removeLanguageListener:A,handleApplyBackground:g,handleClearBackground:E}});const u=async()=>{try{const g=a.value?"dark":"light";console.log(`[APP] Loading current background for theme: ${g}`);const E=await fetch(`/api/settings/background?theme=${g}`);if(!E.ok)throw new Error(`Failed to load background setting: ${E.status}`);const P=await E.json();if(console.log(`[APP] Background setting for ${g} theme:`,P),P.backgroundId){const j=await fetch("/api/backgrounds");if(!j.ok)throw new Error("Failed to load background files");const K=(await j.json()).map(L=>({...L,url:L.url.startsWith("http")?L.url:`${L.url}`})).find(L=>L.id===P.backgroundId);K?(console.log(`[APP] Applying background: ${K.url}`),c(K)):(console.warn(`[APP] Background file not found: ${P.backgroundId}`),f())}else console.log(`[APP] No background set for ${g} theme`),f()}catch(g){console.error("[APP] Error loading current background:",g),f()}};Re(a,async(g,E)=>{console.log("[APP] isDarkMode changed from",E,"to",g),window.themeSwitchTimeout&&clearTimeout(window.themeSwitchTimeout),window.themeSwitchTimeout=setTimeout(async()=>{try{console.log(`[APP] Loading background for ${g?"DARK":"LIGHT"} theme`),await u()}catch(P){console.error("[APP] Error loading theme background:",P),f()}},150)},{immediate:!0}),Re(()=>i.value,g=>{console.log("[APP] actualTheme value changed to:",g)},{immediate:!0});const d=O(null),c=g=>{console.log("[APP] applyBackground called with file:",g),console.log(`[APP] Current theme: ${a.value?"dark":"light"}`),g&&g.type?g.type.startsWith("image/")||g.type==="image"?(console.log("[APP] Setting image background:",g.url),d.value=g.url):g.type.startsWith("video/")||g.type==="video"?(console.log("[APP] Setting video background:",g.url),d.value=g.url):(console.log("[APP] Unknown file type, clearing background:",g.type),d.value=null):(console.log("[APP] No valid file provided, clearing background"),d.value=null),console.log("[APP] currentUserBackground.value set to:",d.value)},f=()=>{console.log(`[APP] clearBackground called - Current theme: ${a.value?"dark":"light"}`),console.log("[APP] Previous background:",d.value),d.value=null,console.log("[APP] Background cleared, currentUserBackground.value:",d.value)};Ut(()=>{if(window.appCleanupFunctions){const{cleanupNotifications:g,removeLanguageListener:E,handleApplyBackground:P,handleClearBackground:j}=window.appCleanupFunctions;g&&g(),E&&E(),P&&window.removeEventListener("apply-background",P),j&&window.removeEventListener("clear-background",j),delete window.appCleanupFunctions}});const C=g=>{t.value=g},N=g=>{t.value=g},S=g=>{n.value=g},$=O(x.getLanguage()),_=be(()=>{switch($.value,t.value){case"notes":return x.t("notes");case"todos":return x.t("todos");case"projects":return"项目管理";case"ai":return x.t("ai_assistant");case"audio":return x.t("audio_analysis");case"settings":return x.t("settings");default:return x.t("ai_assistant")}}),m=be(()=>{if($.value==="zh-CN")switch(t.value){case"notes":return"智能编辑，AI增强的笔记体验";case"todos":return"高效管理，智能提醒的任务系统";case"projects":return"AI增强的项目管理，看板式任务协作";case"ai":return"智能对话，多模型AI助手";case"pomodoro":return"专注工作，高效休息的番茄时钟";case"settings":return"个性化配置，打造专属工作空间";default:return"全能AI助手，随时为您服务"}else switch(t.value){case"notes":return"Smart editing with AI-enhanced note experience";case"todos":return"Efficient management with intelligent reminder system";case"projects":return"AI-enhanced project management with Kanban-style collaboration";case"ai":return"Intelligent conversation with multi-model AI assistant";case"pomodoro":return"Focus work and efficient rest with Pomodoro Timer";case"settings":return"Personalized configuration for your workspace";default:return"All-in-one AI assistant, ready to serve you"}});return(g,E)=>{const P=lr("StaticBackground"),j=lr("ParticleBackground");return s.value?(h(),v("div",Ak,[o("div",Ek,[E[0]||(E[0]=o("div",{class:"relative mb-8"},[o("h1",{class:"text-6xl font-bold bg-gradient-to-r from-purple-400 via-cyan-400 to-purple-400 bg-clip-text text-transparent animate-pulse"}," AI WORKSPACE "),o("div",{class:"absolute inset-0 text-6xl font-bold text-purple-500 opacity-20 blur-sm"}," AI WORKSPACE ")],-1)),o("p",jk,y(I(x).t("loading_subtitle")),1),E[1]||(E[1]=Zt('<div class="flex items-center justify-center space-x-2 mb-4" data-v-16305bba><div class="w-3 h-3 bg-gradient-to-r from-purple-400 to-cyan-400 rounded-full animate-bounce" data-v-16305bba></div><div class="w-3 h-3 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-16305bba></div><div class="w-3 h-3 bg-gradient-to-r from-purple-400 to-cyan-400 rounded-full animate-bounce" style="animation-delay:0.4s;" data-v-16305bba></div></div><div class="w-64 h-1 bg-slate-700 rounded-full overflow-hidden mx-auto" data-v-16305bba><div class="h-full bg-gradient-to-r from-purple-500 to-cyan-500 rounded-full animate-pulse" style="width:100%;animation-duration:2s;" data-v-16305bba></div></div>',2))]),E[2]||(E[2]=o("div",{class:"absolute inset-0"},[o("div",{class:"particle-bg"})],-1))])):(h(),v("div",{key:1,class:"min-h-screen relative","data-theme":r.value},[E[4]||(E[4]=o("div",{class:"settings-notification-container",id:"settings-notifications"},null,-1)),d.value?G("",!0):(h(),Ie(P,{key:0})),d.value?(h(),v("div",{key:1,class:"fixed inset-0 pointer-events-none",style:He({backgroundImage:`url(${d.value})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:.9,zIndex:1})},null,4)):G("",!0),Ce(j),Ce(Uu),o("div",Nk,[o("div",Lk,[Ce(Mk),Ce(ed,{"current-view":t.value,onSetView:C},null,8,["current-view"])])]),o("main",Ik,[o("div",Bk,[o("div",Ok,[o("h1",Dk,y(_.value),1),o("p",zk,y(m.value),1)]),o("div",Rk,[Ce(us,{name:"page",mode:"out-in"},{default:Jt(()=>[(h(),v("div",{key:t.value,class:"min-h-[600px]"},[t.value==="notes"?(h(),Ie(tp,{key:0})):t.value==="todos"?(h(),Ie(W2,{key:1,onSetView:N,onStartPomodoro:S})):t.value==="projects"?(h(),Ie($g,{key:2})):t.value==="ai"?(h(),Ie(qa,{key:3})):t.value==="pomodoro"?(h(),Ie(yk,{key:4,"selected-task":n.value},null,8,["selected-task"])):t.value==="settings"?(h(),Ie(Mb,{key:5})):(h(),v("div",Fk,[...E[3]||(E[3]=[o("div",{class:"futuristic-card text-center p-12 max-w-md"},[o("svg",{class:"w-24 h-24 mb-4 text-cyber-primary",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})]),o("h2",{class:"futuristic-title mb-4"},"AI智能助手"),o("p",{class:"futuristic-subtitle mb-6"},"强大的AI功能即将上线"),o("div",{class:"w-full h-2 rounded-full overflow-hidden",style:{background:"var(--theme-surface)"}},[o("div",{class:"h-full rounded-full animate-pulse",style:{width:"85%",background:"linear-gradient(90deg, var(--theme-primary), var(--theme-secondary))"}})]),o("p",{class:"text-sm mt-2 futuristic-subtitle"},"开发进度 85%")],-1)])]))]))]),_:1})])])]),Ce(g3)],8,Pk))}}}),Hk=Oe(Vk,[["__scopeId","data-v-16305bba"]]);_u(Hk).mount("#app");
